import{_ as d,r as a,o as u,c as r,b as e,w as i,a as n,d as s,e as p}from"./app.1137d7ac.js";const h={},m=n("h1",{id:"conjunto-de-middlewares-utiles",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#conjunto-de-middlewares-utiles","aria-hidden":"true"},"#"),s(" Conjunto de middlewares \xFAtiles")],-1),_=p(`<p>Segu\xED reescribiendo los mismos middlewares una y otra vez para todos mis bots as\xED que decid\xED extraerlos todos a un paquete separado.</p><h2 id="instalacion" tabindex="-1"><a class="header-anchor" href="#instalacion" aria-hidden="true">#</a> Instalaci\xF3n</h2><p><code>yarn add grammy<wbr>-middlewares</code></p><h2 id="uso" tabindex="-1"><a class="header-anchor" href="#uso" aria-hidden="true">#</a> Uso</h2><p>Todos los accesos al middleware son factories, aunque no todos tienen que serlo. He decidido hacer la API homog\xE9nea.</p><p>Algunas de las factories consumen par\xE1metros opcionales o requeridos.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  ignoreOld<span class="token punctuation">,</span>
  onlyAdmin<span class="token punctuation">,</span>
  onlyPublic<span class="token punctuation">,</span>
  onlySuperAdmin<span class="token punctuation">,</span>
  sequentialize<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;grammy-middlewares&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token function">ignoreOld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">onlyAdmin</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;S\xF3lo los administradores pueden hacer esto&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">onlyPublic</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;S\xF3lo puedes usar los chats p\xFAblicos&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">onlySuperAdmin</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">SUPER_ADMIN_ID</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">sequentialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="middlewares" tabindex="-1"><a class="header-anchor" href="#middlewares" aria-hidden="true">#</a> Middlewares</h2><h3 id="ignoreold" tabindex="-1"><a class="header-anchor" href="#ignoreold" aria-hidden="true">#</a> <code>ignore<wbr>Old</code></h3><p>Ignora las actualizaciones antiguas, \xFAtil cuando el bot ha estado inactivo durante un tiempo. Puedes especificar opcionalmente el tiempo de espera en segundos que por defecto es de <code>5 * 60</code>.</p><h3 id="onlyadmin" tabindex="-1"><a class="header-anchor" href="#onlyadmin" aria-hidden="true">#</a> <code>only<wbr>Admin</code></h3><p>Comprueba si el usuario es un administrador. Puedes especificar opcionalmente <code>error<wbr>Handler</code> que es llamado con el contexto si el usuario no es un administrador.</p><h3 id="onlypublic" tabindex="-1"><a class="header-anchor" href="#onlypublic" aria-hidden="true">#</a> <code>only<wbr>Public</code></h3><p>Comprueba si es un chat de grupo o un canal. Puedes especificar opcionalmente <code>error<wbr>Handler</code> que se llama con el contexto si no es un chat de grupo o un canal.</p><h3 id="onlysuperadmin" tabindex="-1"><a class="header-anchor" href="#onlysuperadmin" aria-hidden="true">#</a> <code>only<wbr>Super<wbr>Admin</code></h3><p>Comprueba si el usuario es un superadministrador. Tienes que proporcionar el id de superadministrador.</p><h3 id="sequentialize" tabindex="-1"><a class="header-anchor" href="#sequentialize" aria-hidden="true">#</a> <code>sequentialize</code></h3>`,17),b=s("El middleware b\xE1sico "),k=s("sequentialize"),v=s(" que toma el id del chat como identificador secuencial."),g=n("h2",{id:"resumen-del-plugin",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#resumen-del-plugin","aria-hidden":"true"},"#"),s(" Resumen del plugin")],-1),f=n("li",null,[s("Nombre: "),n("code",null,[s("grammy"),n("wbr"),s("-middlewares")])],-1),w=s("Fuente: "),y={href:"https://github.com/backmeupplz/grammy-middlewares",target:"_blank",rel:"noopener noreferrer"},x=s("https://"),q=n("wbr",null,null,-1),z=s("github"),A=n("wbr",null,null,-1),S=s(".com"),C=n("wbr",null,null,-1),E=s("/backmeupplz"),P=n("wbr",null,null,-1),T=s("/grammy"),I=n("wbr",null,null,-1),R=s("-middlewares"),N=s("Referencia: "),j={href:"https://github.com/backmeupplz/grammy-middlewares",target:"_blank",rel:"noopener noreferrer"},D=s("https://"),L=n("wbr",null,null,-1),O=s("github"),V=n("wbr",null,null,-1),B=s(".com"),H=n("wbr",null,null,-1),G=s("/backmeupplz"),M=n("wbr",null,null,-1),U=s("/grammy"),F=n("wbr",null,null,-1),J=s("-middlewares");function K(Q,W){const o=a("Tag"),c=a("TagGroup"),l=a("RouterLink"),t=a("ExternalLinkIcon");return u(),r("div",null,[m,e(c,null,{default:i(()=>[e(o,{type:"thirdparty",text:"DE TERCEROS"}),e(o,{type:"nodejs"})]),_:1}),_,n("p",null,[b,e(l,{to:"/es/advanced/scaling.html#la-concurrencia-es-dif%C3%ADcil"},{default:i(()=>[k]),_:1}),v]),g,n("ul",null,[f,n("li",null,[w,n("a",y,[x,q,z,A,S,C,E,P,T,I,R,e(t)])]),n("li",null,[N,n("a",j,[D,L,O,V,B,H,G,M,U,F,J,e(t)])])])])}const Y=d(h,[["render",K],["__file","middlewares.html.vue"]]);export{Y as default};
