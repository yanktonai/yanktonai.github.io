import{_ as l,r as u,o as r,c as k,a as n,b as s,w as t,e as i,d as a}from"./app.c0ce12a9.js";const d={},m=i('<h1 id="session-dan-penyimpanan-data-built-in" tabindex="-1"><a class="header-anchor" href="#session-dan-penyimpanan-data-built-in" aria-hidden="true">#</a> Session dan Penyimpanan Data (Built-In)</h1><p>Meski kamu bisa saja menulis sendiri kode untuk melakukan koneksi ke sebuah data storage favoritmu, namun grammY sudah menyediakan sebuah skema penyimpanan praktis yang disebut dengan <em>session</em>.</p><blockquote><p>Langsung <a href="#cara-menggunakan-session">lompat ke bawah</a> jika sudah tahu cara kerja session.</p></blockquote><h2 id="mengapa-kita-perlu-memikirkan-tempat-penyimpanan" tabindex="-1"><a class="header-anchor" href="#mengapa-kita-perlu-memikirkan-tempat-penyimpanan" aria-hidden="true">#</a> Mengapa Kita Perlu Memikirkan Tempat Penyimpanan?</h2>',4),b=a("Berbeda dengan akun user Telegram biasa, bot memiliki "),g={href:"https://core.telegram.org/bots#4-how-are-bots-different-from-humans",target:"_blank",rel:"noopener noreferrer"},h=a("cloud storage yang terbatas"),v=a(" di Telegram cloud. Akibatnya, ada beberapa hal yang tidak bisa kamu lakukan di bot:"),_=i(`<ol><li>Kamu tidak bisa mengakses pesan lama yang pernah diterima oleh bot-mu.</li><li>Kamu tidak bisa mengakses pesan lama yang pernah dikirim oleh bot-mu.</li><li>Kamu tidak bisa memperoleh daftar semua chat yang terhubung ke bot kamu.</li><li>Dan hal-hal lainnya, seperti tidak disediakannya media overview, dll.</li></ol><p>Dengan kata lain, <strong>bot hanya bisa mengakses informasi update yang datang pada saat itu saja</strong> (misal sebuah pesan), contohnya informasi yang tersedia di object context <code>ctx</code>.</p><p>Oleh karena itu, jika kamu <em>ingin mengakses</em> data lama, kamu perlu menyimpannya segera setelah data itu diterima. Kamu harus memiliki sebuah data storage, misalnya di file, database, atau in-memory.</p><p>Tentu saja, grammY sudah mengantisipasinya agar kamu tidak perlu repot-repot menyiapkannya sendiri. Kamu bisa menggunakan penyimpanan session grammY yang bisa langsung dipakai dan gratis untuk selamanya.</p><blockquote><p>Secara umum, ada banyak provider di luar sana yang menawarkan layanan data storage, dan grammY sudah terintegrasi dengan mereka tanpa ada kendala. Jika kamu hendak menjalankan database-mu sendiri, bisa dipastikan grammY juga mampu terintegrasi sama baiknya. <a href="#storage-adapter-yang-tersedia">Gulir ke bawah</a> untuk melihat daftar integrasi yang tersedia.</p></blockquote><h2 id="apa-itu-session" tabindex="-1"><a class="header-anchor" href="#apa-itu-session" aria-hidden="true">#</a> Apa Itu Session?</h2><p>Suatu hal yang lumrah untuk sebuah bot menyimpan beberapa data dari masing-masing chat. Contohnya, anggaplah kita ingin membuat sebuah bot yang menghitung berapa banyak pesan yang mengandung emoji \u{1F431} di teksnya. Bot kemudian dimasukkan ke dalam sebuah grup, dan dari sana kita bisa tahu seberapa besar kamu beserta teman-temanmu menyukai kucing.</p><p>Ketika bot kucing kita menerima sebuah pesan, ia harus mengingat sudah berapa kali ia melihat sebuah \u{1F431} di chat tersebut sebelumnya. Perhitungan kucingmu tentu saja tidak boleh berubah ketika temanmu menambahkan bot kucing ke grup lain, oleh karena itu yang kita butuhkan adalah menyimpan <em>satu perhitungan per chat</em> agar perhitungan masing-masing chat tidak saling tumpang tindih.</p><p>Session mampu menyimpan data <em>per chat</em> dengan cara yang lebih elegan. Kamu akan menggunakan chat identifier (chat id) sebagai key di database kamu, dan hasil perhitungan sebagai value-nya. Dari contoh di atas, kita bisa menggunakan chat identifier sebagai <em>session key</em>-nya (kamu bisa mempelajari lebih lanjut tentang session key di <a href="#session-key">bawah sini</a>). Alhasil, bot kamu akan menyimpan sebuah map chat identifier ke beberapa data session khusus, contohnya seperti ini:</p><div class="language-json ext-json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;271828&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;hitungKucing&quot;</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;314159&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;hitungKucing&quot;</span><span class="token operator">:</span> <span class="token number">265</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>Ketika kami menyebut database, kami benar-benar merujuk ke sebuah penyimpanan data, apapun bentuknya. Termasuk file, cloud storage, atau lainnya.</p></blockquote><p>OK, keren. Tapi, bagaimana sebenarnya cara kerja session di atas?</p><p>Kita bisa memasang middleware yang bertugas menyediakan data session dari suatu chat ke <code>ctx<wbr>.session</code> untuk setiap update. Plugin yang terpasang akan melakukan sesuatu baik sebelum maupun sesudah pemanggilan handler kita:</p><ol><li><strong>Sebelum middleware dijalankan.</strong> Plugin session mengambil dan memuat session data untuk chat terkait dari database. Ia menyimpan data tersebut di object context <code>ctx<wbr>.session</code>.</li><li><strong>Ketika middleware dijalankan.</strong> Kita bisa <em>membaca</em> <code>ctx<wbr>.session</code> untuk memeriksa value mana yang tersedia di database. Dari contoh di atas, jika sebuah pesan dikirim ke sebuah chat dengan identifier<code>314159</code>, ia akan menjadi <code>ctx<wbr>.session <wbr>=<wbr> { hitung<wbr>Kucing:<wbr> 265 }</code> ketika middleware dijalankan. Kita juga bisa <em>memodifikasi</em> <code>ctx<wbr>.session</code> sesuka hati, sehingga kita bisa menambah, mengubah serta menghapus field sesuai yang kita inginkan.</li><li><strong>Setelah middleware dijalankan.</strong> Middleware session memastikan bahwa data berhasil ditulis kembali ke database. Setiap kali middleware berhasil diproses, value <code>ctx<wbr>.session</code> akan disimpan kembali di database.</li></ol><p>Sekarang, kita tidak perlu lagi memikirkan cara berkomunikasi dengan data storage. Cukup dengan memodifikasi data di <code>ctx<wbr>.session</code>, lalu plugin akan mengurus sisanya.</p><h2 id="kapan-kita-perlu-session" tabindex="-1"><a class="header-anchor" href="#kapan-kita-perlu-session" aria-hidden="true">#</a> Kapan Kita Perlu Session?</h2><blockquote><p><a href="#cara-menggunakan-session">Lewati</a> jika kamu sudah yakin akan menggunakan session.</p></blockquote><p>Kamu mungkin sekarang berpikir, \u201CSip! sekarang aku tidak perlu capek-capek mengatur database lagi.\u201D Yup, kamu benar, session merupakan solusi yang ideal\u2014untuk tipe data tertentu saja.</p><p>Berdasarkan pengalaman kami, ada beberapa situasi dimana session benar-benar berjaya. Di sisi lain, ada situasi-situasi tertentu dimana sebuah database tradisional mungkin lebih cocok dipakai.</p><p>Berikut tabel perbandingan yang mungkin bisa membantu kamu memutuskan perlu tidaknya menggunakan session:</p><table><thead><tr><th></th><th>Sessions</th><th>Database</th></tr></thead><tbody><tr><td><em>Akses</em></td><td>penyimpanan tunggal terisolasi <strong>per chat</strong></td><td>akses data yang sama dari <strong>berbagai chat</strong></td></tr><tr><td><em>Berbagi</em></td><td>data <strong>hanya digunakan oleh bot</strong></td><td>data <strong>digunakan oleh sistem lain</strong> (misal oleh sebuah web server yang terkoneksi)</td></tr><tr><td><em>Format</em></td><td>semua object JavaScript: string, angka, array, dll</td><td>semua macam bentuk data (binary, file, struktur, dll)</td></tr><tr><td><em>Ukuran per chat</em></td><td>sebaiknya kurang dari ~3 MB per chat</td><td>bebas, berapa pun ukurannya</td></tr><tr><td><em>Fitur eksklusif</em></td><td>Dibutuhkan oleh beberapa plugin grammY.</td><td>Mendukung transaksi database.</td></tr></tbody></table><p>Perlu diketahui bahwa dengan memilih salah satu session/database bukan berarti beberapa hal <em>tidak bisa bekerja</em> di session/database lain. Contohnya, kamu tentu saja bisa menyimpan data binary dalam jumlah besar di session-mu. Tetapi, bot kamu tidak akan mampu bekerja secara maksimal. Oleh karena itu, kami menyarankan untuk menggunakan session sewajarnya saja.</p><h2 id="cara-menggunakan-session" tabindex="-1"><a class="header-anchor" href="#cara-menggunakan-session" aria-hidden="true">#</a> Cara Menggunakan Session</h2><p>Kamu bisa menambahkan fitur session ke grammY menggunakan middleware session built-in.</p><h3 id="contoh-penggunaan" tabindex="-1"><a class="header-anchor" href="#contoh-penggunaan" aria-hidden="true">#</a> Contoh Penggunaan</h3><p>Berikut contoh bot yang menghitung jumlah pesan yang mengandung sebuah emoji kucing \u{1F431}:</p>`,26),y=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" Bot"),n("span",{class:"token punctuation"},","),a(" Context"),n("span",{class:"token punctuation"},","),a(" session"),n("span",{class:"token punctuation"},","),a(" SessionFlavor "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"grammy"'),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Tentukan bentuk session kita."),a(`
`),n("span",{class:"token keyword"},"interface"),a(),n("span",{class:"token class-name"},"SessionData"),a(),n("span",{class:"token punctuation"},"{"),a(`
  hitungKucing`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"number"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token comment"},"// Tambahkan flavor yang berisi session ke type context."),a(`
`),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"MyContext"),a(),n("span",{class:"token operator"},"="),a(" Context "),n("span",{class:"token operator"},"&"),a(" SessionFlavor"),n("span",{class:"token operator"},"<"),a("SessionData"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token keyword"},"const"),a(" bot "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},[a("Bot"),n("span",{class:"token operator"},"<"),a("MyContext"),n("span",{class:"token operator"},">")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Pasang middleware session, kemudian tentukan nilai awal session."),a(`
`),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"initial"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),a(" SessionData "),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"return"),a(),n("span",{class:"token punctuation"},"{"),a(" hitungKucing"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"0"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(" initial "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"command"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"meong"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" count "),n("span",{class:"token operator"},"="),a(" ctx"),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitungKucing"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Tingkat UwU kamu berada di level "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("count"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"!"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"hears"),n("span",{class:"token punctuation"},"("),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},".*\u{1F431}.*"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitungKucing"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),w=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" Bot"),n("span",{class:"token punctuation"},","),a(" session "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"grammy"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token keyword"},"const"),a(" bot "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"Bot"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Pasang middleware session, kemudian tentukan nilai awal session."),a(`
`),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"initial"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"return"),a(),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token literal-property property"},"hitungKucing"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"0"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(" initial "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"command"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"meong"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" count "),n("span",{class:"token operator"},"="),a(" ctx"),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitungKucing"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Tingkat UwU kamu berada di level "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("count"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"!"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"hears"),n("span",{class:"token punctuation"},"("),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},".*\u{1F431}.*"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitungKucing"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),f=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(`
  Bot`),n("span",{class:"token punctuation"},","),a(`
  Context`),n("span",{class:"token punctuation"},","),a(`
  session`),n("span",{class:"token punctuation"},","),a(`
  SessionFlavor`),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"https://deno.land/x/grammy@v1.11.1/mod.ts"'),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Tentukan bentuk session kita."),a(`
`),n("span",{class:"token keyword"},"interface"),a(),n("span",{class:"token class-name"},"SessionData"),a(),n("span",{class:"token punctuation"},"{"),a(`
  hitungKucing`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"number"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token comment"},"// Tambahkan flavor yang berisi session ke type context."),a(`
`),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"MyContext"),a(),n("span",{class:"token operator"},"="),a(" Context "),n("span",{class:"token operator"},"&"),a(" SessionFlavor"),n("span",{class:"token operator"},"<"),a("SessionData"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token keyword"},"const"),a(" bot "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},[a("Bot"),n("span",{class:"token operator"},"<"),a("MyContext"),n("span",{class:"token operator"},">")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Pasang middleware session, kemudian tentukan nilai awal session."),a(`
`),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"initial"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),a(" SessionData "),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"return"),a(),n("span",{class:"token punctuation"},"{"),a(" hitungKucing"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"0"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(" initial "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"command"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"meong"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" count "),n("span",{class:"token operator"},"="),a(" ctx"),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitungKucing"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Tingkat UwU kamu berada di level "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("count"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"!"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"hears"),n("span",{class:"token punctuation"},"("),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},".*\u{1F431}.*"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitungKucing"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),x=a("Perhatikan bahwa kita perlu "),S=a("mengatur type context"),j=a(" agar session tersedia di dalamnya. Flavor context untuk session kita sebut dengan "),K=n("code",null,[a("Session"),n("wbr"),a("Flavor")],-1),D=a("."),B=i(`<h3 id="data-awal-session" tabindex="-1"><a class="header-anchor" href="#data-awal-session" aria-hidden="true">#</a> Data Awal Session</h3><p>Ketika user melakukan kontak ke bot untuk yang pertama kalinya, data session masih belum tersedia untuk user tersebut. Itulah kenapa kita perlu menentukan opsi <code>initial</code> sebagai nilai awal untuk middleware session. Buat sebuah function yang menghasilkan object baru yang didalamnya terdapat data awal untuk chat baru.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Buat sebuah object baru yang akan digunakan sebagai data awal session.</span>
<span class="token keyword">function</span> <span class="token function">createInitialSessionData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    hitungKucing<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// Masukkan data lainnya di sini.</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span> initial<span class="token operator">:</span> createInitialSessionData <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Sama tetapi lebih singkat:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">initial</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> hitungKucing<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">Berbagi Object</p><p>Pastikan untuk selalu membuat <em>object baru</em>. <strong>JANGAN</strong> lakukan ini:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// SALAH, STOP, FATAL, BERBAHAYA, JANGAN DITIRU</span>
<span class="token keyword">const</span> dataAwal <span class="token operator">=</span> <span class="token punctuation">{</span> hitungKucing<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// NGGAK!</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">initial</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> dataAwal <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// YA AMPUN!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Kalau kamu melakukannya, beberapa chat akan berbagi object session yang sama di memory. Akibatnya, mengubah data session di satu chat akan mempengaruhi data session di chat lain.</p></div><p>Kamu juga bisa mengabaikan opsi <code>initial</code>, meskipun kami menyarankan untuk tidak melakukannya. Kalau kamu tidak menentukan opsi tersebut, pembacaan <code>ctx<wbr>.session</code> akan mengakibatkan sebuah error untuk user baru.</p><h3 id="session-key" tabindex="-1"><a class="header-anchor" href="#session-key" aria-hidden="true">#</a> Session Key</h3><blockquote><p>Bagian ini membahas fitur lanjutan yang untuk sebagian besar orang bisa diabaikan. Kamu bisa melanjutkan ke bagian <a href="#menyimpan-data">Menyimpan Data</a>.</p></blockquote>`,9),T=a("Kamu bisa menentukan session key mana yang akan digunakan dengan cara memasukkan sebuah function bernama "),P=n("code",null,[a("get"),n("wbr"),a("Session"),n("wbr"),a("Key")],-1),q=a(" ke "),M={href:"https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/SessionOptions#getSessionKey",target:"_blank",rel:"noopener noreferrer"},A=a("opsi session"),C=a(". Dengan begitu, kamu bisa mengubah perilaku plugin session sepenuhnya. Secara bawaan, data disimpan per chat. Tetapi, dengan menggunakan "),F=n("code",null,[a("get"),n("wbr"),a("Session"),n("wbr"),a("Key")],-1),L=a(" kamu bisa menyimpan data entah itu per user, kombinasi per user dan chat, ataupun cara lainnya. Berikut ketiga contohnya:"),N=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// Simpan data per chat (bawaan)"),a(`
`),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"getSessionKey"),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token operator"},":"),a(" Context"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"string"),a(),n("span",{class:"token operator"},"|"),a(),n("span",{class:"token keyword"},"undefined"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Biarkan semua user di chat grup yang sama berbagi session yang sama juga,"),a(`
  `),n("span",{class:"token comment"},"// tetapi berikan session tersendiri untuk tiap user di chat pribadi"),a(`
  `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token operator"},"?."),a("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token comment"},"// Simpan data per user."),a(`
`),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"getSessionKey"),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token operator"},":"),a(" Context"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"string"),a(),n("span",{class:"token operator"},"|"),a(),n("span",{class:"token keyword"},"undefined"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Beri setiap user penyimpanan session tersendiri"),a(`
  `),n("span",{class:"token comment"},"// (menggunakan session yang sama, baik di grup maupun di chat pribadi mereka)"),a(`
  `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("from"),n("span",{class:"token operator"},"?."),a("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token comment"},"// Simpan data kombinasi per user dan chat"),a(`
`),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"getSessionKey"),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token operator"},":"),a(" Context"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"string"),a(),n("span",{class:"token operator"},"|"),a(),n("span",{class:"token keyword"},"undefined"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Beri setiap user penyimpanan session tersendiri untuk masing-masing chat"),a(`
  `),n("span",{class:"token comment"},"// (session tersendiri untuk setiap grup dan chat pribadi mereka)"),a(`
  `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("from "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token keyword"},"undefined"),a(),n("span",{class:"token operator"},"||"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("chat "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token keyword"},"undefined"),a(`
    `),n("span",{class:"token operator"},"?"),a(),n("span",{class:"token keyword"},"undefined"),a(`
    `),n("span",{class:"token operator"},":"),a(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("ctx"),n("span",{class:"token punctuation"},"."),a("from"),n("span",{class:"token punctuation"},"."),a("id"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"/"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token punctuation"},"."),a("id"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(" getSessionKey "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),I=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// Simpan data per chat (bawaan)"),a(`
`),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"getSessionKey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Biarkan semua user di chat grup yang sama berbagi session yang sama juga,"),a(`
  `),n("span",{class:"token comment"},"// tetapi berikan session tersendiri untuk tiap user di chat pribadi"),a(`
  `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token operator"},"?."),a("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token comment"},"// Simpan data per user."),a(`
`),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"getSessionKey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Beri setiap user penyimpanan session tersendiri"),a(`
  `),n("span",{class:"token comment"},"// (menggunakan session yang sama, baik di grup maupun di chat pribadi mereka)"),a(`
  `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("from"),n("span",{class:"token operator"},"?."),a("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token comment"},"// Simpan data kombinasi per user dan chat"),a(`
`),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"getSessionKey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Beri setiap user penyimpanan session tersendiri untuk masing-masing chat"),a(`
  `),n("span",{class:"token comment"},"// (session tersendiri untuk setiap grup dan chat pribadi mereka)"),a(`
  `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("from "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token keyword"},"undefined"),a(),n("span",{class:"token operator"},"||"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("chat "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token keyword"},"undefined"),a(`
    `),n("span",{class:"token operator"},"?"),a(),n("span",{class:"token keyword"},"undefined"),a(`
    `),n("span",{class:"token operator"},":"),a(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("ctx"),n("span",{class:"token punctuation"},"."),a("from"),n("span",{class:"token punctuation"},"."),a("id"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"/"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token punctuation"},"."),a("id"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(" getSessionKey "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),J=i("<p>Setiap kali <code>get<wbr>Session<wbr>Key</code> mengembalikan <code>undefined</code>, <code>ctx<wbr>.session</code> akan menghasilkan <code>undefined</code> juga. Contohnya, session key resolver bawaan tidak akan bekerja untuk update <code>poll</code>/<code>poll<wbr>_answer</code> ataupun <code>inline<wbr>_query</code>, karena mereka bukan bagian dari sebuah chat (<code>ctx<wbr>.chat</code> menghasilkan <code>undefined</code>).</p>",1),z={class:"custom-container warning"},G=n("p",{class:"custom-container-title"},"Session Key dan Webhook",-1),U=n("p",null,[a("Ketika kamu menjalankan bot di webhook, sebaiknya kamu tidak menggunakan opsi "),n("code",null,[a("get"),n("wbr"),a("Session"),n("wbr"),a("Key")]),a(". Telegram mengirim webhook secara berurutan untuk setiap chat, oleh karena itu session key resolver bawaan adalah satu-satunya cara yang bisa menjamin untuk terhindar dari kehilangan data.")],-1),Y=a("Jika kamu terpaksa harus menggunakan opsi tersebut (yang mana masih bisa dilakukan), kamu harus paham betul dengan tindakan yang kamu lakukan. Pastikan memahami konsekuensi menggunakan konfigurasi ini dengan membaca "),R=a("materi berikut"),O=a(", khususnya "),$=a("yang ini"),E=a("."),V=i(`<h3 id="menyimpan-data" tabindex="-1"><a class="header-anchor" href="#menyimpan-data" aria-hidden="true">#</a> Menyimpan Data</h3><p>Semua data session dari contoh-contoh di atas disimpan di dalam RAM kamu, sehingga ketika bot kamu berhenti bekerja, semua data tersebut akan hilang. Ini adalah perilaku yang diharapkan ketika kamu mengembangkan sebuah bot ataupun melakukan berbagai pengetesan secara otomatis (database tidak diperlukan). Sebaliknya, <strong>perilaku ini kemungkinan besar tidak kita harapkan di tahap produksi</strong>. Pada tahap produksi, kamu kemungkinan besar ingin menyimpan data secara permanen, contohnya di sebuah file, database, ataupun tempat penyimpanan lainnya.</p><p>Kamu harus menggunakan opsi <code>storage</code> di middleware session supaya bisa terhubung ke database kamu. Kamu bisa menggunakan storage adapter yang disediakan oleh grammY (lihat <a href="#storage-adapter-yang-tersedia">di bawah</a>), jika tidak ada yang cocok, kamu hanya perlu menulis kurang lebih lima baris kode untuk mengimplementasikannya sendiri.</p><h2 id="storage-adapter-yang-tersedia" tabindex="-1"><a class="header-anchor" href="#storage-adapter-yang-tersedia" aria-hidden="true">#</a> Storage Adapter yang Tersedia</h2><p>Secara bawaan, session akan disimpan <a href="#ram-bawaan">di dalam memory kamu</a> oleh storage adapter built-in. Kamu juga bisa menggunakan session permanen yang grammy <a href="#storage-gratis">sediakan secara gratis</a>, ataupun melakukan koneksi ke <a href="#storage-eksternal">storage eksternal</a>.</p><p>Berikut cara memasang salah satu storage adapter yang tersedia di bawah:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> storageAdapter <span class="token operator">=</span> <span class="token operator">...</span> <span class="token comment">// tergantung dari jenis pemasangan</span>

bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  initial<span class="token operator">:</span> <span class="token operator">...</span>
  storage<span class="token operator">:</span> storageAdapter<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ram-bawaan" tabindex="-1"><a class="header-anchor" href="#ram-bawaan" aria-hidden="true">#</a> RAM (bawaan)</h3><p>Secara bawaan semua data disimpan di dalam RAM. Artinya, semua session akan terhapus di saat bot dihentikan.</p>`,9),H=a("Kamu bisa menggunakan class "),Q=n("code",null,[a("Memory"),n("wbr"),a("Session"),n("wbr"),a("Storage")],-1),W=a(" ("),X={href:"https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/MemorySessionStorage",target:"_blank",rel:"noopener noreferrer"},Z=a("Referensi API"),nn=a(") dari package inti grammY jika kamu ingin mengatur penyimpanan data di RAM."),an=i(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  initial<span class="token operator">:</span> <span class="token operator">...</span>
  storage<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">MemorySessionStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// serta value bawaannya</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="storage-gratis" tabindex="-1"><a class="header-anchor" href="#storage-gratis" aria-hidden="true">#</a> Storage Gratis</h3><blockquote><p>Storage gratis diperuntukkan untuk proyek kecil. Pengaplikasian skala-produksi harus menggunakan database mereka sendiri. Daftar pilihan integrasi storage eksternal yang didukung tersedia <a href="#storage-eksternal">di bawah sini</a>.</p></blockquote>`,3),sn=a("Keuntungan menggunakan grammY adalah kamu bisa mengakses cloud storage secara gratis. Ia tidak membutuhkan pengaturan sama sekali\u2014semua autentikasi dilakukan menggunakan token bot-mu. Lihat "),tn={href:"https://github.com/grammyjs/storages/tree/main/packages/free",target:"_blank",rel:"noopener noreferrer"},en=a("repositori berikut"),on=a("!"),cn=n("p",null,"Cara pemasangannya sangat mudah:",-1),pn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" freeStorage "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"@grammyjs/storage-free"'),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  initial`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token operator"},"..."),a(`
  storage`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"freeStorage"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),a("SessionData"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),a("bot"),n("span",{class:"token punctuation"},"."),a("token"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),un=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" freeStorage "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@grammyjs/storage-free"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  initial`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token operator"},"..."),a(`
  storage`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token function"},"freeStorage"),n("span",{class:"token punctuation"},"("),a("bot"),n("span",{class:"token punctuation"},"."),a("token"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),ln=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" freeStorage "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"https://deno.land/x/grammy_storages@v2.0.1/free/src/mod.ts"'),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  initial`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token operator"},"..."),a(`
  storage`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"freeStorage"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),a("SessionData"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),a("bot"),n("span",{class:"token punctuation"},"."),a("token"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),rn=n("p",null,"Selesai! Bot kamu sekarang sudah menggunakan data storage permanen.",-1),kn=n("p",null,"Berikut contoh utuh yang bisa kamu coba:",-1),dn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" Bot"),n("span",{class:"token punctuation"},","),a(" Context"),n("span",{class:"token punctuation"},","),a(" session"),n("span",{class:"token punctuation"},","),a(" SessionFlavor "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"grammy"'),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" freeStorage "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"@grammyjs/storage-free"'),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Tentukan struktur session-nya."),a(`
`),n("span",{class:"token keyword"},"interface"),a(),n("span",{class:"token class-name"},"SessionData"),a(),n("span",{class:"token punctuation"},"{"),a(`
  hitung`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"number"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"MyContext"),a(),n("span",{class:"token operator"},"="),a(" Context "),n("span",{class:"token operator"},"&"),a(" SessionFlavor"),n("span",{class:"token operator"},"<"),a("SessionData"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Buat bot lalu masukkan middleware session."),a(`
`),n("span",{class:"token keyword"},"const"),a(" bot "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},[a("Bot"),n("span",{class:"token operator"},"<"),a("MyContext"),n("span",{class:"token operator"},">")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(),n("span",{class:"token comment"},'// <-- Taruh token bot-mu diantara ""'),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token function-variable function"},"initial"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(" hitung"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"0"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
  storage`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"freeStorage"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),a("SessionData"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),a("bot"),n("span",{class:"token punctuation"},"."),a("token"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Gunakan data session permanen di handler update."),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"message"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  ctx`),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitung"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Jumlah pesan: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("ctx"),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitung"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"catch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),a("err"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),a("err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),mn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" Bot"),n("span",{class:"token punctuation"},","),a(" session "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"grammy"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" freeStorage "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@grammyjs/storage-free"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Buat bot lalu masukkan middleware session."),a(`
`),n("span",{class:"token keyword"},"const"),a(" bot "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"Bot"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(),n("span",{class:"token comment"},'// <-- Taruh token bot-mu diantara ""'),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token function-variable function"},"initial"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(" hitung"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"0"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
  storage`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token function"},"freeStorage"),n("span",{class:"token punctuation"},"("),a("bot"),n("span",{class:"token punctuation"},"."),a("token"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Gunakan data session permanen di handler update."),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"message"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  ctx`),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitung"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Jumlah pesan: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("ctx"),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitung"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"catch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),a("err"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),a("err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),bn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(`
  Bot`),n("span",{class:"token punctuation"},","),a(`
  Context`),n("span",{class:"token punctuation"},","),a(`
  session`),n("span",{class:"token punctuation"},","),a(`
  SessionFlavor`),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"https://deno.land/x/grammy@v1.11.1/mod.ts"'),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" freeStorage "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"https://deno.land/x/grammy_storages@v2.0.1/free/src/mod.ts"'),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Tentukan struktur session-nya."),a(`
`),n("span",{class:"token keyword"},"interface"),a(),n("span",{class:"token class-name"},"SessionData"),a(),n("span",{class:"token punctuation"},"{"),a(`
  hitung`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"number"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"MyContext"),a(),n("span",{class:"token operator"},"="),a(" Context "),n("span",{class:"token operator"},"&"),a(" SessionFlavor"),n("span",{class:"token operator"},"<"),a("SessionData"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Buat bot lalu masukkan middleware session."),a(`
`),n("span",{class:"token keyword"},"const"),a(" bot "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},[a("Bot"),n("span",{class:"token operator"},"<"),a("MyContext"),n("span",{class:"token operator"},">")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(),n("span",{class:"token comment"},'// <-- Taruh token bot-mu diantara ""'),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token function-variable function"},"initial"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(" hitung"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"0"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
  storage`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"freeStorage"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),a("SessionData"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),a("bot"),n("span",{class:"token punctuation"},"."),a("token"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Gunakan data session permanen di handler update."),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"message"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  ctx`),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitung"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Jumlah Pesan: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("ctx"),n("span",{class:"token punctuation"},"."),a("session"),n("span",{class:"token punctuation"},"."),a("hitung"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"catch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),a("err"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),a("err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),gn=n("h3",{id:"storage-eksternal",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#storage-eksternal","aria-hidden":"true"},"#"),a(" Storage Eksternal")],-1),hn=n("p",null,"Kami mengelola daftar storage adapter resmi yang bisa kamu gunakan untuk menyimpan data session di berbagai tempat. Masing-masing dari mereka mengharuskan kamu untuk mendaftar di sebuah penyedia layanan hosting, ataupun meng-hosting storage-mu sendiri.",-1),vn=a("Supabase: "),_n={href:"https://github.com/grammyjs/storages/tree/main/packages/supabase",target:"_blank",rel:"noopener noreferrer"},yn=a("https://"),wn=n("wbr",null,null,-1),fn=a("github"),xn=n("wbr",null,null,-1),Sn=a(".com"),jn=n("wbr",null,null,-1),Kn=a("/grammyjs"),Dn=n("wbr",null,null,-1),Bn=a("/storages"),Tn=n("wbr",null,null,-1),Pn=a("/tree"),qn=n("wbr",null,null,-1),Mn=a("/main"),An=n("wbr",null,null,-1),Cn=a("/packages"),Fn=n("wbr",null,null,-1),Ln=a("/supabase"),Nn=a("Deta.sh Base: "),In={href:"https://github.com/grammyjs/storages/tree/main/packages/deta",target:"_blank",rel:"noopener noreferrer"},Jn=a("https://"),zn=n("wbr",null,null,-1),Gn=a("github"),Un=n("wbr",null,null,-1),Yn=a(".com"),Rn=n("wbr",null,null,-1),On=a("/grammyjs"),$n=n("wbr",null,null,-1),En=a("/storages"),Vn=n("wbr",null,null,-1),Hn=a("/tree"),Qn=n("wbr",null,null,-1),Wn=a("/main"),Xn=n("wbr",null,null,-1),Zn=a("/packages"),na=n("wbr",null,null,-1),aa=a("/deta"),sa=a("Google Firestore (hanya untuk Node.js): "),ta={href:"https://github.com/grammyjs/storages/tree/main/packages/firestore",target:"_blank",rel:"noopener noreferrer"},ea=a("https://"),oa=n("wbr",null,null,-1),ia=a("github"),ca=n("wbr",null,null,-1),pa=a(".com"),ua=n("wbr",null,null,-1),la=a("/grammyjs"),ra=n("wbr",null,null,-1),ka=a("/storages"),da=n("wbr",null,null,-1),ma=a("/tree"),ba=n("wbr",null,null,-1),ga=a("/main"),ha=n("wbr",null,null,-1),va=a("/packages"),_a=n("wbr",null,null,-1),ya=a("/firestore"),wa=a("Files: "),fa={href:"https://github.com/grammyjs/storages/tree/main/packages/file",target:"_blank",rel:"noopener noreferrer"},xa=a("https://"),Sa=n("wbr",null,null,-1),ja=a("github"),Ka=n("wbr",null,null,-1),Da=a(".com"),Ba=n("wbr",null,null,-1),Ta=a("/grammyjs"),Pa=n("wbr",null,null,-1),qa=a("/storages"),Ma=n("wbr",null,null,-1),Aa=a("/tree"),Ca=n("wbr",null,null,-1),Fa=a("/main"),La=n("wbr",null,null,-1),Na=a("/packages"),Ia=n("wbr",null,null,-1),Ja=a("/file"),za=a("MongoDB: "),Ga={href:"https://github.com/grammyjs/storages/tree/main/packages/mongodb",target:"_blank",rel:"noopener noreferrer"},Ua=a("https://"),Ya=n("wbr",null,null,-1),Ra=a("github"),Oa=n("wbr",null,null,-1),$a=a(".com"),Ea=n("wbr",null,null,-1),Va=a("/grammyjs"),Ha=n("wbr",null,null,-1),Qa=a("/storages"),Wa=n("wbr",null,null,-1),Xa=a("/tree"),Za=n("wbr",null,null,-1),ns=a("/main"),as=n("wbr",null,null,-1),ss=a("/packages"),ts=n("wbr",null,null,-1),es=a("/mongodb"),os=a("Redis: "),is={href:"https://github.com/grammyjs/storages/tree/main/packages/redis",target:"_blank",rel:"noopener noreferrer"},cs=a("https://"),ps=n("wbr",null,null,-1),us=a("github"),ls=n("wbr",null,null,-1),rs=a(".com"),ks=n("wbr",null,null,-1),ds=a("/grammyjs"),ms=n("wbr",null,null,-1),bs=a("/storages"),gs=n("wbr",null,null,-1),hs=a("/tree"),vs=n("wbr",null,null,-1),_s=a("/main"),ys=n("wbr",null,null,-1),ws=a("/packages"),fs=n("wbr",null,null,-1),xs=a("/redis"),Ss=a("PostgreSQL: "),js={href:"https://github.com/grammyjs/storages/tree/main/packages/psql",target:"_blank",rel:"noopener noreferrer"},Ks=a("https://"),Ds=n("wbr",null,null,-1),Bs=a("github"),Ts=n("wbr",null,null,-1),Ps=a(".com"),qs=n("wbr",null,null,-1),Ms=a("/grammyjs"),As=n("wbr",null,null,-1),Cs=a("/storages"),Fs=n("wbr",null,null,-1),Ls=a("/tree"),Ns=n("wbr",null,null,-1),Is=a("/main"),Js=n("wbr",null,null,-1),zs=a("/packages"),Gs=n("wbr",null,null,-1),Us=a("/psql"),Ys=a("TypeORM (hanya untuk Node.js): "),Rs={href:"https://github.com/grammyjs/storages/tree/main/packages/typeorm",target:"_blank",rel:"noopener noreferrer"},Os=a("https://"),$s=n("wbr",null,null,-1),Es=a("github"),Vs=n("wbr",null,null,-1),Hs=a(".com"),Qs=n("wbr",null,null,-1),Ws=a("/grammyjs"),Xs=n("wbr",null,null,-1),Zs=a("/storages"),nt=n("wbr",null,null,-1),at=a("/tree"),st=n("wbr",null,null,-1),tt=a("/main"),et=n("wbr",null,null,-1),ot=a("/packages"),it=n("wbr",null,null,-1),ct=a("/typeorm"),pt=a("DenoDB (hanya untuk Deno): "),ut={href:"https://github.com/grammyjs/storages/tree/main/packages/denodb",target:"_blank",rel:"noopener noreferrer"},lt=a("https://"),rt=n("wbr",null,null,-1),kt=a("github"),dt=n("wbr",null,null,-1),mt=a(".com"),bt=n("wbr",null,null,-1),gt=a("/grammyjs"),ht=n("wbr",null,null,-1),vt=a("/storages"),_t=n("wbr",null,null,-1),yt=a("/tree"),wt=n("wbr",null,null,-1),ft=a("/main"),xt=n("wbr",null,null,-1),St=a("/packages"),jt=n("wbr",null,null,-1),Kt=a("/denodb"),Dt=a("Prisma (hanya untuk Node.js): "),Bt={href:"https://github.com/grammyjs/storages/tree/main/packages/prisma",target:"_blank",rel:"noopener noreferrer"},Tt=a("https://"),Pt=n("wbr",null,null,-1),qt=a("github"),Mt=n("wbr",null,null,-1),At=a(".com"),Ct=n("wbr",null,null,-1),Ft=a("/grammyjs"),Lt=n("wbr",null,null,-1),Nt=a("/storages"),It=n("wbr",null,null,-1),Jt=a("/tree"),zt=n("wbr",null,null,-1),Gt=a("/main"),Ut=n("wbr",null,null,-1),Yt=a("/packages"),Rt=n("wbr",null,null,-1),Ot=a("/prisma"),$t={class:"custom-container tip"},Et=n("p",{class:"custom-container-title"},"Storage pilihanmu belum didukung? Tidak masalah!",-1),Vt=a("Membuat storage adapter sendiri sangat mudah dilakukan. Opsi "),Ht=n("code",null,"storage",-1),Qt=a(" bekerja dengan berbagai object yang menganut "),Wt={href:"https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/StorageAdapter",target:"_blank",rel:"noopener noreferrer"},Xt=a("interface berikut"),Zt=a(", sehingga kamu bisa melakukan koneksi ke storage-mu hanya dengan beberapa baris kode."),ne=n("blockquote",null,[n("p",null,"Kalau kamu ingin mempublikasikan storage adapter buatanmu, silahkan ubah halaman ini dan sertakan juga link-nya agar orang-orang bisa menggunakannya.")],-1),ae=i('<p>Semua storage adapter bisa diinstal dengan cara yang sama. Pertama, kamu harus mencari tahu nama package adapter pilihanmu. Sebagai contoh, storage adapter Supabase memiliki nama package <code>supabase</code>.</p><p><strong>Di Node.js</strong>, kamu bisa menginstal adapter melalui <code>npm i @grammyjs<wbr>/storage<wbr>-&lt;nama<wbr>_adapter&gt;</code>. Misal, storage adapter Supabase bisa diinstal dengan cara <code>npm i @grammyjs<wbr>/storage<wbr>-supabase</code>.</p><p><strong>Di Deno</strong>, semua storage adapter dipublikasikan di module Deno yang sama. Kamu bisa meng-import adapter yang kamu butuhkan melalui <code>https://<wbr>deno<wbr>.land<wbr>/x<wbr>/grammy<wbr>_storages<wbr>/&lt;nama<wbr>_adapter&gt;<wbr>/src<wbr>/mod<wbr>.ts</code>. Misal, storage adapter Supabase bisa di-import melalui <code>https://<wbr>deno<wbr>.land<wbr>/x<wbr>/grammy<wbr>_storages<wbr>/supabase<wbr>/src<wbr>/mod<wbr>.ts</code>.</p><p>Lihat bagian pemasangan di repositori masing-masing untuk mengetahui cara menghubungkan adapter terkait ke storage pilihanmu.</p><p>Kamu juga bisa <a href="#peningkatan-storage">scroll ke bawah</a> untuk mempelajari bagaimana plugin session bisa meningkatkan storage adapter.</p><h2 id="multi-session" tabindex="-1"><a class="header-anchor" href="#multi-session" aria-hidden="true">#</a> Multi Session</h2><p>Plugin session mampu menyimpan beberapa fragmen data session di beberapa tempat. Cara kerjanya sama seperti kamu menginstal beberapa instance plugin session, tetapi untuk setiap instance-nya dipasang pengaturan yang berbeda.</p><p>Setiap fragmen data akan diberi nama sesuai dengan tempat di mana data tersebut disimpan. Dengan begitu, kamu bisa mengakses <code>ctx<wbr>.session<wbr>.foo</code> dan <code>ctx<wbr>.session<wbr>.bar</code>. Kedua nilai tersebut akan dimuat dari data storage yang berbeda-beda, lalu ditulis kembali ke data storage lainnya. Selain itu, kamu juga bisa menggunakan storage yang sama menggunakan konfigurasi yang berbeda.</p><p>Penggunaan <a href="#session-key">session key</a> yang berbeda untuk setiap fragmen data juga bisa dilakukan. Sehingga, kamu bisa menyimpan beberapa data untuk setiap chat dan beberapa data lain untuk setiap user.</p>',9),se=a("Kalau kamu menggunakan "),te=a("grammY runner"),ee=a(", jangan lupa untuk mengatur "),oe=n("code",null,"sequentialize",-1),ie=a(" secara tepat dengan cara mengembalikan "),ce=n("strong",null,"semua",-1),pe=a(" session key sebagai constraint dari function terkait."),ue=i(`<p>Kamu bisa menggunakan fitur ini dengan cara menambahkan <code>type:<wbr> &quot;multi&quot;</code> ke konfigurasi session. Setelah itu, kamu perlu mengatur konfigurasi untuk setiap fragmen.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">&quot;multi&quot;</span><span class="token punctuation">,</span>
  foo<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// value bawaan juga tersedia</span>
    storage<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">MemorySessionStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">initial</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getSessionKey</span><span class="token operator">:</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>from<span class="token operator">?.</span>id<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  bar<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">initial</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> prop<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    storage<span class="token operator">:</span> <span class="token function">freeStorage</span><span class="token punctuation">(</span>bot<span class="token punctuation">.</span>token<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  baz<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Perlu diingat bahwa kamu harus menambahkan sebuah konfigurasi untuk setiap entry yang ingin kamu gunakan. Kalau ingin menggunakan konfigurasi bawaanya, kamu bisa menambahkan sebuah object kosong (seperti yang kita lakukan pada <code>baz</code> di contoh atas).</p><p>Data session kamu nantinya tetap berisi sebuah object dengan beberapa property. Itulah kenapa context flavor kamu tidak akan berubah. Contoh di atas bisa menggunakan interface berikut ketika mengubah context object:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">SessionData</span> <span class="token punctuation">{</span>
  foo<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  bar<span class="token operator">:</span> <span class="token punctuation">{</span> prop<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  baz<span class="token operator">:</span> <span class="token punctuation">{</span> width<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> height<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Dengan begitu, kamu masih bisa menggunakan <code>Session<wbr>Flavor&lt;Session<wbr>Data&gt;</code> di context object-mu.</p><h2 id="lazy-session" tabindex="-1"><a class="header-anchor" href="#lazy-session" aria-hidden="true">#</a> Lazy Session</h2><blockquote><p>Bagian ini membahas optimisasi performa yang untuk sebagian besar orang bisa diabaikan. Silahkan lewati bagian ini jika dirasa tidak perlu.</p></blockquote><p>Lazy sessions adalah salah satu bentuk implementasi dari sebuah session yang berfungsi untuk mengurangi beban database bot kamu secara signifikan dengan cara mengurangi operasi baca dan tulis yang tidak diperlukan.</p><p>Anggaplah bot kamu berada di dalam sebuah chat grup dimana ia hanya merespon command, selain itu tidak akan direspon. Tanpa session, berikut yang akan terjadi:</p><ol><li>Update yang berisi pesan baru dikirimkan ke bot kamu.</li><li>Tidak ada handler yang dipanggil, sehingga tidak ada aksi yang perlu dilakukan.</li><li>Middleware selesai dijalankan begitu saja.</li></ol><p>Segera setelah kamu memasang session bawaan (strict), yang mana menyediakan data session di object context, berikut yang akan terjadi:</p><ol><li>Update yang berisi pesan baru dikirimkan ke bot kamu</li><li>Data session dimuat dari penyimpanan session (misal database)</li><li>Tidak ada handler yang dipanggil, sehingga tidak ada aksi yang perlu dilakukan</li><li>Data session yang sama ditulis kembali ke penyimpanan session</li><li>Middleware selesai dijalankan, dan telah melakukan operasi baca serta tulis ke data storage</li></ol><p>Perilaku tersebut tentu akan menghasilkan banyak operasi baca dan tulis yang tidak diperlukan. Lazy Session dapat mengabaikan langkah 2 dan 4 jika memang tidak ada handler yang membutuhkan data session. Dengan begitu, tidak ada data yang perlu dibaca maupun ditulis kembali ke data storage.</p><p>Ini bisa dilakukan dengan cara memotong akses <code>ctx<wbr>.session</code>. Jika tidak ada handler yang dipanggil, <code>ctx<wbr>.session</code> tidak akan diakses. Lazy session menggunakannya sebagai indikator untuk mencegah agar komunikasi ke database tidak dilakukan .</p><p>Dalam praktiknya, alih-alih memiliki data session di <code>ctx<wbr>.session</code>, kamu sekarang akan memiliki <em>sebuah data session dalam bentuk promise</em> yang tersedia di <code>ctx<wbr>.session</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// session bawaan (strict sessions)</span>
bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;settings&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \`session\` adalah data session-nya</span>
  <span class="token keyword">const</span> session <span class="token operator">=</span> ctx<span class="token punctuation">.</span>session<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Lazy session</span>
bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;settings&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \`promise\` adalah sebuah promise dari data session-nya, sedangkan</span>
  <span class="token keyword">const</span> promise <span class="token operator">=</span> ctx<span class="token punctuation">.</span>session<span class="token punctuation">;</span>
  <span class="token comment">// \`session\` adalah data session-nya</span>
  <span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span>session<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Jika kamu tidak mengakses <code>ctx<wbr>.session</code> sama sekali, tidak ada operasi yang dijalankan. Sebaliknya, di saat kamu mengakses property <code>session</code> di object context, maka operasi baca akan dijalankan. Ketika kamu tidak melakukan operasi baca sama sekali (atau menambahkan sebuah value baru langsung ke <code>ctx<wbr>.session</code>), maka kita tidak butuh melakukan operasi tulis, karena tidak ada data yang perlu diubah. Oleh karena itu, kita bisa mengabaikan operasi tulis juga. Hasilnya, kita bisa menghemat operasi baca dan tulis. Selain itu, kamu bisa menggunakan session hampir sama seperti sebelumnya, bedanya kamu cuma perlu menambahkan beberapa keyword <code>async</code> dan <code>await</code> di kodemu.</p><p>Jadi, apa yang harus diperhatikan saat menggunakan lazy session alih-alih session bawaan (strict)? Ada tiga hal yang harus kamu perhatikan:</p><ol><li>Gunakan flavor <code>Lazy<wbr>Session<wbr>Flavor</code> alih-alih <code>Session<wbr>Flavor</code> ke context-mu. Kedua flavor tersebut bekerja dengan cara yang sama. Bedanya untuk varian lazy, <code>ctx<wbr>.session</code> dibungkus oleh sebuah promise.</li><li>Gunakan <code>lazy<wbr>Session</code> alih-alih <code>session</code> ketika menambahkan middleware session-mu.</li><li>Selalu tambahkan sebuah inline <code>await ctx<wbr>.session</code> alih-alih <code>ctx<wbr>.session</code> di semua tempat middleware kamu, baik untuk operasi baca maupun tulis. Jangan khawatir, kamu bisa <code>await</code> promise data session-mu sebanyak yang kamu mau. Karena kamu akan selalu merujuk ke value yang sama, maka operasi baca cukup dilakukan sekali untuk satu update, meskipun kamu memanggil <code>await</code> berkali-kali.</li></ol><p>Perlu diketahui bahwa di lazy session, kamu bisa menambahkan baik object biasa maupun object dalam bentuk promise ke <code>ctx<wbr>.session</code>. Kalau kamu menambahkan <code>ctx<wbr>.session</code> sebagai sebuah promise, maka ia akan di-<code>await</code> sebelum data ditulis kembali ke data storage. Dengan begitu, kode berikut dapat dilakukan:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;reset&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Lebih singkat dibandingkan menggunakan \`await ctx.session\`:</span>
  ctx<span class="token punctuation">.</span>session <span class="token operator">=</span> ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    stats<span class="token punctuation">.</span>counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Meski beberapa orang berpendapat bahwa lebih disarankan untuk menggunakan <code>await</code> secara eksplisit ketika menambahkan sebuah promise ke <code>ctx<wbr>.session</code>, namun intinya adalah kamu tetap <em>bisa</em> melakukannya jika kamu lebih menyukai menulis kode dengan gaya penulisan tersebut.</p><div class="custom-container tip"><p class="custom-container-title">Plugin-Plugin yang Membutuhkan Session</p><p>Developer plugin yang memanfaatkan <code>ctx<wbr>.session</code> harus selalu memperbolehkan user untuk menambahkan <code>Session<wbr>Flavor | Lazy<wbr>Session<wbr>Flavor</code> dan juga mendukung kedua mode. Selalu await <code>ctx<wbr>.session</code> di kode plugin: di saat sebuah object non-promise ditambahkan, object tersebut akan dievaluasi ke dirinya sendiri, jadi kamu hanya perlu menulis kode untuk lazy session dan secara otomatis ia juga akan mendukung strict session.</p></div><h2 id="peningkatan-storage" tabindex="-1"><a class="header-anchor" href="#peningkatan-storage" aria-hidden="true">#</a> Peningkatan Storage</h2><p>Plugin session dapat meningkatkan kemampuan storage adapter dengan cara menambahkan beberapa fitur: <a href="#timeout">timeout</a> dan <a href="#migrasi">migrasi</a>.</p><p>Kedua fitur tersebut bisa diinstal dengan menggunakan function <code>enhance<wbr>Storage</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Buat sebuah storage adapter.</span>
<span class="token keyword">const</span> storage <span class="token operator">=</span> <span class="token function">freeStorage</span><span class="token punctuation">(</span>bot<span class="token punctuation">.</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// jangan lupa diatur</span>
<span class="token comment">// Tingkatkan kemampuan storage.</span>
<span class="token keyword">const</span> enhanced <span class="token operator">=</span> <span class="token function">enhanceStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  storage<span class="token punctuation">,</span>
  <span class="token comment">// tulis konfigurasinya di sini</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Gunakan storage adapter yang sudah ditingkatkan.</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span> storage<span class="token operator">:</span> enhanced <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Kamu juga bisa menggunakan kedua fitur secara bersamaan.</p><h3 id="timeout" tabindex="-1"><a class="header-anchor" href="#timeout" aria-hidden="true">#</a> Timeout</h3><p>Fitur timeout mampu menambahkan rentang waktu kedaluwarsa ke data session. Jika dalam kurun waktu tersebut session tidak mengalami perubahan, data untuk chat terkait akan dihapus.</p><p>Kamu bisa menggunakan session timeout melalui opsi <code>milliseconds<wbr>ToLive</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> enhanced <span class="token operator">=</span> <span class="token function">enhanceStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  storage<span class="token punctuation">,</span>
  millisecondsToLive<span class="token operator">:</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 30 menit</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Perlu dicatat bahwa proses penghapusan data hanya akan dilakukan saat data session terkait dibaca di sesi berikutnya.</p><h3 id="migrasi" tabindex="-1"><a class="header-anchor" href="#migrasi" aria-hidden="true">#</a> Migrasi</h3><p>Migrasi akan berguna di saat kamu sedang mengembangkan bot tetapi masih terdapat data session di dalamnya. Fitur ini bisa digunakan jika kamu ingin mengubah data session tanpa merusak data-data yang sudah ada.</p><p>Ini bisa dilakukan dengan cara memberi nomor versi ke data terkait, lalu menulis function migrasi sederhana. Function migrasi tersebut yang akan menentukan bagaimana session data di-upgrade dari satu versi ke versi yang lain.</p><p>Kita akan mengilustrasikannya dengan sebuah contoh. Anggaplah kamu menyimpan informasi daftar hewan peliharaan dari suatu user. Sejauh ini, kamu hanya menyimpan nama hewan peliharaanya saja dalam bentuk string array di <code>ctx<wbr>.session<wbr>.pet<wbr>Names</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">SessionData</span> <span class="token punctuation">{</span>
  petNames<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Sekarang, kamu berencana untuk menyimpan umurnya juga.</p><p>Untuk melakukannya, kamu bisa melakukan ini:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">SessionData</span> <span class="token punctuation">{</span>
  petNames<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  petBirthdays<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Cara seperti ini memang tidak akan merusak data yang sudah ada. Namun, ini bukan cara yang baik, karena nama dan tanggal lahirnya akan disimpan di tempat yang berbeda. Semestinya data session kamu terlihat seperti ini:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Pet</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  birthday<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">SessionData</span> <span class="token punctuation">{</span>
  pets<span class="token operator">:</span> Pet<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Function migrasi bisa kamu gunakan untuk mengubah string array yang lama menjadi array object pet yang baru.</p>`,45),le=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"addBirthdayToPets"),n("span",{class:"token punctuation"},"("),a("old"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(" petNames"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),a(" SessionData "),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"return"),a(),n("span",{class:"token punctuation"},"{"),a(`
    pets`),n("span",{class:"token operator"},":"),a(" old"),n("span",{class:"token punctuation"},"."),a("petNames"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),a("name"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(" name "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token keyword"},"const"),a(" enhanced "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"enhanceStorage"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  storage`),n("span",{class:"token punctuation"},","),a(`
  migrations`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token number"},"1"),n("span",{class:"token operator"},":"),a(" addBirthdayToPets"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),re=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"addBirthdayToPets"),n("span",{class:"token punctuation"},"("),a("old"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"return"),a(),n("span",{class:"token punctuation"},"{"),a(`
    pets`),n("span",{class:"token operator"},":"),a(" old"),n("span",{class:"token punctuation"},"."),a("petNames"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),a("name"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(" name "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token keyword"},"const"),a(" enhanced "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"enhanceStorage"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
  storage`),n("span",{class:"token punctuation"},","),a(`
  migrations`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token number"},"1"),n("span",{class:"token operator"},":"),a(" addBirthdayToPets"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),ke=i(`<p>Setiap kali data session dibaca, fitur peningkatan storage akan mengecek apakah data session tersebut sudah berada di versi <code>1</code>. Jika versinya di bawah itu (atau bahkan tidak ditemukan karena kamu sebelumnya tidak menggunakan fitur ini), maka function migrasi akan dijalankan. Proses ini akan meningkatkan versi datanya menjadi <code>1</code>. Oleh karena itu, kamu bisa dengan yakin mengasumsikan bahwa data session tersebut memiliki struktur yang paling baru, dan peningkatan storage terkait akan mengurus sisanya serta memigrasi data tersebut jika memang diperlukan.</p><p>Kamu bisa menambah beberapa function migrasi lain seiring dengan berkembangnya bot kamu:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> enhanced <span class="token operator">=</span> <span class="token function">enhanceStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  storage<span class="token punctuation">,</span>
  migrations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token number">1</span><span class="token operator">:</span> addBirthdayToPets<span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token operator">:</span> addIsFavoriteFlagToPets<span class="token punctuation">,</span>
    <span class="token number">3</span><span class="token operator">:</span> addUserSettings<span class="token punctuation">,</span>
    <span class="token number">10</span><span class="token operator">:</span> extendUserSettings<span class="token punctuation">,</span>
    <span class="token number">10.1</span><span class="token operator">:</span> fixUserSettings<span class="token punctuation">,</span>
    <span class="token number">11</span><span class="token operator">:</span> compressData<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Kamu bisa memilih berbagai macam penomoran sebagai versinya, selama ia berupa JavaScript number. Tidak peduli seberapa besar data session sebuah chat telah berubah, segera setelah ia dibaca, ia akan dimigrasikan ke versi yang telah ditentukan hingga ia menggunakan struktur yang terbaru.</p><h2 id="ringkasan-plugin" tabindex="-1"><a class="header-anchor" href="#ringkasan-plugin" aria-hidden="true">#</a> Ringkasan Plugin</h2><p>Plugin ini tersedia secara built-in di dalam package inti grammy. Kamu tidak perlu memasang package tambahan untuk menggunakannya. Cukup import yang kamu butuhkan langsung dari grammY.</p><p>Selain itu, baik referensi API maupun dokumentasinya telah dijadikan satu dengan package inti.</p>`,7);function de(me,be){const e=u("ExternalLinkIcon"),o=u("CodeGroupItem"),c=u("CodeGroup"),p=u("RouterLink");return r(),k("div",null,[m,n("p",null,[b,n("a",g,[h,s(e)]),v]),_,s(c,null,{default:t(()=>[s(o,{title:"TypeScript",active:""},{default:t(()=>[y]),_:1}),s(o,{title:"JavaScript"},{default:t(()=>[w]),_:1}),s(o,{title:"Deno"},{default:t(()=>[f]),_:1})]),_:1}),n("p",null,[x,s(p,{to:"/id/guide/context.html#memodifikasi-object-context"},{default:t(()=>[S]),_:1}),j,K,D]),B,n("p",null,[T,P,q,n("a",M,[A,s(e)]),C,F,L]),s(c,null,{default:t(()=>[s(o,{title:"TypeScript",active:""},{default:t(()=>[N]),_:1}),s(o,{title:"JavaScript"},{default:t(()=>[I]),_:1})]),_:1}),J,n("div",z,[G,U,n("p",null,[Y,s(p,{to:"/id/guide/deployment-types.html"},{default:t(()=>[R]),_:1}),O,s(p,{to:"/id/plugins/runner.html#pemrosesan-secara-berurutan-jika-diperlukan"},{default:t(()=>[$]),_:1}),E])]),V,n("p",null,[H,Q,W,n("a",X,[Z,s(e)]),nn]),an,n("p",null,[sn,n("a",tn,[en,s(e)]),on]),cn,s(c,null,{default:t(()=>[s(o,{title:"TypeScript",active:""},{default:t(()=>[pn]),_:1}),s(o,{title:"JavaScript"},{default:t(()=>[un]),_:1}),s(o,{title:"Deno"},{default:t(()=>[ln]),_:1})]),_:1}),rn,kn,s(c,null,{default:t(()=>[s(o,{title:"TypeScript",active:""},{default:t(()=>[dn]),_:1}),s(o,{title:"JavaScript"},{default:t(()=>[mn]),_:1}),s(o,{title:"Deno"},{default:t(()=>[bn]),_:1})]),_:1}),gn,hn,n("ul",null,[n("li",null,[vn,n("a",_n,[yn,wn,fn,xn,Sn,jn,Kn,Dn,Bn,Tn,Pn,qn,Mn,An,Cn,Fn,Ln,s(e)])]),n("li",null,[Nn,n("a",In,[Jn,zn,Gn,Un,Yn,Rn,On,$n,En,Vn,Hn,Qn,Wn,Xn,Zn,na,aa,s(e)])]),n("li",null,[sa,n("a",ta,[ea,oa,ia,ca,pa,ua,la,ra,ka,da,ma,ba,ga,ha,va,_a,ya,s(e)])]),n("li",null,[wa,n("a",fa,[xa,Sa,ja,Ka,Da,Ba,Ta,Pa,qa,Ma,Aa,Ca,Fa,La,Na,Ia,Ja,s(e)])]),n("li",null,[za,n("a",Ga,[Ua,Ya,Ra,Oa,$a,Ea,Va,Ha,Qa,Wa,Xa,Za,ns,as,ss,ts,es,s(e)])]),n("li",null,[os,n("a",is,[cs,ps,us,ls,rs,ks,ds,ms,bs,gs,hs,vs,_s,ys,ws,fs,xs,s(e)])]),n("li",null,[Ss,n("a",js,[Ks,Ds,Bs,Ts,Ps,qs,Ms,As,Cs,Fs,Ls,Ns,Is,Js,zs,Gs,Us,s(e)])]),n("li",null,[Ys,n("a",Rs,[Os,$s,Es,Vs,Hs,Qs,Ws,Xs,Zs,nt,at,st,tt,et,ot,it,ct,s(e)])]),n("li",null,[pt,n("a",ut,[lt,rt,kt,dt,mt,bt,gt,ht,vt,_t,yt,wt,ft,xt,St,jt,Kt,s(e)])]),n("li",null,[Dt,n("a",Bt,[Tt,Pt,qt,Mt,At,Ct,Ft,Lt,Nt,It,Jt,zt,Gt,Ut,Yt,Rt,Ot,s(e)])])]),n("div",$t,[Et,n("p",null,[Vt,Ht,Qt,n("a",Wt,[Xt,s(e)]),Zt]),ne]),ae,n("blockquote",null,[n("p",null,[se,s(p,{to:"/id/plugins/runner.html"},{default:t(()=>[te]),_:1}),ee,oe,ie,ce,pe])]),ue,s(c,null,{default:t(()=>[s(o,{title:"TypeScript",active:""},{default:t(()=>[le]),_:1}),s(o,{title:"JavaScript"},{default:t(()=>[re]),_:1})]),_:1}),ke])}const he=l(d,[["render",de],["__file","session.html.vue"]]);export{he as default};
