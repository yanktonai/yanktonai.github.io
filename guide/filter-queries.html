<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Filter Queries and bot.on() | grammY</title><meta name="description" content="The Telegram Bot Framework.">
    <link rel="modulepreload" href="/assets/app.1137d7ac.js"><link rel="modulepreload" href="/assets/filter-queries.html.574e3799.js"><link rel="modulepreload" href="/assets/filter-query-search.b06c500c.js"><link rel="modulepreload" href="/assets/filter-queries.html.ff3c15e1.js"><link rel="prefetch" href="/assets/index.html.0429b483.js"><link rel="prefetch" href="/assets/index.html.2401d292.js"><link rel="prefetch" href="/assets/deployment.html.820945fa.js"><link rel="prefetch" href="/assets/flood.html.064205fe.js"><link rel="prefetch" href="/assets/middleware.html.992dcb0e.js"><link rel="prefetch" href="/assets/proxy.html.c404e72a.js"><link rel="prefetch" href="/assets/reliability.html.5a572dfa.js"><link rel="prefetch" href="/assets/scaling.html.fe634161.js"><link rel="prefetch" href="/assets/structuring.html.1e8ebd48.js"><link rel="prefetch" href="/assets/transformers.html.3e1cae77.js"><link rel="prefetch" href="/assets/index.html.fb39b504.js"><link rel="prefetch" href="/assets/examples.html.4b7b6125.js"><link rel="prefetch" href="/assets/index.html.e45b3ea7.js"><link rel="prefetch" href="/assets/index.html.172886ab.js"><link rel="prefetch" href="/assets/api.html.d34afc0f.js"><link rel="prefetch" href="/assets/basics.html.65923044.js"><link rel="prefetch" href="/assets/commands.html.c2610c77.js"><link rel="prefetch" href="/assets/context.html.d7289dc7.js"><link rel="prefetch" href="/assets/deployment-types.html.346b4d4f.js"><link rel="prefetch" href="/assets/errors.html.d567f2e9.js"><link rel="prefetch" href="/assets/files.html.5df1fdf3.js"><link rel="prefetch" href="/assets/games.html.ebb92d65.js"><link rel="prefetch" href="/assets/getting-started.html.3aad9f5a.js"><link rel="prefetch" href="/assets/inline-queries.html.9fa5435e.js"><link rel="prefetch" href="/assets/introduction.html.d062e0ed.js"><link rel="prefetch" href="/assets/middleware.html.c32c1afb.js"><link rel="prefetch" href="/assets/comparison.html.864b515f.js"><link rel="prefetch" href="/assets/deno-deploy.html.33fda6ac.js"><link rel="prefetch" href="/assets/gcf.html.94978e12.js"><link rel="prefetch" href="/assets/heroku.html.f4861855.js"><link rel="prefetch" href="/assets/supabase.html.f931ecc3.js"><link rel="prefetch" href="/assets/vps.html.f8b61457.js"><link rel="prefetch" href="/assets/index.html.564f39e8.js"><link rel="prefetch" href="/assets/index.html.cc711d93.js"><link rel="prefetch" href="/assets/auto-retry.html.76b5ce1b.js"><link rel="prefetch" href="/assets/autoquote.html.f8611f7b.js"><link rel="prefetch" href="/assets/command-filter.html.12deb6e8.js"><link rel="prefetch" href="/assets/console-time.html.bbb18311.js"><link rel="prefetch" href="/assets/conversations.html.542d4ede.js"><link rel="prefetch" href="/assets/emoji.html.96b685bd.js"><link rel="prefetch" href="/assets/files.html.59f0953c.js"><link rel="prefetch" href="/assets/fluent.html.93e75a53.js"><link rel="prefetch" href="/assets/guide.html.4a675f4a.js"><link rel="prefetch" href="/assets/hydrate.html.4d6c9f6e.js"><link rel="prefetch" href="/assets/i18n.html.b886c9b6.js"><link rel="prefetch" href="/assets/keyboard.html.5d3ef392.js"><link rel="prefetch" href="/assets/menu.html.97fd78f5.js"><link rel="prefetch" href="/assets/middlewares.html.4527fc91.js"><link rel="prefetch" href="/assets/parse-mode.html.5fea1fba.js"><link rel="prefetch" href="/assets/ratelimiter.html.09dbf6ad.js"><link rel="prefetch" href="/assets/router.html.02606ebd.js"><link rel="prefetch" href="/assets/runner.html.fb3b00e6.js"><link rel="prefetch" href="/assets/session.html.a3ebd553.js"><link rel="prefetch" href="/assets/stateless-question.html.acdd39e3.js"><link rel="prefetch" href="/assets/transformer-throttler.html.009b0e9c.js"><link rel="prefetch" href="/assets/about.html.e9ce3575.js"><link rel="prefetch" href="/assets/comparison.html.5589e0a7.js"><link rel="prefetch" href="/assets/faq.html.4a46d2bc.js"><link rel="prefetch" href="/assets/index.html.8d516f91.js"><link rel="prefetch" href="/assets/index.html.0ea21131.js"><link rel="prefetch" href="/assets/deployment.html.947cfd03.js"><link rel="prefetch" href="/assets/flood.html.adb704f3.js"><link rel="prefetch" href="/assets/middleware.html.62700685.js"><link rel="prefetch" href="/assets/proxy.html.d9e32858.js"><link rel="prefetch" href="/assets/reliability.html.214116d2.js"><link rel="prefetch" href="/assets/scaling.html.17ebd1a5.js"><link rel="prefetch" href="/assets/structuring.html.b2cc831f.js"><link rel="prefetch" href="/assets/transformers.html.0d715264.js"><link rel="prefetch" href="/assets/index.html.655275db.js"><link rel="prefetch" href="/assets/examples.html.4da510e2.js"><link rel="prefetch" href="/assets/index.html.b68e7c4e.js"><link rel="prefetch" href="/assets/api.html.864221a5.js"><link rel="prefetch" href="/assets/basics.html.d83b67aa.js"><link rel="prefetch" href="/assets/commands.html.0c654628.js"><link rel="prefetch" href="/assets/context.html.684cfc10.js"><link rel="prefetch" href="/assets/deployment-types.html.66bb2eb6.js"><link rel="prefetch" href="/assets/errors.html.3bd197a1.js"><link rel="prefetch" href="/assets/files.html.b3f5719d.js"><link rel="prefetch" href="/assets/filter-queries.html.2fc848b9.js"><link rel="prefetch" href="/assets/games.html.ed2eeb11.js"><link rel="prefetch" href="/assets/getting-started.html.bee7700c.js"><link rel="prefetch" href="/assets/inline-queries.html.3dd234a2.js"><link rel="prefetch" href="/assets/introduction.html.2c38a111.js"><link rel="prefetch" href="/assets/middleware.html.956472a4.js"><link rel="prefetch" href="/assets/comparison.html.62a530ba.js"><link rel="prefetch" href="/assets/deno-deploy.html.9ad88492.js"><link rel="prefetch" href="/assets/gcf.html.dbb08649.js"><link rel="prefetch" href="/assets/heroku.html.1a7f1f38.js"><link rel="prefetch" href="/assets/supabase.html.4ce4dd3e.js"><link rel="prefetch" href="/assets/vps.html.7964c3ff.js"><link rel="prefetch" href="/assets/index.html.d277051d.js"><link rel="prefetch" href="/assets/auto-retry.html.627c099e.js"><link rel="prefetch" href="/assets/autoquote.html.931147c8.js"><link rel="prefetch" href="/assets/command-filter.html.24250ac2.js"><link rel="prefetch" href="/assets/console-time.html.c602475c.js"><link rel="prefetch" href="/assets/conversations.html.34bdf713.js"><link rel="prefetch" href="/assets/emoji.html.4340fe04.js"><link rel="prefetch" href="/assets/files.html.0ce1beed.js"><link rel="prefetch" href="/assets/fluent.html.2312cffa.js"><link rel="prefetch" href="/assets/guide.html.cdc01534.js"><link rel="prefetch" href="/assets/hydrate.html.e78bac27.js"><link rel="prefetch" href="/assets/i18n.html.7a67a704.js"><link rel="prefetch" href="/assets/keyboard.html.6c1187da.js"><link rel="prefetch" href="/assets/menu.html.2390f9b0.js"><link rel="prefetch" href="/assets/middlewares.html.8fb2b4c6.js"><link rel="prefetch" href="/assets/parse-mode.html.6084b065.js"><link rel="prefetch" href="/assets/ratelimiter.html.e9ab9086.js"><link rel="prefetch" href="/assets/router.html.49ad6cc8.js"><link rel="prefetch" href="/assets/runner.html.2e392816.js"><link rel="prefetch" href="/assets/session.html.bc00753b.js"><link rel="prefetch" href="/assets/stateless-question.html.840ef874.js"><link rel="prefetch" href="/assets/transformer-throttler.html.a0519c22.js"><link rel="prefetch" href="/assets/about.html.6acc59e5.js"><link rel="prefetch" href="/assets/comparison.html.19d2b82f.js"><link rel="prefetch" href="/assets/faq.html.525026ef.js"><link rel="prefetch" href="/assets/index.html.c671af3a.js"><link rel="prefetch" href="/assets/deployment.html.890ba700.js"><link rel="prefetch" href="/assets/flood.html.99fc87f0.js"><link rel="prefetch" href="/assets/middleware.html.93e739dc.js"><link rel="prefetch" href="/assets/proxy.html.a206407d.js"><link rel="prefetch" href="/assets/reliability.html.77f11b74.js"><link rel="prefetch" href="/assets/scaling.html.b0186def.js"><link rel="prefetch" href="/assets/structuring.html.431bf13f.js"><link rel="prefetch" href="/assets/transformers.html.76eb6336.js"><link rel="prefetch" href="/assets/index.html.629ca643.js"><link rel="prefetch" href="/assets/examples.html.cea54aec.js"><link rel="prefetch" href="/assets/index.html.374cf0b5.js"><link rel="prefetch" href="/assets/api.html.a789ac69.js"><link rel="prefetch" href="/assets/basics.html.a5f54cb2.js"><link rel="prefetch" href="/assets/commands.html.f5bc337a.js"><link rel="prefetch" href="/assets/context.html.e94c9f2e.js"><link rel="prefetch" href="/assets/deployment-types.html.d3d220f8.js"><link rel="prefetch" href="/assets/errors.html.cb531b7a.js"><link rel="prefetch" href="/assets/files.html.1cbd9c21.js"><link rel="prefetch" href="/assets/filter-queries.html.18865e77.js"><link rel="prefetch" href="/assets/games.html.019dc6f4.js"><link rel="prefetch" href="/assets/getting-started.html.cdb13cc0.js"><link rel="prefetch" href="/assets/inline-queries.html.02267dd2.js"><link rel="prefetch" href="/assets/introduction.html.e8487eb7.js"><link rel="prefetch" href="/assets/middleware.html.beeb4db0.js"><link rel="prefetch" href="/assets/comparison.html.ece5207a.js"><link rel="prefetch" href="/assets/deno-deploy.html.8cd18a25.js"><link rel="prefetch" href="/assets/gcf.html.bf1ad988.js"><link rel="prefetch" href="/assets/heroku.html.200ca6ee.js"><link rel="prefetch" href="/assets/supabase.html.aca1ac1d.js"><link rel="prefetch" href="/assets/vps.html.40de5172.js"><link rel="prefetch" href="/assets/index.html.567ecd8c.js"><link rel="prefetch" href="/assets/auto-retry.html.be745936.js"><link rel="prefetch" href="/assets/autoquote.html.5c46e2d3.js"><link rel="prefetch" href="/assets/command-filter.html.fa1f4413.js"><link rel="prefetch" href="/assets/console-time.html.0d2bc762.js"><link rel="prefetch" href="/assets/conversations.html.778561d7.js"><link rel="prefetch" href="/assets/emoji.html.601be2b6.js"><link rel="prefetch" href="/assets/files.html.13f0053f.js"><link rel="prefetch" href="/assets/fluent.html.47d160d5.js"><link rel="prefetch" href="/assets/guide.html.381a5a51.js"><link rel="prefetch" href="/assets/hydrate.html.426ed716.js"><link rel="prefetch" href="/assets/i18n.html.afb30866.js"><link rel="prefetch" href="/assets/keyboard.html.19037e93.js"><link rel="prefetch" href="/assets/menu.html.e70d11ec.js"><link rel="prefetch" href="/assets/middlewares.html.5bc684e5.js"><link rel="prefetch" href="/assets/parse-mode.html.0e2027aa.js"><link rel="prefetch" href="/assets/ratelimiter.html.f1aaea8c.js"><link rel="prefetch" href="/assets/router.html.1476dda9.js"><link rel="prefetch" href="/assets/runner.html.ce50a49c.js"><link rel="prefetch" href="/assets/session.html.fe8e3213.js"><link rel="prefetch" href="/assets/stateless-question.html.b8a43883.js"><link rel="prefetch" href="/assets/transformer-throttler.html.45a66fc5.js"><link rel="prefetch" href="/assets/about.html.4abcfa07.js"><link rel="prefetch" href="/assets/comparison.html.8ed17bd9.js"><link rel="prefetch" href="/assets/faq.html.0dd6c2c4.js"><link rel="prefetch" href="/assets/index.html.45898178.js"><link rel="prefetch" href="/assets/deployment.html.75afc00d.js"><link rel="prefetch" href="/assets/flood.html.71e88b3b.js"><link rel="prefetch" href="/assets/middleware.html.afa5db3b.js"><link rel="prefetch" href="/assets/proxy.html.b70254e4.js"><link rel="prefetch" href="/assets/reliability.html.2858f460.js"><link rel="prefetch" href="/assets/scaling.html.ae951df2.js"><link rel="prefetch" href="/assets/structuring.html.d2ff17dd.js"><link rel="prefetch" href="/assets/transformers.html.6f5b57b6.js"><link rel="prefetch" href="/assets/index.html.74522b16.js"><link rel="prefetch" href="/assets/examples.html.24e682eb.js"><link rel="prefetch" href="/assets/index.html.9de295a7.js"><link rel="prefetch" href="/assets/api.html.8ed7866f.js"><link rel="prefetch" href="/assets/basics.html.7afbeb28.js"><link rel="prefetch" href="/assets/commands.html.131d044b.js"><link rel="prefetch" href="/assets/context.html.f1f04579.js"><link rel="prefetch" href="/assets/deployment-types.html.6efb3c25.js"><link rel="prefetch" href="/assets/errors.html.0c95dbb6.js"><link rel="prefetch" href="/assets/files.html.c53a8155.js"><link rel="prefetch" href="/assets/filter-queries.html.dab2ea34.js"><link rel="prefetch" href="/assets/games.html.60a32e8c.js"><link rel="prefetch" href="/assets/getting-started.html.7d3308dc.js"><link rel="prefetch" href="/assets/inline-queries.html.c644e6f2.js"><link rel="prefetch" href="/assets/introduction.html.2b2e7021.js"><link rel="prefetch" href="/assets/middleware.html.8e8a095a.js"><link rel="prefetch" href="/assets/comparison.html.65d3d0d9.js"><link rel="prefetch" href="/assets/deno-deploy.html.b3d0c42c.js"><link rel="prefetch" href="/assets/gcf.html.8a35f9f5.js"><link rel="prefetch" href="/assets/heroku.html.8ba42f90.js"><link rel="prefetch" href="/assets/supabase.html.ee2b455f.js"><link rel="prefetch" href="/assets/vps.html.6fe75bcb.js"><link rel="prefetch" href="/assets/index.html.f9a366b7.js"><link rel="prefetch" href="/assets/auto-retry.html.e870a1fc.js"><link rel="prefetch" href="/assets/autoquote.html.afc82797.js"><link rel="prefetch" href="/assets/command-filter.html.d5692cab.js"><link rel="prefetch" href="/assets/console-time.html.a509e6b6.js"><link rel="prefetch" href="/assets/conversations.html.c2a1214f.js"><link rel="prefetch" href="/assets/emoji.html.346d49b0.js"><link rel="prefetch" href="/assets/files.html.97985794.js"><link rel="prefetch" href="/assets/fluent.html.497a7165.js"><link rel="prefetch" href="/assets/guide.html.6086fd79.js"><link rel="prefetch" href="/assets/hydrate.html.f3bc28bb.js"><link rel="prefetch" href="/assets/i18n.html.42762cf9.js"><link rel="prefetch" href="/assets/keyboard.html.9ccac385.js"><link rel="prefetch" href="/assets/menu.html.05b22f9d.js"><link rel="prefetch" href="/assets/middlewares.html.b0d76949.js"><link rel="prefetch" href="/assets/parse-mode.html.377b539d.js"><link rel="prefetch" href="/assets/ratelimiter.html.f7e73ee7.js"><link rel="prefetch" href="/assets/router.html.401950f2.js"><link rel="prefetch" href="/assets/runner.html.da15a490.js"><link rel="prefetch" href="/assets/session.html.79028198.js"><link rel="prefetch" href="/assets/stateless-question.html.e542bb65.js"><link rel="prefetch" href="/assets/transformer-throttler.html.7d448db6.js"><link rel="prefetch" href="/assets/about.html.41287b90.js"><link rel="prefetch" href="/assets/comparison.html.162bdf02.js"><link rel="prefetch" href="/assets/faq.html.abba6af1.js"><link rel="prefetch" href="/assets/404.html.d2dc3323.js"><link rel="prefetch" href="/assets/index.html.29590123.js"><link rel="prefetch" href="/assets/index.html.652d18cd.js"><link rel="prefetch" href="/assets/deployment.html.2e1f77c0.js"><link rel="prefetch" href="/assets/flood.html.0d45009d.js"><link rel="prefetch" href="/assets/middleware.html.4942f865.js"><link rel="prefetch" href="/assets/proxy.html.b8f694a8.js"><link rel="prefetch" href="/assets/reliability.html.6adf9e05.js"><link rel="prefetch" href="/assets/scaling.html.b56718d2.js"><link rel="prefetch" href="/assets/structuring.html.55b86ee8.js"><link rel="prefetch" href="/assets/transformers.html.0adbf644.js"><link rel="prefetch" href="/assets/index.html.39859492.js"><link rel="prefetch" href="/assets/examples.html.2ee80222.js"><link rel="prefetch" href="/assets/index.html.39c7767a.js"><link rel="prefetch" href="/assets/index.html.771e1851.js"><link rel="prefetch" href="/assets/api.html.2d0fd3ef.js"><link rel="prefetch" href="/assets/basics.html.4c080eb1.js"><link rel="prefetch" href="/assets/commands.html.873ece00.js"><link rel="prefetch" href="/assets/context.html.6e241c6a.js"><link rel="prefetch" href="/assets/deployment-types.html.98b37ce0.js"><link rel="prefetch" href="/assets/errors.html.da126a69.js"><link rel="prefetch" href="/assets/files.html.77f811b3.js"><link rel="prefetch" href="/assets/games.html.ec1a7eb0.js"><link rel="prefetch" href="/assets/getting-started.html.b8c39909.js"><link rel="prefetch" href="/assets/inline-queries.html.e25c8fb8.js"><link rel="prefetch" href="/assets/introduction.html.e95bfde9.js"><link rel="prefetch" href="/assets/middleware.html.3f2d10e5.js"><link rel="prefetch" href="/assets/comparison.html.adc097e0.js"><link rel="prefetch" href="/assets/deno-deploy.html.c15ff63a.js"><link rel="prefetch" href="/assets/gcf.html.105817b4.js"><link rel="prefetch" href="/assets/heroku.html.219c9c1a.js"><link rel="prefetch" href="/assets/supabase.html.ec986806.js"><link rel="prefetch" href="/assets/vps.html.2d95007e.js"><link rel="prefetch" href="/assets/index.html.0e54f5f0.js"><link rel="prefetch" href="/assets/index.html.972210b7.js"><link rel="prefetch" href="/assets/auto-retry.html.5804a01e.js"><link rel="prefetch" href="/assets/autoquote.html.7b5e11ff.js"><link rel="prefetch" href="/assets/command-filter.html.6bd1f60a.js"><link rel="prefetch" href="/assets/console-time.html.7b70cc62.js"><link rel="prefetch" href="/assets/conversations.html.a700b9fe.js"><link rel="prefetch" href="/assets/emoji.html.c1c0be48.js"><link rel="prefetch" href="/assets/files.html.8946fc53.js"><link rel="prefetch" href="/assets/fluent.html.473cb455.js"><link rel="prefetch" href="/assets/guide.html.519c3bed.js"><link rel="prefetch" href="/assets/hydrate.html.bd01caa2.js"><link rel="prefetch" href="/assets/i18n.html.d76a04f4.js"><link rel="prefetch" href="/assets/keyboard.html.3c9b43b4.js"><link rel="prefetch" href="/assets/menu.html.d8675082.js"><link rel="prefetch" href="/assets/middlewares.html.50e2cb87.js"><link rel="prefetch" href="/assets/parse-mode.html.ed4adc2a.js"><link rel="prefetch" href="/assets/ratelimiter.html.048117a6.js"><link rel="prefetch" href="/assets/router.html.f4d3ff7a.js"><link rel="prefetch" href="/assets/runner.html.654b96cc.js"><link rel="prefetch" href="/assets/session.html.f48dc1e3.js"><link rel="prefetch" href="/assets/stateless-question.html.8603d500.js"><link rel="prefetch" href="/assets/transformer-throttler.html.01d77894.js"><link rel="prefetch" href="/assets/about.html.bb69bfed.js"><link rel="prefetch" href="/assets/comparison.html.0d703add.js"><link rel="prefetch" href="/assets/faq.html.50e9d122.js"><link rel="prefetch" href="/assets/index.html.acb67c06.js"><link rel="prefetch" href="/assets/index.html.e55223e6.js"><link rel="prefetch" href="/assets/deployment.html.587d5836.js"><link rel="prefetch" href="/assets/flood.html.a9044b9c.js"><link rel="prefetch" href="/assets/middleware.html.1b5aaeec.js"><link rel="prefetch" href="/assets/proxy.html.320f20cc.js"><link rel="prefetch" href="/assets/reliability.html.2191cf98.js"><link rel="prefetch" href="/assets/scaling.html.0a5bd1ef.js"><link rel="prefetch" href="/assets/structuring.html.f8ca9fec.js"><link rel="prefetch" href="/assets/transformers.html.26498cef.js"><link rel="prefetch" href="/assets/index.html.f3e44dcb.js"><link rel="prefetch" href="/assets/examples.html.cf6264cb.js"><link rel="prefetch" href="/assets/index.html.df0a5301.js"><link rel="prefetch" href="/assets/api.html.1d0aebcf.js"><link rel="prefetch" href="/assets/basics.html.6d92f395.js"><link rel="prefetch" href="/assets/commands.html.285c53d4.js"><link rel="prefetch" href="/assets/context.html.95e77182.js"><link rel="prefetch" href="/assets/deployment-types.html.0f6c56a5.js"><link rel="prefetch" href="/assets/errors.html.1b60913f.js"><link rel="prefetch" href="/assets/files.html.5b2e00f5.js"><link rel="prefetch" href="/assets/filter-queries.html.458618ae.js"><link rel="prefetch" href="/assets/games.html.4feab430.js"><link rel="prefetch" href="/assets/getting-started.html.967a536f.js"><link rel="prefetch" href="/assets/inline-queries.html.c526b05a.js"><link rel="prefetch" href="/assets/introduction.html.0acf2b85.js"><link rel="prefetch" href="/assets/middleware.html.5f65b7ba.js"><link rel="prefetch" href="/assets/comparison.html.e5b843e3.js"><link rel="prefetch" href="/assets/deno-deploy.html.524c43eb.js"><link rel="prefetch" href="/assets/gcf.html.d1de49b5.js"><link rel="prefetch" href="/assets/heroku.html.669b708e.js"><link rel="prefetch" href="/assets/supabase.html.988b546c.js"><link rel="prefetch" href="/assets/vps.html.f2f91841.js"><link rel="prefetch" href="/assets/index.html.85c33b38.js"><link rel="prefetch" href="/assets/auto-retry.html.31be738d.js"><link rel="prefetch" href="/assets/autoquote.html.b30734b5.js"><link rel="prefetch" href="/assets/command-filter.html.c364a388.js"><link rel="prefetch" href="/assets/console-time.html.46bd227e.js"><link rel="prefetch" href="/assets/conversations.html.2b0c3827.js"><link rel="prefetch" href="/assets/emoji.html.81147100.js"><link rel="prefetch" href="/assets/files.html.c606e75f.js"><link rel="prefetch" href="/assets/fluent.html.1abb5f78.js"><link rel="prefetch" href="/assets/guide.html.d9bd11aa.js"><link rel="prefetch" href="/assets/hydrate.html.4c175c13.js"><link rel="prefetch" href="/assets/i18n.html.428765a0.js"><link rel="prefetch" href="/assets/keyboard.html.6c0bf61a.js"><link rel="prefetch" href="/assets/menu.html.474d6979.js"><link rel="prefetch" href="/assets/middlewares.html.6f217f8c.js"><link rel="prefetch" href="/assets/parse-mode.html.d5977aa1.js"><link rel="prefetch" href="/assets/ratelimiter.html.dcb23f02.js"><link rel="prefetch" href="/assets/router.html.a6263702.js"><link rel="prefetch" href="/assets/runner.html.eb517616.js"><link rel="prefetch" href="/assets/session.html.11c3c501.js"><link rel="prefetch" href="/assets/stateless-question.html.21157e1e.js"><link rel="prefetch" href="/assets/transformer-throttler.html.7cc2f0b1.js"><link rel="prefetch" href="/assets/about.html.f007b692.js"><link rel="prefetch" href="/assets/comparison.html.7cb30f1a.js"><link rel="prefetch" href="/assets/faq.html.ab87e4e2.js"><link rel="prefetch" href="/assets/index.html.7f73b562.js"><link rel="prefetch" href="/assets/deployment.html.0cc1f590.js"><link rel="prefetch" href="/assets/flood.html.88a55de7.js"><link rel="prefetch" href="/assets/middleware.html.f8435a72.js"><link rel="prefetch" href="/assets/proxy.html.bf69acd6.js"><link rel="prefetch" href="/assets/reliability.html.64f3e6c3.js"><link rel="prefetch" href="/assets/scaling.html.2d3fd664.js"><link rel="prefetch" href="/assets/structuring.html.0511b28d.js"><link rel="prefetch" href="/assets/transformers.html.16a8c751.js"><link rel="prefetch" href="/assets/index.html.4ca6065e.js"><link rel="prefetch" href="/assets/examples.html.53169b79.js"><link rel="prefetch" href="/assets/index.html.552991d6.js"><link rel="prefetch" href="/assets/api.html.878c8c2c.js"><link rel="prefetch" href="/assets/basics.html.543a2042.js"><link rel="prefetch" href="/assets/commands.html.eeed05a5.js"><link rel="prefetch" href="/assets/context.html.28ad9099.js"><link rel="prefetch" href="/assets/deployment-types.html.a4ee1ec9.js"><link rel="prefetch" href="/assets/errors.html.5600c6f7.js"><link rel="prefetch" href="/assets/files.html.1a7688d3.js"><link rel="prefetch" href="/assets/filter-queries.html.e3032e99.js"><link rel="prefetch" href="/assets/games.html.15a05ee3.js"><link rel="prefetch" href="/assets/getting-started.html.00146d44.js"><link rel="prefetch" href="/assets/inline-queries.html.449180e2.js"><link rel="prefetch" href="/assets/introduction.html.52f722fd.js"><link rel="prefetch" href="/assets/middleware.html.b966b896.js"><link rel="prefetch" href="/assets/comparison.html.398055af.js"><link rel="prefetch" href="/assets/deno-deploy.html.5a4b46a7.js"><link rel="prefetch" href="/assets/gcf.html.89618643.js"><link rel="prefetch" href="/assets/heroku.html.9163f54c.js"><link rel="prefetch" href="/assets/supabase.html.1800ab4d.js"><link rel="prefetch" href="/assets/vps.html.4d6695a1.js"><link rel="prefetch" href="/assets/index.html.1a9067bf.js"><link rel="prefetch" href="/assets/auto-retry.html.de9d3797.js"><link rel="prefetch" href="/assets/autoquote.html.f83bae86.js"><link rel="prefetch" href="/assets/command-filter.html.423ed841.js"><link rel="prefetch" href="/assets/console-time.html.3830fbe1.js"><link rel="prefetch" href="/assets/conversations.html.432bb005.js"><link rel="prefetch" href="/assets/emoji.html.8029db1a.js"><link rel="prefetch" href="/assets/files.html.2699f4bb.js"><link rel="prefetch" href="/assets/fluent.html.39b71d4f.js"><link rel="prefetch" href="/assets/guide.html.7cb8c4e0.js"><link rel="prefetch" href="/assets/hydrate.html.72c60eb3.js"><link rel="prefetch" href="/assets/i18n.html.dc715381.js"><link rel="prefetch" href="/assets/keyboard.html.dc0c2040.js"><link rel="prefetch" href="/assets/menu.html.8aebe988.js"><link rel="prefetch" href="/assets/middlewares.html.9de5ab69.js"><link rel="prefetch" href="/assets/parse-mode.html.ca8cb1c8.js"><link rel="prefetch" href="/assets/ratelimiter.html.4d25b483.js"><link rel="prefetch" href="/assets/router.html.8d1ee5d8.js"><link rel="prefetch" href="/assets/runner.html.28f44c08.js"><link rel="prefetch" href="/assets/session.html.ae5c6675.js"><link rel="prefetch" href="/assets/stateless-question.html.b8d2c40b.js"><link rel="prefetch" href="/assets/transformer-throttler.html.7c37a48c.js"><link rel="prefetch" href="/assets/about.html.e190341e.js"><link rel="prefetch" href="/assets/comparison.html.83930564.js"><link rel="prefetch" href="/assets/faq.html.1839b24f.js"><link rel="prefetch" href="/assets/index.html.4784e924.js"><link rel="prefetch" href="/assets/deployment.html.6ae56d93.js"><link rel="prefetch" href="/assets/flood.html.b312daee.js"><link rel="prefetch" href="/assets/middleware.html.28926717.js"><link rel="prefetch" href="/assets/proxy.html.4cfe6063.js"><link rel="prefetch" href="/assets/reliability.html.3882ade6.js"><link rel="prefetch" href="/assets/scaling.html.07ab011b.js"><link rel="prefetch" href="/assets/structuring.html.d0273c97.js"><link rel="prefetch" href="/assets/transformers.html.842baa49.js"><link rel="prefetch" href="/assets/index.html.9067edce.js"><link rel="prefetch" href="/assets/examples.html.c7890b6d.js"><link rel="prefetch" href="/assets/index.html.92f20dce.js"><link rel="prefetch" href="/assets/api.html.632d4eef.js"><link rel="prefetch" href="/assets/basics.html.b7c424e6.js"><link rel="prefetch" href="/assets/commands.html.164fa7bd.js"><link rel="prefetch" href="/assets/context.html.ecccc876.js"><link rel="prefetch" href="/assets/deployment-types.html.18087f24.js"><link rel="prefetch" href="/assets/errors.html.e061e85d.js"><link rel="prefetch" href="/assets/files.html.bd693177.js"><link rel="prefetch" href="/assets/filter-queries.html.62c9c8a0.js"><link rel="prefetch" href="/assets/games.html.297d5225.js"><link rel="prefetch" href="/assets/getting-started.html.17fd90d5.js"><link rel="prefetch" href="/assets/inline-queries.html.02b4ab5d.js"><link rel="prefetch" href="/assets/introduction.html.ff47c7d0.js"><link rel="prefetch" href="/assets/middleware.html.e66f1430.js"><link rel="prefetch" href="/assets/comparison.html.2b2db4ad.js"><link rel="prefetch" href="/assets/deno-deploy.html.1d1d1f14.js"><link rel="prefetch" href="/assets/gcf.html.cefa30d1.js"><link rel="prefetch" href="/assets/heroku.html.70155739.js"><link rel="prefetch" href="/assets/supabase.html.3fe0b6d6.js"><link rel="prefetch" href="/assets/vps.html.9914637a.js"><link rel="prefetch" href="/assets/index.html.733bbd8e.js"><link rel="prefetch" href="/assets/auto-retry.html.ab9da6c1.js"><link rel="prefetch" href="/assets/autoquote.html.0fb14fb0.js"><link rel="prefetch" href="/assets/command-filter.html.315b266d.js"><link rel="prefetch" href="/assets/console-time.html.10c94421.js"><link rel="prefetch" href="/assets/conversations.html.0d53d8c3.js"><link rel="prefetch" href="/assets/emoji.html.e28f4025.js"><link rel="prefetch" href="/assets/files.html.fbd77f63.js"><link rel="prefetch" href="/assets/fluent.html.cbdfc446.js"><link rel="prefetch" href="/assets/guide.html.58e2ee25.js"><link rel="prefetch" href="/assets/hydrate.html.42c6a534.js"><link rel="prefetch" href="/assets/i18n.html.1019e5cb.js"><link rel="prefetch" href="/assets/keyboard.html.b71ffde4.js"><link rel="prefetch" href="/assets/menu.html.f2a75e49.js"><link rel="prefetch" href="/assets/middlewares.html.fb435140.js"><link rel="prefetch" href="/assets/parse-mode.html.6d14c62e.js"><link rel="prefetch" href="/assets/ratelimiter.html.a963fa15.js"><link rel="prefetch" href="/assets/router.html.41f29ace.js"><link rel="prefetch" href="/assets/runner.html.cfdc9665.js"><link rel="prefetch" href="/assets/session.html.29480bd2.js"><link rel="prefetch" href="/assets/stateless-question.html.1675bb87.js"><link rel="prefetch" href="/assets/transformer-throttler.html.2fa64022.js"><link rel="prefetch" href="/assets/about.html.57750b1c.js"><link rel="prefetch" href="/assets/comparison.html.52276010.js"><link rel="prefetch" href="/assets/faq.html.b6c8c223.js"><link rel="prefetch" href="/assets/404.html.cfa4669e.js">
    <link rel="stylesheet" href="/assets/style.1e0a4356.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/Y.png" alt="grammY"><span class="site-name can-hide">grammY</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/guide/" class="router-link-active" aria-label="Guide" style=""><!--[--><!--]--> Guide <!--v-if--><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Learn"><span class="title">Learn</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Learn"><span class="title">Learn</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Guide</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/guide/" class="" aria-label="Overview" style="display:inline-flex;"><!--[--><!--]--> Overview <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/introduction.html" class="" aria-label="Introduction" style="display:inline-flex;"><!--[--><!--]--> Introduction <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/getting-started.html" class="" aria-label="Getting Started" style="display:inline-flex;"><!--[--><!--]--> Getting Started <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/basics.html" class="" aria-label="Sending and Receiving Messages" style="display:inline-flex;"><!--[--><!--]--> Sending and Receiving Messages <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/context.html" class="" aria-label="Context" style="display:inline-flex;"><!--[--><!--]--> Context <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/api.html" class="" aria-label="Bot API" style="display:inline-flex;"><!--[--><!--]--> Bot API <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/guide/filter-queries.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Filter Queries and bot.on()" style="display:inline-flex;"><!--[--><!--]--> Filter Queries and bot.on() <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/commands.html" class="" aria-label="Commands" style="display:inline-flex;"><!--[--><!--]--> Commands <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/middleware.html" class="" aria-label="Middleware" style="display:inline-flex;"><!--[--><!--]--> Middleware <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/errors.html" class="" aria-label="Error Handling" style="display:inline-flex;"><!--[--><!--]--> Error Handling <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/inline-queries.html" class="" aria-label="Inline Queries" style="display:inline-flex;"><!--[--><!--]--> Inline Queries <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/files.html" class="" aria-label="File Handling" style="display:inline-flex;"><!--[--><!--]--> File Handling <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/games.html" class="" aria-label="Games" style="display:inline-flex;"><!--[--><!--]--> Games <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/deployment-types.html" class="" aria-label="Long Polling vs. Webhooks" style="display:inline-flex;"><!--[--><!--]--> Long Polling vs. Webhooks <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Advanced</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/advanced/" class="" aria-label="Overview" style="display:inline-flex;"><!--[--><!--]--> Overview <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/middleware.html" class="" aria-label="Middleware Redux" style="display:inline-flex;"><!--[--><!--]--> Middleware Redux <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/structuring.html" class="" aria-label="Scaling Up I: Large Codebase" style="display:inline-flex;"><!--[--><!--]--> Scaling Up I: Large Codebase <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/scaling.html" class="" aria-label="Scaling Up II: High Load" style="display:inline-flex;"><!--[--><!--]--> Scaling Up II: High Load <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/reliability.html" class="" aria-label="Scaling Up III: Reliability" style="display:inline-flex;"><!--[--><!--]--> Scaling Up III: Reliability <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/flood.html" class="" aria-label="Scaling Up IV: Flood Limits" style="display:inline-flex;"><!--[--><!--]--> Scaling Up IV: Flood Limits <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/transformers.html" class="" aria-label="Bot API Transformers" style="display:inline-flex;"><!--[--><!--]--> Bot API Transformers <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/proxy.html" class="" aria-label="Proxy Support" style="display:inline-flex;"><!--[--><!--]--> Proxy Support <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/deployment.html" class="" aria-label="Deployment Checklist" style="display:inline-flex;"><!--[--><!--]--> Deployment Checklist <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Plugins"><span class="title">Plugins</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Plugins"><span class="title">Plugins</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Introduction</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/" class="" aria-label="About Plugins" style="display:inline-flex;"><!--[--><!--]--> About Plugins <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/guide.html" class="" aria-label="How to Write a Plugin" style="display:inline-flex;"><!--[--><!--]--> How to Write a Plugin <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Built-in</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/session.html" class="" aria-label="Sessions and Storing Data" style="display:inline-flex;"><!--[--><!--]--> Sessions and Storing Data <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/keyboard.html" class="" aria-label="Inline and Custom Keyboards" style="display:inline-flex;"><!--[--><!--]--> Inline and Custom Keyboards <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Official</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/conversations.html" class="" aria-label="Conversations (conversations)" style="display:inline-flex;"><!--[--><!--]--> Conversations (conversations) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/menu.html" class="" aria-label="Interactive Menus (menu)" style="display:inline-flex;"><!--[--><!--]--> Interactive Menus (menu) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/stateless-question.html" class="" aria-label="Stateless Question (stateless-question)" style="display:inline-flex;"><!--[--><!--]--> Stateless Question (stateless-question) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/runner.html" class="" aria-label="Concurrency (runner)" style="display:inline-flex;"><!--[--><!--]--> Concurrency (runner) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/hydrate.html" class="" aria-label="Hydration (hydrate)" style="display:inline-flex;"><!--[--><!--]--> Hydration (hydrate) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/auto-retry.html" class="" aria-label="Retry API Requests (auto-retry)" style="display:inline-flex;"><!--[--><!--]--> Retry API Requests (auto-retry) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/transformer-throttler.html" class="" aria-label="Flood Control (transformer-throttler)" style="display:inline-flex;"><!--[--><!--]--> Flood Control (transformer-throttler) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/ratelimiter.html" class="" aria-label="Rate Limit Users (ratelimiter)" style="display:inline-flex;"><!--[--><!--]--> Rate Limit Users (ratelimiter) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/files.html" class="" aria-label="Files (files)" style="display:inline-flex;"><!--[--><!--]--> Files (files) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/i18n.html" class="" aria-label="Internationalization (i18n)" style="display:inline-flex;"><!--[--><!--]--> Internationalization (i18n) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/fluent.html" class="" aria-label="Internationalization (fluent)" style="display:inline-flex;"><!--[--><!--]--> Internationalization (fluent) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/router.html" class="" aria-label="Router (router)" style="display:inline-flex;"><!--[--><!--]--> Router (router) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/emoji.html" class="" aria-label="Emoji (emoji)" style="display:inline-flex;"><!--[--><!--]--> Emoji (emoji) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/parse-mode.html" class="" aria-label="Parse Mode (parse-mode)" style="display:inline-flex;"><!--[--><!--]--> Parse Mode (parse-mode) <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Third-party</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/console-time.html" class="" aria-label="Console Time" style="display:inline-flex;"><!--[--><!--]--> Console Time <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/middlewares.html" class="" aria-label="Useful Middleware" style="display:inline-flex;"><!--[--><!--]--> Useful Middleware <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/autoquote.html" class="" aria-label="Autoquote" style="display:inline-flex;"><!--[--><!--]--> Autoquote <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/#create-your-own-plugins" class="" aria-label="[Submit your PR!]" style="display:inline-flex;"><!--[--><!--]--> [Submit your PR!] <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Examples"><span class="title">Examples</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Examples"><span class="title">Examples</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Examples</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/awesome-grammY" rel="noopener noreferrer" target="_blank" aria-label="Awesome grammY" style="display:inline-flex;"><!--[--><!--]--> Awesome grammY <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/examples" rel="noopener noreferrer" target="_blank" aria-label="Example Bots Repository" style="display:inline-flex;"><!--[--><!--]--> Example Bots Repository <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Resources"><span class="title">Resources</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Resources"><span class="title">Resources</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>grammY</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/resources/about.html" class="" aria-label="About grammY" style="display:inline-flex;"><!--[--><!--]--> About grammY <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs" rel="noopener noreferrer" target="_blank" aria-label="Community Chat (English)" style="display:inline-flex;"><!--[--><!--]--> Community Chat (English) <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_ru" rel="noopener noreferrer" target="_blank" aria-label="Community Chat (Russian)" style="display:inline-flex;"><!--[--><!--]--> Community Chat (Russian) <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_news" rel="noopener noreferrer" target="_blank" aria-label="News" style="display:inline-flex;"><!--[--><!--]--> News <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://twitter.com/grammy_js" rel="noopener noreferrer" target="_blank" aria-label="Twitter" style="display:inline-flex;"><!--[--><!--]--> Twitter <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/resources/faq.html" class="" aria-label="FAQ" style="display:inline-flex;"><!--[--><!--]--> FAQ <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/resources/comparison.html" class="" aria-label="Comparison to Other Frameworks" style="display:inline-flex;"><!--[--><!--]--> Comparison to Other Frameworks <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Telegram</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots" rel="noopener noreferrer" target="_blank" aria-label="Introduction for Developers" style="display:inline-flex;"><!--[--><!--]--> Introduction for Developers <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/faq" rel="noopener noreferrer" target="_blank" aria-label="Bots FAQ" style="display:inline-flex;"><!--[--><!--]--> Bots FAQ <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/api" rel="noopener noreferrer" target="_blank" aria-label="Bot API Reference" style="display:inline-flex;"><!--[--><!--]--> Bot API Reference <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/webhooks#testing-your-bot-with-updates" rel="noopener noreferrer" target="_blank" aria-label="Example Updates" style="display:inline-flex;"><!--[--><!--]--> Example Updates <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Hosting"><span class="title">Hosting</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Hosting"><span class="title">Hosting</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Overview</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/hosting/comparison.html" class="" aria-label="Comparison" style="display:inline-flex;"><!--[--><!--]--> Comparison <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Tutorials</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/hosting/deno-deploy.html" class="" aria-label="Deno Deploy" style="display:inline-flex;"><!--[--><!--]--> Deno Deploy <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/supabase.html" class="" aria-label="Supabase Edge Functions" style="display:inline-flex;"><!--[--><!--]--> Supabase Edge Functions <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/heroku.html" class="" aria-label="Heroku" style="display:inline-flex;"><!--[--><!--]--> Heroku <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/gcf.html" class="" aria-label="Google Cloud Functions" style="display:inline-flex;"><!--[--><!--]--> Google Cloud Functions <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/vps.html" class="" aria-label="Virtual Private Server" style="display:inline-flex;"><!--[--><!--]--> Virtual Private Server <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts" rel="noopener noreferrer" target="_blank" aria-label="API Reference" style=""><!--[--><!--]--> API Reference <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/guide/filter-queries.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English" style="display:inline-flex;"><!--[--><!--]--> English <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guide/filter-queries.html" class="" aria-label="Español" style="display:inline-flex;"><!--[--><!--]--> Español <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guide/filter-queries.html" class="" aria-label="Indonesia" style="display:inline-flex;"><!--[--><!--]--> Indonesia <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/guide/filter-queries.html" class="" aria-label="简体中文" style="display:inline-flex;"><!--[--><!--]--> 简体中文 <!--v-if--><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/grammyjs/grammY" rel="noopener noreferrer" target="_blank" aria-label="GitHub" style=""><!--[--><!--]--> GitHub <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/guide/" class="router-link-active" aria-label="Guide" style=""><!--[--><!--]--> Guide <!--v-if--><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Learn"><span class="title">Learn</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Learn"><span class="title">Learn</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Guide</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/guide/" class="" aria-label="Overview" style="display:inline-flex;"><!--[--><!--]--> Overview <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/introduction.html" class="" aria-label="Introduction" style="display:inline-flex;"><!--[--><!--]--> Introduction <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/getting-started.html" class="" aria-label="Getting Started" style="display:inline-flex;"><!--[--><!--]--> Getting Started <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/basics.html" class="" aria-label="Sending and Receiving Messages" style="display:inline-flex;"><!--[--><!--]--> Sending and Receiving Messages <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/context.html" class="" aria-label="Context" style="display:inline-flex;"><!--[--><!--]--> Context <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/api.html" class="" aria-label="Bot API" style="display:inline-flex;"><!--[--><!--]--> Bot API <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/guide/filter-queries.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Filter Queries and bot.on()" style="display:inline-flex;"><!--[--><!--]--> Filter Queries and bot.on() <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/commands.html" class="" aria-label="Commands" style="display:inline-flex;"><!--[--><!--]--> Commands <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/middleware.html" class="" aria-label="Middleware" style="display:inline-flex;"><!--[--><!--]--> Middleware <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/errors.html" class="" aria-label="Error Handling" style="display:inline-flex;"><!--[--><!--]--> Error Handling <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/inline-queries.html" class="" aria-label="Inline Queries" style="display:inline-flex;"><!--[--><!--]--> Inline Queries <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/files.html" class="" aria-label="File Handling" style="display:inline-flex;"><!--[--><!--]--> File Handling <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/games.html" class="" aria-label="Games" style="display:inline-flex;"><!--[--><!--]--> Games <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/deployment-types.html" class="" aria-label="Long Polling vs. Webhooks" style="display:inline-flex;"><!--[--><!--]--> Long Polling vs. Webhooks <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Advanced</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/advanced/" class="" aria-label="Overview" style="display:inline-flex;"><!--[--><!--]--> Overview <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/middleware.html" class="" aria-label="Middleware Redux" style="display:inline-flex;"><!--[--><!--]--> Middleware Redux <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/structuring.html" class="" aria-label="Scaling Up I: Large Codebase" style="display:inline-flex;"><!--[--><!--]--> Scaling Up I: Large Codebase <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/scaling.html" class="" aria-label="Scaling Up II: High Load" style="display:inline-flex;"><!--[--><!--]--> Scaling Up II: High Load <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/reliability.html" class="" aria-label="Scaling Up III: Reliability" style="display:inline-flex;"><!--[--><!--]--> Scaling Up III: Reliability <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/flood.html" class="" aria-label="Scaling Up IV: Flood Limits" style="display:inline-flex;"><!--[--><!--]--> Scaling Up IV: Flood Limits <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/transformers.html" class="" aria-label="Bot API Transformers" style="display:inline-flex;"><!--[--><!--]--> Bot API Transformers <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/proxy.html" class="" aria-label="Proxy Support" style="display:inline-flex;"><!--[--><!--]--> Proxy Support <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/deployment.html" class="" aria-label="Deployment Checklist" style="display:inline-flex;"><!--[--><!--]--> Deployment Checklist <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Plugins"><span class="title">Plugins</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Plugins"><span class="title">Plugins</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Introduction</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/" class="" aria-label="About Plugins" style="display:inline-flex;"><!--[--><!--]--> About Plugins <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/guide.html" class="" aria-label="How to Write a Plugin" style="display:inline-flex;"><!--[--><!--]--> How to Write a Plugin <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Built-in</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/session.html" class="" aria-label="Sessions and Storing Data" style="display:inline-flex;"><!--[--><!--]--> Sessions and Storing Data <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/keyboard.html" class="" aria-label="Inline and Custom Keyboards" style="display:inline-flex;"><!--[--><!--]--> Inline and Custom Keyboards <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Official</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/conversations.html" class="" aria-label="Conversations (conversations)" style="display:inline-flex;"><!--[--><!--]--> Conversations (conversations) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/menu.html" class="" aria-label="Interactive Menus (menu)" style="display:inline-flex;"><!--[--><!--]--> Interactive Menus (menu) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/stateless-question.html" class="" aria-label="Stateless Question (stateless-question)" style="display:inline-flex;"><!--[--><!--]--> Stateless Question (stateless-question) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/runner.html" class="" aria-label="Concurrency (runner)" style="display:inline-flex;"><!--[--><!--]--> Concurrency (runner) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/hydrate.html" class="" aria-label="Hydration (hydrate)" style="display:inline-flex;"><!--[--><!--]--> Hydration (hydrate) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/auto-retry.html" class="" aria-label="Retry API Requests (auto-retry)" style="display:inline-flex;"><!--[--><!--]--> Retry API Requests (auto-retry) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/transformer-throttler.html" class="" aria-label="Flood Control (transformer-throttler)" style="display:inline-flex;"><!--[--><!--]--> Flood Control (transformer-throttler) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/ratelimiter.html" class="" aria-label="Rate Limit Users (ratelimiter)" style="display:inline-flex;"><!--[--><!--]--> Rate Limit Users (ratelimiter) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/files.html" class="" aria-label="Files (files)" style="display:inline-flex;"><!--[--><!--]--> Files (files) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/i18n.html" class="" aria-label="Internationalization (i18n)" style="display:inline-flex;"><!--[--><!--]--> Internationalization (i18n) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/fluent.html" class="" aria-label="Internationalization (fluent)" style="display:inline-flex;"><!--[--><!--]--> Internationalization (fluent) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/router.html" class="" aria-label="Router (router)" style="display:inline-flex;"><!--[--><!--]--> Router (router) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/emoji.html" class="" aria-label="Emoji (emoji)" style="display:inline-flex;"><!--[--><!--]--> Emoji (emoji) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/parse-mode.html" class="" aria-label="Parse Mode (parse-mode)" style="display:inline-flex;"><!--[--><!--]--> Parse Mode (parse-mode) <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Third-party</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/console-time.html" class="" aria-label="Console Time" style="display:inline-flex;"><!--[--><!--]--> Console Time <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/middlewares.html" class="" aria-label="Useful Middleware" style="display:inline-flex;"><!--[--><!--]--> Useful Middleware <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/autoquote.html" class="" aria-label="Autoquote" style="display:inline-flex;"><!--[--><!--]--> Autoquote <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/#create-your-own-plugins" class="" aria-label="[Submit your PR!]" style="display:inline-flex;"><!--[--><!--]--> [Submit your PR!] <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Examples"><span class="title">Examples</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Examples"><span class="title">Examples</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Examples</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/awesome-grammY" rel="noopener noreferrer" target="_blank" aria-label="Awesome grammY" style="display:inline-flex;"><!--[--><!--]--> Awesome grammY <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/examples" rel="noopener noreferrer" target="_blank" aria-label="Example Bots Repository" style="display:inline-flex;"><!--[--><!--]--> Example Bots Repository <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Resources"><span class="title">Resources</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Resources"><span class="title">Resources</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>grammY</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/resources/about.html" class="" aria-label="About grammY" style="display:inline-flex;"><!--[--><!--]--> About grammY <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs" rel="noopener noreferrer" target="_blank" aria-label="Community Chat (English)" style="display:inline-flex;"><!--[--><!--]--> Community Chat (English) <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_ru" rel="noopener noreferrer" target="_blank" aria-label="Community Chat (Russian)" style="display:inline-flex;"><!--[--><!--]--> Community Chat (Russian) <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_news" rel="noopener noreferrer" target="_blank" aria-label="News" style="display:inline-flex;"><!--[--><!--]--> News <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://twitter.com/grammy_js" rel="noopener noreferrer" target="_blank" aria-label="Twitter" style="display:inline-flex;"><!--[--><!--]--> Twitter <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/resources/faq.html" class="" aria-label="FAQ" style="display:inline-flex;"><!--[--><!--]--> FAQ <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/resources/comparison.html" class="" aria-label="Comparison to Other Frameworks" style="display:inline-flex;"><!--[--><!--]--> Comparison to Other Frameworks <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Telegram</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots" rel="noopener noreferrer" target="_blank" aria-label="Introduction for Developers" style="display:inline-flex;"><!--[--><!--]--> Introduction for Developers <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/faq" rel="noopener noreferrer" target="_blank" aria-label="Bots FAQ" style="display:inline-flex;"><!--[--><!--]--> Bots FAQ <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/api" rel="noopener noreferrer" target="_blank" aria-label="Bot API Reference" style="display:inline-flex;"><!--[--><!--]--> Bot API Reference <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/webhooks#testing-your-bot-with-updates" rel="noopener noreferrer" target="_blank" aria-label="Example Updates" style="display:inline-flex;"><!--[--><!--]--> Example Updates <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Hosting"><span class="title">Hosting</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Hosting"><span class="title">Hosting</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Overview</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/hosting/comparison.html" class="" aria-label="Comparison" style="display:inline-flex;"><!--[--><!--]--> Comparison <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Tutorials</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/hosting/deno-deploy.html" class="" aria-label="Deno Deploy" style="display:inline-flex;"><!--[--><!--]--> Deno Deploy <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/supabase.html" class="" aria-label="Supabase Edge Functions" style="display:inline-flex;"><!--[--><!--]--> Supabase Edge Functions <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/heroku.html" class="" aria-label="Heroku" style="display:inline-flex;"><!--[--><!--]--> Heroku <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/gcf.html" class="" aria-label="Google Cloud Functions" style="display:inline-flex;"><!--[--><!--]--> Google Cloud Functions <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/vps.html" class="" aria-label="Virtual Private Server" style="display:inline-flex;"><!--[--><!--]--> Virtual Private Server <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts" rel="noopener noreferrer" target="_blank" aria-label="API Reference" style=""><!--[--><!--]--> API Reference <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/guide/filter-queries.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English" style="display:inline-flex;"><!--[--><!--]--> English <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guide/filter-queries.html" class="" aria-label="Español" style="display:inline-flex;"><!--[--><!--]--> Español <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guide/filter-queries.html" class="" aria-label="Indonesia" style="display:inline-flex;"><!--[--><!--]--> Indonesia <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/guide/filter-queries.html" class="" aria-label="简体中文" style="display:inline-flex;"><!--[--><!--]--> 简体中文 <!--v-if--><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/grammyjs/grammY" rel="noopener noreferrer" target="_blank" aria-label="GitHub" style=""><!--[--><!--]--> GitHub <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Filter Queries and bot.on() <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/filter-queries.html#introduction" class="router-link-active router-link-exact-active sidebar-item" aria-label="Introduction" style=""><!--[--><!--]--> Introduction <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#example-queries" class="router-link-active router-link-exact-active sidebar-item" aria-label="Example Queries" style=""><!--[--><!--]--> Example Queries <!--v-if--><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/filter-queries.html#regular-queries" class="router-link-active router-link-exact-active sidebar-item" aria-label="Regular Queries" style=""><!--[--><!--]--> Regular Queries <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#filter-for-entities" class="router-link-active router-link-exact-active sidebar-item" aria-label="Filter for Entities" style=""><!--[--><!--]--> Filter for Entities <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#omit-values" class="router-link-active router-link-exact-active sidebar-item" aria-label="Omit Values" style=""><!--[--><!--]--> Omit Values <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#shortcuts" class="router-link-active router-link-exact-active sidebar-item" aria-label="Shortcuts" style=""><!--[--><!--]--> Shortcuts <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#syntactic-sugar" class="router-link-active router-link-exact-active sidebar-item" aria-label="Syntactic Sugar" style=""><!--[--><!--]--> Syntactic Sugar <!--v-if--><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/filter-queries.html#combining-multiple-queries" class="router-link-active router-link-exact-active sidebar-item" aria-label="Combining Multiple Queries" style=""><!--[--><!--]--> Combining Multiple Queries <!--v-if--><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/filter-queries.html#combine-with-or" class="router-link-active router-link-exact-active sidebar-item" aria-label="Combine With OR" style=""><!--[--><!--]--> Combine With OR <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#combine-with-and" class="router-link-active router-link-exact-active sidebar-item" aria-label="Combine With AND" style=""><!--[--><!--]--> Combine With AND <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#building-complex-queries" class="router-link-active router-link-exact-active sidebar-item" aria-label="Building Complex Queries" style=""><!--[--><!--]--> Building Complex Queries <!--v-if--><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/filter-queries.html#useful-tips" class="router-link-active router-link-exact-active sidebar-item" aria-label="Useful Tips" style=""><!--[--><!--]--> Useful Tips <!--v-if--><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/filter-queries.html#chat-member-updates" class="router-link-active router-link-exact-active sidebar-item" aria-label="Chat Member Updates" style=""><!--[--><!--]--> Chat Member Updates <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#combining-queries-with-other-methods" class="router-link-active router-link-exact-active sidebar-item" aria-label="Combining Queries With Other Methods" style=""><!--[--><!--]--> Combining Queries With Other Methods <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#filtering-by-message-sender-type" class="router-link-active router-link-exact-active sidebar-item" aria-label="Filtering by Message Sender Type" style=""><!--[--><!--]--> Filtering by Message Sender Type <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#filtering-by-user-properties" class="router-link-active router-link-exact-active sidebar-item" aria-label="Filtering by User Properties" style=""><!--[--><!--]--> Filtering by User Properties <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#reusing-filter-query-logic" class="router-link-active router-link-exact-active sidebar-item" aria-label="Reusing Filter Query Logic" style=""><!--[--><!--]--> Reusing Filter Query Logic <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#reusing-filter-query-types" class="router-link-active router-link-exact-active sidebar-item" aria-label="Reusing Filter Query Types" style=""><!--[--><!--]--> Reusing Filter Query Types <!--v-if--><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/filter-queries.html#the-query-language" class="router-link-active router-link-exact-active sidebar-item" aria-label="The Query Language" style=""><!--[--><!--]--> The Query Language <!--v-if--><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/filter-queries.html#query-structure" class="router-link-active router-link-exact-active sidebar-item" aria-label="Query Structure" style=""><!--[--><!--]--> Query Structure <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#query-validation" class="router-link-active router-link-exact-active sidebar-item" aria-label="Query Validation" style=""><!--[--><!--]--> Query Validation <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/filter-queries.html#performance" class="router-link-active router-link-exact-active sidebar-item" aria-label="Performance" style=""><!--[--><!--]--> Performance <!--v-if--><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="filter-queries-and-bot-on" tabindex="-1"><a class="header-anchor" href="#filter-queries-and-bot-on" aria-hidden="true">#</a> Filter Queries and <code>bot<wbr>.on()</code></h1><p>The first argument of <code>bot<wbr>.on()</code> is a string called <em>filter query</em>.</p><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><p>Most (all?) other bot frameworks allow you to perform a primitive form of filtering for updates, e.g. only <code>on(&quot;message&quot;)</code> and the like. Other filtering of messages is left to the developer, which often leads to endless <code>if</code> statements in their code.</p><p>On the contrary, <strong>grammY ships with its own query language</strong> that you can use in order to <strong>filter for exactly the messages</strong> you want.</p><p>This allows for over 650 different filters to be used, and we may add more over time. Every valid filter can be auto-completed in your code editor. Hence, you can simply type <code>bot<wbr>.on(&quot;&quot;)</code>, open auto-complete, and search through all queries by typing something.</p><p><img src="/filter-query-search.png" alt="Filter Query Search"></p><p>The type inference of <code>bot<wbr>.on()</code> will comprehend the filter query you picked. It therefore tightens a few types on the context that are known to exist.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Could be undefined if the received message has no text.</span>
  <span class="token keyword">const</span> text<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message:text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Text is always defined because this handler is called when a text message is received.</span>
  <span class="token keyword">const</span> text<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In a sense, grammY implements the filter queries both at runtime, and on the type level.</p><h2 id="example-queries" tabindex="-1"><a class="header-anchor" href="#example-queries" aria-hidden="true">#</a> Example Queries</h2><p>Here are some example queries:</p><h3 id="regular-queries" tabindex="-1"><a class="header-anchor" href="#regular-queries" aria-hidden="true">#</a> Regular Queries</h3><p>Simple filters for updates, and sub-filters:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// called when any message is received</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message:text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// only text messages</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message:photo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// only photo messages</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="filter-for-entities" tabindex="-1"><a class="header-anchor" href="#filter-for-entities" aria-hidden="true">#</a> Filter for Entities</h3><p>Sub-filters that go one level deeper:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message:entities:url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// messages containing a URL</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message:entities:code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// messages containing a code snippet</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;edited_message:entities&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// edited messages with any kind of entities</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="omit-values" tabindex="-1"><a class="header-anchor" href="#omit-values" aria-hidden="true">#</a> Omit Values</h3><p>You can omit some values in the filter queries. grammY will then search through different values to match your query.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;:text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// any text messages and any text post of channels</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message::url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// messages with URL in text or caption (photos, etc)</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;::email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// messages or channel posts with email in text or caption</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Leaving out the <em>first</em> value matches both messages and channel posts. <a href="/guide/context.html#available-actions" class="">Remember</a> that <code>ctx<wbr>.msg</code> gives you access to both messages or channel posts, whichever is matched by the query.</p><p>Leaving out the <em>second</em> value matches both entities and caption entities. You can leave out both the first and the second part at the same time.</p><h3 id="shortcuts" tabindex="-1"><a class="header-anchor" href="#shortcuts" aria-hidden="true">#</a> Shortcuts</h3><p>The query engine of grammY allows to define neat shortcuts that group related queries together.</p><h4 id="msg" tabindex="-1"><a class="header-anchor" href="#msg" aria-hidden="true">#</a> <code>msg</code></h4><p>The <code>msg</code> shortcut groups new messages and new channel posts. In other words, using <code>msg</code> is equivalent to listening for both <code>&quot;message&quot;</code> and <code>&quot;channel<wbr>_post&quot;</code> events.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// any message or channel post</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;msg:text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// exactly the same as `:text`</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="edit" tabindex="-1"><a class="header-anchor" href="#edit" aria-hidden="true">#</a> <code>edit</code></h4><p>This <code>edit</code> shortcut groups edited messages and edited channel posts.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;edit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// any message or channel post edit</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;edit:text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// edits of text messages</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;edit::url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// edits of messages with URL in text or caption</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;edit:location&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// live location updated</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="media" tabindex="-1"><a class="header-anchor" href="#media" aria-hidden="true">#</a> <code>:<wbr>media</code></h4><p>The <code>:<wbr>media</code> shortcut groups photo and video messages.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message:media&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// photo and video messages</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;edited_channel_post:media&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// edited channel posts with media</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;:media&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// media messages or channel posts</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="file" tabindex="-1"><a class="header-anchor" href="#file" aria-hidden="true">#</a> <code>:<wbr>file</code></h4><p>The <code>:<wbr>file</code> shortcut groups all messages that contain a file. Hence, you can be sure that <code>await ctx<wbr>.get<wbr>File()</code> will give you a file object.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;:file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// files in messages or channel posts</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;edit:file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// edits to file messages or file channel posts</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="syntactic-sugar" tabindex="-1"><a class="header-anchor" href="#syntactic-sugar" aria-hidden="true">#</a> Syntactic Sugar</h3><p>There are two special cases for the query parts that make filtering for users more convenient. You can detect bots in queries with the <code>:<wbr>is<wbr>_bot</code> query part. The syntactic sugar <code>:<wbr>me</code> can be used to refer to your bot from within a query, which will compare the user identifiers for you.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// A service message about a bot that joined the chat</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message:new_chat_members:is_bot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// A service message about your bot being removed</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message:left_chat_member:me&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that while this syntactic sugar is useful to work with service messages, is should not be used to detect if someone actually joins or leaves a chat. Services messages are messages that inform the users in the chat, and some of them will not be visible in all cases. For example, in large groups, there will not be any service messages about users that join or leave the chat. Hence, your bot may not notice this. Instead, you should listen for <a href="#chat-member-updates">chat member updates</a>.</p><h2 id="combining-multiple-queries" tabindex="-1"><a class="header-anchor" href="#combining-multiple-queries" aria-hidden="true">#</a> Combining Multiple Queries</h2><p>You can combine any number of filter queries with AND as well as OR operations.</p><h3 id="combine-with-or" tabindex="-1"><a class="header-anchor" href="#combine-with-or" aria-hidden="true">#</a> Combine With OR</h3><p>If you want to install some piece of middleware behind the OR concatenation of two queries, you can pass both of them to <code>bot<wbr>.on()</code> in an array.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Runs if the update is about a message OR an edit to a message</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;edited_message&quot;</span><span class="token punctuation">]</span> <span class="token comment">/* , ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Runs if a hashtag OR email OR mention entity is found in text or caption</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;::hashtag&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;::email&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;::mention&quot;</span><span class="token punctuation">]</span> <span class="token comment">/* , ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The middleware will be executed if <em>any of the provided queries</em> matches. The order of the queries does not matter.</p><h3 id="combine-with-and" tabindex="-1"><a class="header-anchor" href="#combine-with-and" aria-hidden="true">#</a> Combine With AND</h3><p>If you want to install some piece of middleware behind the AND concatenation of two queries, you can chain the calls to <code>bot<wbr>.on()</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Matches forwarded URLs</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;::url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;:forward_date&quot;</span> <span class="token comment">/* , ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Matches photos that contain a hashtag in a photo&#39;s caption</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;:photo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;::hashtag&quot;</span> <span class="token comment">/* , ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The middleware will be executed if <em>all of the provided queries</em> match. The order of the queries does not matter.</p><h3 id="building-complex-queries" tabindex="-1"><a class="header-anchor" href="#building-complex-queries" aria-hidden="true">#</a> Building Complex Queries</h3><p>It is technically possible to combine filter queries to more complicated formulas if they are in <a href="https://en.wikipedia.org/wiki/Conjunctive_normal_form" target="_blank" rel="noopener noreferrer">CNF<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, even though this is unlikely to be useful.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot
  <span class="token comment">// Matches all channel posts or forwarded messages ...</span>
  <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;channel_post&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;:forward_date&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token comment">// ... that contain text ...</span>
  <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;:text&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">// ... with at least one URL, hashtag, or cashtag.</span>
  <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;::url&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;::hashtag&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;::cashtag&quot;</span><span class="token punctuation">]</span> <span class="token comment">/* , ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The type inference of <code>ctx</code> will scan through the entire call chain and inspect every element of all three <code>.on</code> calls. As an example, it can detect that <code>ctx<wbr>.msg<wbr>.text</code> is a required property for the above code snippet.</p><h2 id="useful-tips" tabindex="-1"><a class="header-anchor" href="#useful-tips" aria-hidden="true">#</a> Useful Tips</h2><p>Here are some less-known features of filter queries that can come in handy. Some of them are a little advanced, so feel free to move on to the <a href="/guide/commands.html" class="">next section</a>.</p><h3 id="chat-member-updates" tabindex="-1"><a class="header-anchor" href="#chat-member-updates" aria-hidden="true">#</a> Chat Member Updates</h3><p>You can use the following filter query to receive status updates about your bot.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;my_chat_member&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// start, stop, join, or leave</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>In private chats, this triggers when the bot is started or stopped. In groups, this triggers when the bot is added or removed. You can now inspect <code>ctx<wbr>.my<wbr>Chat<wbr>Member</code> to figure out what exactly happened.</p><p>This is not to be confused with</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;chat_member&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>which can be used to detect status changes of other chat members, such as when people join, get promoted, and so on.</p><blockquote><p>Note that <code>chat<wbr>_member</code> updates need to be enabled explicitly by specifying <code>allowed<wbr>_updates</code> when starting your bot.</p></blockquote><h3 id="combining-queries-with-other-methods" tabindex="-1"><a class="header-anchor" href="#combining-queries-with-other-methods" aria-hidden="true">#</a> Combining Queries With Other Methods</h3><p>You can combine filter queries with other methods on the <code>Composer</code> class (<a href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/Composer" target="_blank" rel="noopener noreferrer">API Reference<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>), such as <code>command</code> or <code>filter</code>. This allows for powerful message handling patterns.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;:forward_date&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;help&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// forwarded /help commands</span>

<span class="token comment">// Only handle commands in private chats.</span>
<span class="token keyword">const</span> pm <span class="token operator">=</span> bot<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>chat<span class="token operator">?.</span>type <span class="token operator">===</span> <span class="token string">&quot;private&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pm<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pm<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;help&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="filtering-by-message-sender-type" tabindex="-1"><a class="header-anchor" href="#filtering-by-message-sender-type" aria-hidden="true">#</a> Filtering by Message Sender Type</h3><p>There are five different possible types of message authors on Telegram:</p><ol><li>Channel post authors</li><li>Automatic forwards from linked channels in discussion groups</li><li>Normal user accounts, this includes bots (i.e. “normal” messages)</li><li>Admins sending on behalf of the group (<a href="https://telegram.org/blog/filters-anonymous-admins-comments#anonymous-group-admins" target="_blank" rel="noopener noreferrer">anonymous admins<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</li><li>Users sending messages as one of their channels</li></ol><p>You can combine filter queries with other update handling mechanisms to find out the type of the message author.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Channel posts sent by `ctx.senderChat`</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;channel_post&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Automatic forward from the channel `ctx.senderChat`:</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message:is_automatic_forward&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Regular messages sent by `ctx.from`</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>senderChat <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Anonymous admin in `ctx.chat`</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>senderChat<span class="token operator">?.</span>id <span class="token operator">===</span> ctx<span class="token punctuation">.</span>chat<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Users sending messages on behalf of their channel `ctx.senderChat`</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  ctx<span class="token punctuation">.</span>senderChat <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> ctx<span class="token punctuation">.</span>senderChat<span class="token punctuation">.</span>id <span class="token operator">!==</span> ctx<span class="token punctuation">.</span>chat<span class="token punctuation">.</span>id
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="filtering-by-user-properties" tabindex="-1"><a class="header-anchor" href="#filtering-by-user-properties" aria-hidden="true">#</a> Filtering by User Properties</h3><p>If you want to filter by other properties of a user, you need to perform an additional request, e.g. <code>await ctx<wbr>.get<wbr>Author()</code> for the author of the message. Filter queries will not secretly perform further API requests for you. It is still simple to perform this kind of filtering:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
  <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">getAuthor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> user<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&quot;creator&quot;</span> <span class="token operator">||</span> user<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&quot;administrator&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Handles messages from creators and admins.</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="reusing-filter-query-logic" tabindex="-1"><a class="header-anchor" href="#reusing-filter-query-logic" aria-hidden="true">#</a> Reusing Filter Query Logic</h3><p>Internally, <code>bot<wbr>.on</code> relies on a function called <code>match<wbr>Filter</code>. It takes a filter query and compiles it down to a predicate function. The predicate is simply passed to <code>bot<wbr>.filter</code> in order to filter for updates.</p><p>You can import <code>match<wbr>Filter</code> directly if you want to use it in your own logic. For example, you can decide to drop all updates that match a certain query:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Drop all text messages or text channel posts.</span>
bot<span class="token punctuation">.</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token function">matchFilter</span><span class="token punctuation">(</span><span class="token string">&quot;:text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Analogously, you can make use of the filter query types that grammY uses internally:</p><h3 id="reusing-filter-query-types" tabindex="-1"><a class="header-anchor" href="#reusing-filter-query-types" aria-hidden="true">#</a> Reusing Filter Query Types</h3><p>Internally, <code>match<wbr>Filter</code> uses TypeScript’s <a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates" target="_blank" rel="noopener noreferrer">type predicates<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> to narrow down the type of <code>ctx</code>. It takes a type <code>C extends Context</code> and a <code>Q extends Filter<wbr>Query</code> and produces <code>ctx is Filter&lt;C<wbr>, Q&gt;</code>. In other words, the <code>Filter</code> type is what you actually receive for your <code>ctx</code> in the middleware.</p><p>You can import <code>Filter</code> directly if you want to use it in your own logic. For example, you can decide to define a handler function that handles specific context objects which were filtered by a filter query:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">handler</span><span class="token punctuation">(</span>ctx<span class="token operator">:</span> Filter<span class="token operator">&lt;</span>Context<span class="token punctuation">,</span> <span class="token string">&quot;:text&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// handle narrowed context object</span>
<span class="token punctuation">}</span>

bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;:text&quot;</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Check out the API references for <a href="https://doc.deno.land/https://deno.land/x/grammy/filter.ts/~/matchFilter" target="_blank" rel="noopener noreferrer"><code>match<wbr>Filter</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, <a href="https://doc.deno.land/https://deno.land/x/grammy/filter.ts/~/Filter" target="_blank" rel="noopener noreferrer"><code>Filter</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, and <a href="https://doc.deno.land/https://deno.land/x/grammy/filter.ts/~/FilterQuery" target="_blank" rel="noopener noreferrer"><code>Filter<wbr>Query</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> to read on.</p></blockquote><h2 id="the-query-language" tabindex="-1"><a class="header-anchor" href="#the-query-language" aria-hidden="true">#</a> The Query Language</h2><blockquote><p>This section is meant for users who want to have a deeper understanding of filter queries in grammY, but it does not contain any knowledge required to create a bot.</p></blockquote><h3 id="query-structure" tabindex="-1"><a class="header-anchor" href="#query-structure" aria-hidden="true">#</a> Query Structure</h3><p>Every query consists of up to three query parts. Depending on how many query parts a query has, we differentiate between L1, L2, and L3 queries, such as <code>&quot;message&quot;</code>, <code>&quot;message:<wbr>entities&quot;</code>, and <code>&quot;message:<wbr>entities:<wbr>url&quot;</code>, respectively.</p><p>The query parts are separated by colons (<code>:</code>). We refer to the part up to the first colon or the end of the query string as the <em>L1 part</em> of a query. We refer to the part from the first colon to the second colon or to the end of the query string as the <em>L2 part</em> of the query. We refer to the part from the second colon to the end of the query string as the <em>L3 part</em> of the query.</p><p>Example:</p><table><thead><tr><th>Filter Query</th><th>L1 part</th><th>L2 part</th><th>L3 part</th></tr></thead><tbody><tr><td><code>&quot;message&quot;</code></td><td><code>&quot;message&quot;</code></td><td><code>undefined</code></td><td><code>undefined</code></td></tr><tr><td><code>&quot;message:<wbr>entities&quot;</code></td><td><code>&quot;message&quot;</code></td><td><code>&quot;entities&quot;</code></td><td><code>undefined</code></td></tr><tr><td><code>&quot;message:<wbr>entities:<wbr>mention&quot;</code></td><td><code>&quot;message&quot;</code></td><td><code>&quot;entities&quot;</code></td><td><code>&quot;mention&quot;</code></td></tr></tbody></table><h3 id="query-validation" tabindex="-1"><a class="header-anchor" href="#query-validation" aria-hidden="true">#</a> Query Validation</h3><p>Even though the type system should catch all invalid filter queries at compile time, grammY also checks all passed filter queries at runtime during setup. Every passed filter query is matched against a validation structure that checks if it is valid. Not only is it good to fail immediately during setup instead of at runtime, it has also happened before that bugs in TypeScript cause serious problems with the sophisticated type inference system that powers filter queries. If this happens again in the future, this will prevent issues that could otherwise occur. In this case, you will be provided with helpful error messages.</p><h3 id="performance" tabindex="-1"><a class="header-anchor" href="#performance" aria-hidden="true">#</a> Performance</h3><p><strong>grammY can check every filter query in (amortized) constant time per update</strong>, independent of the structure of the query or the incoming update.</p><p>The validation of the filter queries happens only once, when the bot is initialized and <code>bot<wbr>.on()</code> is called.</p><p>On start-up, grammY derives a predicate function from the filter query by splitting it into its query parts. Every part will be mapped to a function that performs a single <code>in</code> check, or two checks if the part is omitted and two values need to be checked. These functions are then combined to form a predicate that only has to check for as many values as are relevant for the query, without iterating over the object keys of <code>Update</code>.</p><p>This system uses less operations than some competing libraries, which need to perform containment checks in arrays when routing updates. grammY’s filter query system is much more powerful.</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/grammyjs/website/edit/main/site/docs/guide/filter-queries.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" style=""><!--[--><!--]--> Edit this page on GitHub <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: shtrog@gmail.com">KnorpelSenf</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 55633371+CalsiBotDev@users.noreply.github.com">Calsi</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: ez@roj.im">Roj</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: roj@rojser.best">Roj Serbest</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: roj@rojser.best">Roj</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: git.fytyt@aleeas.com">Ciki Momogi</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: rojserbest@gmail.com">Roj</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/guide/api.html" class="" aria-label="Bot API" style=""><!--[--><!--]--> Bot API <!--v-if--><!--[--><!--]--></a></span><span class="next"><a href="/guide/commands.html" class="" aria-label="Commands" style=""><!--[--><!--]--> Commands <!--v-if--><!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.1137d7ac.js" defer></script>
  </body>
</html>
