<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Middleware | grammY</title><meta name="description" content="The Telegram Bot Framework.">
    <link rel="modulepreload" href="/assets/app.c0ce12a9.js"><link rel="modulepreload" href="/assets/middleware.html.329d7623.js"><link rel="modulepreload" href="/assets/middleware.html.c32c1afb.js"><link rel="prefetch" href="/assets/index.html.0429b483.js"><link rel="prefetch" href="/assets/index.html.2401d292.js"><link rel="prefetch" href="/assets/deployment.html.820945fa.js"><link rel="prefetch" href="/assets/flood.html.064205fe.js"><link rel="prefetch" href="/assets/middleware.html.992dcb0e.js"><link rel="prefetch" href="/assets/proxy.html.c404e72a.js"><link rel="prefetch" href="/assets/reliability.html.5a572dfa.js"><link rel="prefetch" href="/assets/scaling.html.fe634161.js"><link rel="prefetch" href="/assets/structuring.html.1e8ebd48.js"><link rel="prefetch" href="/assets/transformers.html.3e1cae77.js"><link rel="prefetch" href="/assets/index.html.fb39b504.js"><link rel="prefetch" href="/assets/examples.html.4b7b6125.js"><link rel="prefetch" href="/assets/index.html.e45b3ea7.js"><link rel="prefetch" href="/assets/index.html.172886ab.js"><link rel="prefetch" href="/assets/api.html.d34afc0f.js"><link rel="prefetch" href="/assets/basics.html.65923044.js"><link rel="prefetch" href="/assets/commands.html.c2610c77.js"><link rel="prefetch" href="/assets/context.html.d7289dc7.js"><link rel="prefetch" href="/assets/deployment-types.html.346b4d4f.js"><link rel="prefetch" href="/assets/errors.html.d567f2e9.js"><link rel="prefetch" href="/assets/files.html.5df1fdf3.js"><link rel="prefetch" href="/assets/filter-queries.html.ff3c15e1.js"><link rel="prefetch" href="/assets/games.html.ebb92d65.js"><link rel="prefetch" href="/assets/getting-started.html.3aad9f5a.js"><link rel="prefetch" href="/assets/inline-queries.html.9fa5435e.js"><link rel="prefetch" href="/assets/introduction.html.d062e0ed.js"><link rel="prefetch" href="/assets/comparison.html.864b515f.js"><link rel="prefetch" href="/assets/deno-deploy.html.33fda6ac.js"><link rel="prefetch" href="/assets/gcf.html.94978e12.js"><link rel="prefetch" href="/assets/heroku.html.f4861855.js"><link rel="prefetch" href="/assets/supabase.html.f931ecc3.js"><link rel="prefetch" href="/assets/vps.html.f8b61457.js"><link rel="prefetch" href="/assets/index.html.564f39e8.js"><link rel="prefetch" href="/assets/index.html.cc711d93.js"><link rel="prefetch" href="/assets/auto-retry.html.76b5ce1b.js"><link rel="prefetch" href="/assets/autoquote.html.f8611f7b.js"><link rel="prefetch" href="/assets/command-filter.html.12deb6e8.js"><link rel="prefetch" href="/assets/console-time.html.bbb18311.js"><link rel="prefetch" href="/assets/conversations.html.542d4ede.js"><link rel="prefetch" href="/assets/emoji.html.96b685bd.js"><link rel="prefetch" href="/assets/files.html.59f0953c.js"><link rel="prefetch" href="/assets/fluent.html.93e75a53.js"><link rel="prefetch" href="/assets/guide.html.4a675f4a.js"><link rel="prefetch" href="/assets/hydrate.html.4d6c9f6e.js"><link rel="prefetch" href="/assets/i18n.html.b886c9b6.js"><link rel="prefetch" href="/assets/keyboard.html.5d3ef392.js"><link rel="prefetch" href="/assets/menu.html.97fd78f5.js"><link rel="prefetch" href="/assets/middlewares.html.4527fc91.js"><link rel="prefetch" href="/assets/parse-mode.html.5fea1fba.js"><link rel="prefetch" href="/assets/ratelimiter.html.09dbf6ad.js"><link rel="prefetch" href="/assets/router.html.02606ebd.js"><link rel="prefetch" href="/assets/runner.html.fb3b00e6.js"><link rel="prefetch" href="/assets/session.html.a3ebd553.js"><link rel="prefetch" href="/assets/stateless-question.html.acdd39e3.js"><link rel="prefetch" href="/assets/transformer-throttler.html.009b0e9c.js"><link rel="prefetch" href="/assets/about.html.e9ce3575.js"><link rel="prefetch" href="/assets/comparison.html.5589e0a7.js"><link rel="prefetch" href="/assets/faq.html.4a46d2bc.js"><link rel="prefetch" href="/assets/index.html.0ea21131.js"><link rel="prefetch" href="/assets/deployment.html.947cfd03.js"><link rel="prefetch" href="/assets/flood.html.adb704f3.js"><link rel="prefetch" href="/assets/middleware.html.62700685.js"><link rel="prefetch" href="/assets/proxy.html.d9e32858.js"><link rel="prefetch" href="/assets/reliability.html.214116d2.js"><link rel="prefetch" href="/assets/scaling.html.17ebd1a5.js"><link rel="prefetch" href="/assets/structuring.html.b2cc831f.js"><link rel="prefetch" href="/assets/transformers.html.0d715264.js"><link rel="prefetch" href="/assets/index.html.655275db.js"><link rel="prefetch" href="/assets/examples.html.4da510e2.js"><link rel="prefetch" href="/assets/index.html.b68e7c4e.js"><link rel="prefetch" href="/assets/api.html.864221a5.js"><link rel="prefetch" href="/assets/basics.html.d83b67aa.js"><link rel="prefetch" href="/assets/commands.html.0c654628.js"><link rel="prefetch" href="/assets/context.html.684cfc10.js"><link rel="prefetch" href="/assets/deployment-types.html.66bb2eb6.js"><link rel="prefetch" href="/assets/errors.html.3bd197a1.js"><link rel="prefetch" href="/assets/files.html.b3f5719d.js"><link rel="prefetch" href="/assets/filter-queries.html.2fc848b9.js"><link rel="prefetch" href="/assets/games.html.ed2eeb11.js"><link rel="prefetch" href="/assets/getting-started.html.bee7700c.js"><link rel="prefetch" href="/assets/inline-queries.html.3dd234a2.js"><link rel="prefetch" href="/assets/introduction.html.2c38a111.js"><link rel="prefetch" href="/assets/middleware.html.956472a4.js"><link rel="prefetch" href="/assets/comparison.html.62a530ba.js"><link rel="prefetch" href="/assets/deno-deploy.html.9ad88492.js"><link rel="prefetch" href="/assets/gcf.html.dbb08649.js"><link rel="prefetch" href="/assets/heroku.html.1a7f1f38.js"><link rel="prefetch" href="/assets/supabase.html.4ce4dd3e.js"><link rel="prefetch" href="/assets/vps.html.7964c3ff.js"><link rel="prefetch" href="/assets/index.html.8d516f91.js"><link rel="prefetch" href="/assets/index.html.d277051d.js"><link rel="prefetch" href="/assets/auto-retry.html.627c099e.js"><link rel="prefetch" href="/assets/autoquote.html.931147c8.js"><link rel="prefetch" href="/assets/command-filter.html.24250ac2.js"><link rel="prefetch" href="/assets/console-time.html.c602475c.js"><link rel="prefetch" href="/assets/conversations.html.34bdf713.js"><link rel="prefetch" href="/assets/emoji.html.4340fe04.js"><link rel="prefetch" href="/assets/files.html.0ce1beed.js"><link rel="prefetch" href="/assets/fluent.html.2312cffa.js"><link rel="prefetch" href="/assets/guide.html.cdc01534.js"><link rel="prefetch" href="/assets/hydrate.html.e78bac27.js"><link rel="prefetch" href="/assets/i18n.html.7a67a704.js"><link rel="prefetch" href="/assets/keyboard.html.6c1187da.js"><link rel="prefetch" href="/assets/menu.html.2390f9b0.js"><link rel="prefetch" href="/assets/middlewares.html.8fb2b4c6.js"><link rel="prefetch" href="/assets/parse-mode.html.6084b065.js"><link rel="prefetch" href="/assets/ratelimiter.html.e9ab9086.js"><link rel="prefetch" href="/assets/router.html.49ad6cc8.js"><link rel="prefetch" href="/assets/runner.html.2e392816.js"><link rel="prefetch" href="/assets/session.html.bc00753b.js"><link rel="prefetch" href="/assets/stateless-question.html.840ef874.js"><link rel="prefetch" href="/assets/transformer-throttler.html.a0519c22.js"><link rel="prefetch" href="/assets/about.html.6acc59e5.js"><link rel="prefetch" href="/assets/comparison.html.19d2b82f.js"><link rel="prefetch" href="/assets/faq.html.525026ef.js"><link rel="prefetch" href="/assets/index.html.c671af3a.js"><link rel="prefetch" href="/assets/deployment.html.890ba700.js"><link rel="prefetch" href="/assets/flood.html.99fc87f0.js"><link rel="prefetch" href="/assets/middleware.html.93e739dc.js"><link rel="prefetch" href="/assets/proxy.html.a206407d.js"><link rel="prefetch" href="/assets/reliability.html.77f11b74.js"><link rel="prefetch" href="/assets/scaling.html.b0186def.js"><link rel="prefetch" href="/assets/structuring.html.431bf13f.js"><link rel="prefetch" href="/assets/transformers.html.76eb6336.js"><link rel="prefetch" href="/assets/index.html.629ca643.js"><link rel="prefetch" href="/assets/examples.html.cea54aec.js"><link rel="prefetch" href="/assets/index.html.374cf0b5.js"><link rel="prefetch" href="/assets/api.html.a789ac69.js"><link rel="prefetch" href="/assets/basics.html.a5f54cb2.js"><link rel="prefetch" href="/assets/commands.html.f5bc337a.js"><link rel="prefetch" href="/assets/context.html.e94c9f2e.js"><link rel="prefetch" href="/assets/deployment-types.html.d3d220f8.js"><link rel="prefetch" href="/assets/errors.html.cb531b7a.js"><link rel="prefetch" href="/assets/files.html.1cbd9c21.js"><link rel="prefetch" href="/assets/filter-queries.html.18865e77.js"><link rel="prefetch" href="/assets/games.html.019dc6f4.js"><link rel="prefetch" href="/assets/getting-started.html.cdb13cc0.js"><link rel="prefetch" href="/assets/inline-queries.html.02267dd2.js"><link rel="prefetch" href="/assets/introduction.html.e8487eb7.js"><link rel="prefetch" href="/assets/middleware.html.beeb4db0.js"><link rel="prefetch" href="/assets/comparison.html.ece5207a.js"><link rel="prefetch" href="/assets/deno-deploy.html.8cd18a25.js"><link rel="prefetch" href="/assets/gcf.html.bf1ad988.js"><link rel="prefetch" href="/assets/heroku.html.200ca6ee.js"><link rel="prefetch" href="/assets/supabase.html.aca1ac1d.js"><link rel="prefetch" href="/assets/vps.html.40de5172.js"><link rel="prefetch" href="/assets/index.html.567ecd8c.js"><link rel="prefetch" href="/assets/auto-retry.html.be745936.js"><link rel="prefetch" href="/assets/autoquote.html.5c46e2d3.js"><link rel="prefetch" href="/assets/command-filter.html.fa1f4413.js"><link rel="prefetch" href="/assets/console-time.html.0d2bc762.js"><link rel="prefetch" href="/assets/conversations.html.778561d7.js"><link rel="prefetch" href="/assets/emoji.html.601be2b6.js"><link rel="prefetch" href="/assets/files.html.13f0053f.js"><link rel="prefetch" href="/assets/fluent.html.47d160d5.js"><link rel="prefetch" href="/assets/guide.html.381a5a51.js"><link rel="prefetch" href="/assets/hydrate.html.426ed716.js"><link rel="prefetch" href="/assets/i18n.html.afb30866.js"><link rel="prefetch" href="/assets/keyboard.html.19037e93.js"><link rel="prefetch" href="/assets/menu.html.e70d11ec.js"><link rel="prefetch" href="/assets/middlewares.html.5bc684e5.js"><link rel="prefetch" href="/assets/parse-mode.html.0e2027aa.js"><link rel="prefetch" href="/assets/ratelimiter.html.f1aaea8c.js"><link rel="prefetch" href="/assets/router.html.1476dda9.js"><link rel="prefetch" href="/assets/runner.html.ce50a49c.js"><link rel="prefetch" href="/assets/session.html.fe8e3213.js"><link rel="prefetch" href="/assets/stateless-question.html.b8a43883.js"><link rel="prefetch" href="/assets/transformer-throttler.html.45a66fc5.js"><link rel="prefetch" href="/assets/about.html.4abcfa07.js"><link rel="prefetch" href="/assets/comparison.html.8ed17bd9.js"><link rel="prefetch" href="/assets/faq.html.0dd6c2c4.js"><link rel="prefetch" href="/assets/index.html.45898178.js"><link rel="prefetch" href="/assets/deployment.html.75afc00d.js"><link rel="prefetch" href="/assets/flood.html.71e88b3b.js"><link rel="prefetch" href="/assets/middleware.html.afa5db3b.js"><link rel="prefetch" href="/assets/proxy.html.b70254e4.js"><link rel="prefetch" href="/assets/reliability.html.2858f460.js"><link rel="prefetch" href="/assets/scaling.html.ae951df2.js"><link rel="prefetch" href="/assets/structuring.html.d2ff17dd.js"><link rel="prefetch" href="/assets/transformers.html.6f5b57b6.js"><link rel="prefetch" href="/assets/index.html.9de295a7.js"><link rel="prefetch" href="/assets/api.html.8ed7866f.js"><link rel="prefetch" href="/assets/basics.html.7afbeb28.js"><link rel="prefetch" href="/assets/commands.html.131d044b.js"><link rel="prefetch" href="/assets/context.html.f1f04579.js"><link rel="prefetch" href="/assets/deployment-types.html.6efb3c25.js"><link rel="prefetch" href="/assets/errors.html.0c95dbb6.js"><link rel="prefetch" href="/assets/files.html.c53a8155.js"><link rel="prefetch" href="/assets/filter-queries.html.dab2ea34.js"><link rel="prefetch" href="/assets/games.html.60a32e8c.js"><link rel="prefetch" href="/assets/getting-started.html.7d3308dc.js"><link rel="prefetch" href="/assets/inline-queries.html.c644e6f2.js"><link rel="prefetch" href="/assets/introduction.html.2b2e7021.js"><link rel="prefetch" href="/assets/middleware.html.8e8a095a.js"><link rel="prefetch" href="/assets/comparison.html.65d3d0d9.js"><link rel="prefetch" href="/assets/deno-deploy.html.b3d0c42c.js"><link rel="prefetch" href="/assets/gcf.html.8a35f9f5.js"><link rel="prefetch" href="/assets/heroku.html.8ba42f90.js"><link rel="prefetch" href="/assets/supabase.html.ee2b455f.js"><link rel="prefetch" href="/assets/vps.html.6fe75bcb.js"><link rel="prefetch" href="/assets/index.html.f9a366b7.js"><link rel="prefetch" href="/assets/auto-retry.html.e870a1fc.js"><link rel="prefetch" href="/assets/autoquote.html.afc82797.js"><link rel="prefetch" href="/assets/command-filter.html.d5692cab.js"><link rel="prefetch" href="/assets/console-time.html.a509e6b6.js"><link rel="prefetch" href="/assets/conversations.html.c2a1214f.js"><link rel="prefetch" href="/assets/emoji.html.346d49b0.js"><link rel="prefetch" href="/assets/files.html.97985794.js"><link rel="prefetch" href="/assets/fluent.html.497a7165.js"><link rel="prefetch" href="/assets/guide.html.6086fd79.js"><link rel="prefetch" href="/assets/hydrate.html.f3bc28bb.js"><link rel="prefetch" href="/assets/i18n.html.42762cf9.js"><link rel="prefetch" href="/assets/keyboard.html.9ccac385.js"><link rel="prefetch" href="/assets/menu.html.05b22f9d.js"><link rel="prefetch" href="/assets/middlewares.html.b0d76949.js"><link rel="prefetch" href="/assets/parse-mode.html.377b539d.js"><link rel="prefetch" href="/assets/ratelimiter.html.f7e73ee7.js"><link rel="prefetch" href="/assets/router.html.401950f2.js"><link rel="prefetch" href="/assets/runner.html.da15a490.js"><link rel="prefetch" href="/assets/session.html.79028198.js"><link rel="prefetch" href="/assets/stateless-question.html.e542bb65.js"><link rel="prefetch" href="/assets/transformer-throttler.html.7d448db6.js"><link rel="prefetch" href="/assets/index.html.74522b16.js"><link rel="prefetch" href="/assets/examples.html.24e682eb.js"><link rel="prefetch" href="/assets/about.html.41287b90.js"><link rel="prefetch" href="/assets/comparison.html.162bdf02.js"><link rel="prefetch" href="/assets/faq.html.abba6af1.js"><link rel="prefetch" href="/assets/404.html.d2dc3323.js"><link rel="prefetch" href="/assets/index.html.261d2312.js"><link rel="prefetch" href="/assets/index.html.c6a3ffe8.js"><link rel="prefetch" href="/assets/deployment.html.7151ca86.js"><link rel="prefetch" href="/assets/flood.html.393c1930.js"><link rel="prefetch" href="/assets/middleware.html.99e4de8b.js"><link rel="prefetch" href="/assets/proxy.html.cf60efbb.js"><link rel="prefetch" href="/assets/reliability.html.7968704d.js"><link rel="prefetch" href="/assets/scaling.html.5bd68d64.js"><link rel="prefetch" href="/assets/structuring.html.9bd223c3.js"><link rel="prefetch" href="/assets/transformers.html.f3eadea2.js"><link rel="prefetch" href="/assets/index.html.162e67ba.js"><link rel="prefetch" href="/assets/examples.html.d63e2242.js"><link rel="prefetch" href="/assets/index.html.f6422c94.js"><link rel="prefetch" href="/assets/index.html.2402c31a.js"><link rel="prefetch" href="/assets/api.html.c80af885.js"><link rel="prefetch" href="/assets/basics.html.c8d6fc5d.js"><link rel="prefetch" href="/assets/commands.html.ee466c72.js"><link rel="prefetch" href="/assets/context.html.391383e4.js"><link rel="prefetch" href="/assets/deployment-types.html.ef3d585a.js"><link rel="prefetch" href="/assets/errors.html.2403d6c4.js"><link rel="prefetch" href="/assets/files.html.8fd0ca17.js"><link rel="prefetch" href="/assets/filter-queries.html.cbe6a1db.js"><link rel="prefetch" href="/assets/games.html.2c2392ea.js"><link rel="prefetch" href="/assets/getting-started.html.4d907ce7.js"><link rel="prefetch" href="/assets/inline-queries.html.5ed39109.js"><link rel="prefetch" href="/assets/introduction.html.e09e0098.js"><link rel="prefetch" href="/assets/comparison.html.dc6a9577.js"><link rel="prefetch" href="/assets/deno-deploy.html.837681c3.js"><link rel="prefetch" href="/assets/gcf.html.28da8373.js"><link rel="prefetch" href="/assets/heroku.html.a4ef443e.js"><link rel="prefetch" href="/assets/supabase.html.f51b61ee.js"><link rel="prefetch" href="/assets/vps.html.e5675306.js"><link rel="prefetch" href="/assets/index.html.52d84610.js"><link rel="prefetch" href="/assets/index.html.6eec12c1.js"><link rel="prefetch" href="/assets/auto-retry.html.d31618a8.js"><link rel="prefetch" href="/assets/autoquote.html.35df877d.js"><link rel="prefetch" href="/assets/command-filter.html.70048e1b.js"><link rel="prefetch" href="/assets/console-time.html.c0b716e4.js"><link rel="prefetch" href="/assets/conversations.html.4dfadd3c.js"><link rel="prefetch" href="/assets/emoji.html.3d26048e.js"><link rel="prefetch" href="/assets/files.html.dfe3fc94.js"><link rel="prefetch" href="/assets/fluent.html.9201e438.js"><link rel="prefetch" href="/assets/guide.html.02b5d9a7.js"><link rel="prefetch" href="/assets/hydrate.html.e4aff878.js"><link rel="prefetch" href="/assets/i18n.html.8e12b9d9.js"><link rel="prefetch" href="/assets/keyboard.html.4df38a2d.js"><link rel="prefetch" href="/assets/menu.html.a7685500.js"><link rel="prefetch" href="/assets/middlewares.html.2dcdaaea.js"><link rel="prefetch" href="/assets/parse-mode.html.a92370cb.js"><link rel="prefetch" href="/assets/ratelimiter.html.af8a5803.js"><link rel="prefetch" href="/assets/router.html.05eacb33.js"><link rel="prefetch" href="/assets/runner.html.d0b0b592.js"><link rel="prefetch" href="/assets/session.html.7ea4da95.js"><link rel="prefetch" href="/assets/stateless-question.html.1c2565fc.js"><link rel="prefetch" href="/assets/transformer-throttler.html.d5c3b607.js"><link rel="prefetch" href="/assets/about.html.afc7f2b9.js"><link rel="prefetch" href="/assets/comparison.html.3ec211b7.js"><link rel="prefetch" href="/assets/faq.html.463d8d00.js"><link rel="prefetch" href="/assets/index.html.546e3e91.js"><link rel="prefetch" href="/assets/deployment.html.2a0741d8.js"><link rel="prefetch" href="/assets/flood.html.cb61cabe.js"><link rel="prefetch" href="/assets/middleware.html.125ecec8.js"><link rel="prefetch" href="/assets/proxy.html.109417f7.js"><link rel="prefetch" href="/assets/reliability.html.49f3e680.js"><link rel="prefetch" href="/assets/scaling.html.ca58e276.js"><link rel="prefetch" href="/assets/structuring.html.2305d444.js"><link rel="prefetch" href="/assets/transformers.html.12ea6753.js"><link rel="prefetch" href="/assets/index.html.3112f342.js"><link rel="prefetch" href="/assets/examples.html.45fdc3f1.js"><link rel="prefetch" href="/assets/index.html.3ed69fd3.js"><link rel="prefetch" href="/assets/api.html.f1ba0228.js"><link rel="prefetch" href="/assets/basics.html.4310f68f.js"><link rel="prefetch" href="/assets/commands.html.84e57d0e.js"><link rel="prefetch" href="/assets/context.html.d7789dfe.js"><link rel="prefetch" href="/assets/deployment-types.html.6c21247b.js"><link rel="prefetch" href="/assets/errors.html.cc622623.js"><link rel="prefetch" href="/assets/files.html.72fb391b.js"><link rel="prefetch" href="/assets/filter-queries.html.1a2c4e1a.js"><link rel="prefetch" href="/assets/games.html.8a6d17a8.js"><link rel="prefetch" href="/assets/getting-started.html.e2b169a3.js"><link rel="prefetch" href="/assets/inline-queries.html.f952bda9.js"><link rel="prefetch" href="/assets/introduction.html.318b7a04.js"><link rel="prefetch" href="/assets/middleware.html.97907d70.js"><link rel="prefetch" href="/assets/comparison.html.a560641e.js"><link rel="prefetch" href="/assets/deno-deploy.html.71473840.js"><link rel="prefetch" href="/assets/gcf.html.ec734f5a.js"><link rel="prefetch" href="/assets/heroku.html.8ad8c73a.js"><link rel="prefetch" href="/assets/supabase.html.d59ae726.js"><link rel="prefetch" href="/assets/vps.html.b4711111.js"><link rel="prefetch" href="/assets/index.html.ecd416b8.js"><link rel="prefetch" href="/assets/index.html.2879350d.js"><link rel="prefetch" href="/assets/auto-retry.html.178e0040.js"><link rel="prefetch" href="/assets/autoquote.html.47775b73.js"><link rel="prefetch" href="/assets/command-filter.html.132e8d36.js"><link rel="prefetch" href="/assets/console-time.html.64d2da14.js"><link rel="prefetch" href="/assets/conversations.html.ed553f23.js"><link rel="prefetch" href="/assets/emoji.html.88cb8392.js"><link rel="prefetch" href="/assets/files.html.af4322b2.js"><link rel="prefetch" href="/assets/fluent.html.9ad15d81.js"><link rel="prefetch" href="/assets/guide.html.4a7c70b6.js"><link rel="prefetch" href="/assets/hydrate.html.46745fd7.js"><link rel="prefetch" href="/assets/i18n.html.ae95be1a.js"><link rel="prefetch" href="/assets/keyboard.html.2fef11c6.js"><link rel="prefetch" href="/assets/menu.html.e42f884a.js"><link rel="prefetch" href="/assets/middlewares.html.9c53ae16.js"><link rel="prefetch" href="/assets/parse-mode.html.9f2b61f4.js"><link rel="prefetch" href="/assets/ratelimiter.html.869918ae.js"><link rel="prefetch" href="/assets/router.html.2c6cc617.js"><link rel="prefetch" href="/assets/runner.html.bd6673b1.js"><link rel="prefetch" href="/assets/session.html.96e7d1fc.js"><link rel="prefetch" href="/assets/stateless-question.html.0925c69d.js"><link rel="prefetch" href="/assets/transformer-throttler.html.42d19be4.js"><link rel="prefetch" href="/assets/about.html.6b2f309d.js"><link rel="prefetch" href="/assets/comparison.html.aba44cac.js"><link rel="prefetch" href="/assets/faq.html.dae1534c.js"><link rel="prefetch" href="/assets/index.html.d80ae959.js"><link rel="prefetch" href="/assets/deployment.html.96343e79.js"><link rel="prefetch" href="/assets/flood.html.2e21db47.js"><link rel="prefetch" href="/assets/middleware.html.0e556b07.js"><link rel="prefetch" href="/assets/proxy.html.1da3cfd2.js"><link rel="prefetch" href="/assets/reliability.html.4bcd136f.js"><link rel="prefetch" href="/assets/scaling.html.8ed6565f.js"><link rel="prefetch" href="/assets/structuring.html.f4d7374b.js"><link rel="prefetch" href="/assets/transformers.html.e8c16bc8.js"><link rel="prefetch" href="/assets/index.html.2d7188cc.js"><link rel="prefetch" href="/assets/examples.html.a203c0a9.js"><link rel="prefetch" href="/assets/index.html.0706696f.js"><link rel="prefetch" href="/assets/api.html.2e159223.js"><link rel="prefetch" href="/assets/basics.html.f068f976.js"><link rel="prefetch" href="/assets/commands.html.1f28cb61.js"><link rel="prefetch" href="/assets/context.html.54a40f86.js"><link rel="prefetch" href="/assets/deployment-types.html.e289bfc6.js"><link rel="prefetch" href="/assets/errors.html.ed2a85c2.js"><link rel="prefetch" href="/assets/files.html.0b47bf54.js"><link rel="prefetch" href="/assets/filter-queries.html.59e8d8ff.js"><link rel="prefetch" href="/assets/games.html.4a1e3b63.js"><link rel="prefetch" href="/assets/getting-started.html.c334f2df.js"><link rel="prefetch" href="/assets/inline-queries.html.5aa0ef01.js"><link rel="prefetch" href="/assets/introduction.html.69308b43.js"><link rel="prefetch" href="/assets/middleware.html.9d1544d1.js"><link rel="prefetch" href="/assets/comparison.html.96919197.js"><link rel="prefetch" href="/assets/deno-deploy.html.a67d4f91.js"><link rel="prefetch" href="/assets/gcf.html.5e18baf7.js"><link rel="prefetch" href="/assets/heroku.html.03f2aafc.js"><link rel="prefetch" href="/assets/supabase.html.ede22f43.js"><link rel="prefetch" href="/assets/vps.html.e818518a.js"><link rel="prefetch" href="/assets/index.html.61e5f2a5.js"><link rel="prefetch" href="/assets/auto-retry.html.f60fe547.js"><link rel="prefetch" href="/assets/autoquote.html.265cdaf7.js"><link rel="prefetch" href="/assets/command-filter.html.cd70a216.js"><link rel="prefetch" href="/assets/console-time.html.1a7d53f4.js"><link rel="prefetch" href="/assets/conversations.html.8139cc5c.js"><link rel="prefetch" href="/assets/emoji.html.c380b503.js"><link rel="prefetch" href="/assets/files.html.00fabeea.js"><link rel="prefetch" href="/assets/fluent.html.595eddde.js"><link rel="prefetch" href="/assets/guide.html.ad4ef413.js"><link rel="prefetch" href="/assets/hydrate.html.475a031f.js"><link rel="prefetch" href="/assets/i18n.html.c13ee133.js"><link rel="prefetch" href="/assets/keyboard.html.f5e3d501.js"><link rel="prefetch" href="/assets/menu.html.d838226d.js"><link rel="prefetch" href="/assets/middlewares.html.8606c87d.js"><link rel="prefetch" href="/assets/parse-mode.html.11a9e948.js"><link rel="prefetch" href="/assets/ratelimiter.html.eb7c0a63.js"><link rel="prefetch" href="/assets/router.html.353e7698.js"><link rel="prefetch" href="/assets/runner.html.ee978bba.js"><link rel="prefetch" href="/assets/session.html.047064da.js"><link rel="prefetch" href="/assets/stateless-question.html.373aa629.js"><link rel="prefetch" href="/assets/transformer-throttler.html.f62d94ed.js"><link rel="prefetch" href="/assets/about.html.7e63e43b.js"><link rel="prefetch" href="/assets/comparison.html.ccfaae5b.js"><link rel="prefetch" href="/assets/faq.html.3836659b.js"><link rel="prefetch" href="/assets/index.html.781164fa.js"><link rel="prefetch" href="/assets/deployment.html.49b7dcc1.js"><link rel="prefetch" href="/assets/flood.html.63e310dc.js"><link rel="prefetch" href="/assets/middleware.html.d11a1785.js"><link rel="prefetch" href="/assets/proxy.html.66cbbabd.js"><link rel="prefetch" href="/assets/reliability.html.650afc8a.js"><link rel="prefetch" href="/assets/scaling.html.25b4b778.js"><link rel="prefetch" href="/assets/structuring.html.e1f83268.js"><link rel="prefetch" href="/assets/transformers.html.1f86d607.js"><link rel="prefetch" href="/assets/index.html.dddfbba3.js"><link rel="prefetch" href="/assets/api.html.8c5dc0ff.js"><link rel="prefetch" href="/assets/basics.html.0322dc99.js"><link rel="prefetch" href="/assets/commands.html.efaa3b56.js"><link rel="prefetch" href="/assets/context.html.ee418c28.js"><link rel="prefetch" href="/assets/deployment-types.html.3962672c.js"><link rel="prefetch" href="/assets/errors.html.71b866f9.js"><link rel="prefetch" href="/assets/files.html.d7899d53.js"><link rel="prefetch" href="/assets/filter-queries.html.8ed7b092.js"><link rel="prefetch" href="/assets/games.html.4922f188.js"><link rel="prefetch" href="/assets/getting-started.html.989b26b0.js"><link rel="prefetch" href="/assets/inline-queries.html.d6fe7ab0.js"><link rel="prefetch" href="/assets/introduction.html.56958c44.js"><link rel="prefetch" href="/assets/middleware.html.28de1adf.js"><link rel="prefetch" href="/assets/comparison.html.13c8bbc2.js"><link rel="prefetch" href="/assets/deno-deploy.html.5d8477eb.js"><link rel="prefetch" href="/assets/gcf.html.f53cca31.js"><link rel="prefetch" href="/assets/heroku.html.3ebeca33.js"><link rel="prefetch" href="/assets/supabase.html.6d68ad78.js"><link rel="prefetch" href="/assets/vps.html.95597e5b.js"><link rel="prefetch" href="/assets/index.html.6463945e.js"><link rel="prefetch" href="/assets/auto-retry.html.5dc1b427.js"><link rel="prefetch" href="/assets/autoquote.html.70a8dd54.js"><link rel="prefetch" href="/assets/command-filter.html.6829bfeb.js"><link rel="prefetch" href="/assets/console-time.html.6370f294.js"><link rel="prefetch" href="/assets/conversations.html.c7a0da18.js"><link rel="prefetch" href="/assets/emoji.html.28219a58.js"><link rel="prefetch" href="/assets/files.html.49a809c7.js"><link rel="prefetch" href="/assets/fluent.html.ba980f1c.js"><link rel="prefetch" href="/assets/guide.html.a0eebcba.js"><link rel="prefetch" href="/assets/hydrate.html.35be5207.js"><link rel="prefetch" href="/assets/i18n.html.9febe68b.js"><link rel="prefetch" href="/assets/keyboard.html.c6726126.js"><link rel="prefetch" href="/assets/menu.html.ca21b297.js"><link rel="prefetch" href="/assets/middlewares.html.f8fe3201.js"><link rel="prefetch" href="/assets/parse-mode.html.f93e3d78.js"><link rel="prefetch" href="/assets/ratelimiter.html.ce348cec.js"><link rel="prefetch" href="/assets/router.html.1ec519db.js"><link rel="prefetch" href="/assets/runner.html.1c5e23e5.js"><link rel="prefetch" href="/assets/session.html.501ee523.js"><link rel="prefetch" href="/assets/stateless-question.html.204b6645.js"><link rel="prefetch" href="/assets/transformer-throttler.html.03e266da.js"><link rel="prefetch" href="/assets/index.html.4ea5a85e.js"><link rel="prefetch" href="/assets/examples.html.441664da.js"><link rel="prefetch" href="/assets/about.html.8d4cc126.js"><link rel="prefetch" href="/assets/comparison.html.cc9f2a59.js"><link rel="prefetch" href="/assets/faq.html.80e57077.js"><link rel="prefetch" href="/assets/404.html.d02fd22e.js">
    <link rel="stylesheet" href="/assets/style.c0c73a0d.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/Y.png" alt="grammY"><span class="site-name can-hide">grammY</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/guide/" class="router-link-active" aria-label="Guide" style=""><!--[--><!--]--> Guide <!--v-if--><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Learn"><span class="title">Learn</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Learn"><span class="title">Learn</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Guide</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/guide/" class="" aria-label="Overview" style="display:inline-flex;"><!--[--><!--]--> Overview <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/introduction.html" class="" aria-label="Introduction" style="display:inline-flex;"><!--[--><!--]--> Introduction <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/getting-started.html" class="" aria-label="Getting Started" style="display:inline-flex;"><!--[--><!--]--> Getting Started <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/basics.html" class="" aria-label="Sending and Receiving Messages" style="display:inline-flex;"><!--[--><!--]--> Sending and Receiving Messages <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/context.html" class="" aria-label="Context" style="display:inline-flex;"><!--[--><!--]--> Context <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/api.html" class="" aria-label="Bot API" style="display:inline-flex;"><!--[--><!--]--> Bot API <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/filter-queries.html" class="" aria-label="Filter Queries and bot.on()" style="display:inline-flex;"><!--[--><!--]--> Filter Queries and bot.on() <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/commands.html" class="" aria-label="Commands" style="display:inline-flex;"><!--[--><!--]--> Commands <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/guide/middleware.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Middleware" style="display:inline-flex;"><!--[--><!--]--> Middleware <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/errors.html" class="" aria-label="Error Handling" style="display:inline-flex;"><!--[--><!--]--> Error Handling <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/inline-queries.html" class="" aria-label="Inline Queries" style="display:inline-flex;"><!--[--><!--]--> Inline Queries <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/files.html" class="" aria-label="File Handling" style="display:inline-flex;"><!--[--><!--]--> File Handling <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/games.html" class="" aria-label="Games" style="display:inline-flex;"><!--[--><!--]--> Games <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/deployment-types.html" class="" aria-label="Long Polling vs. Webhooks" style="display:inline-flex;"><!--[--><!--]--> Long Polling vs. Webhooks <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Advanced</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/advanced/" class="" aria-label="Overview" style="display:inline-flex;"><!--[--><!--]--> Overview <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/middleware.html" class="" aria-label="Middleware Redux" style="display:inline-flex;"><!--[--><!--]--> Middleware Redux <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/structuring.html" class="" aria-label="Scaling Up I: Large Codebase" style="display:inline-flex;"><!--[--><!--]--> Scaling Up I: Large Codebase <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/scaling.html" class="" aria-label="Scaling Up II: High Load" style="display:inline-flex;"><!--[--><!--]--> Scaling Up II: High Load <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/reliability.html" class="" aria-label="Scaling Up III: Reliability" style="display:inline-flex;"><!--[--><!--]--> Scaling Up III: Reliability <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/flood.html" class="" aria-label="Scaling Up IV: Flood Limits" style="display:inline-flex;"><!--[--><!--]--> Scaling Up IV: Flood Limits <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/transformers.html" class="" aria-label="Bot API Transformers" style="display:inline-flex;"><!--[--><!--]--> Bot API Transformers <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/proxy.html" class="" aria-label="Proxy Support" style="display:inline-flex;"><!--[--><!--]--> Proxy Support <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/deployment.html" class="" aria-label="Deployment Checklist" style="display:inline-flex;"><!--[--><!--]--> Deployment Checklist <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Plugins"><span class="title">Plugins</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Plugins"><span class="title">Plugins</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Introduction</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/" class="" aria-label="About Plugins" style="display:inline-flex;"><!--[--><!--]--> About Plugins <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/guide.html" class="" aria-label="How to Write a Plugin" style="display:inline-flex;"><!--[--><!--]--> How to Write a Plugin <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Built-in</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/session.html" class="" aria-label="Sessions and Storing Data" style="display:inline-flex;"><!--[--><!--]--> Sessions and Storing Data <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/keyboard.html" class="" aria-label="Inline and Custom Keyboards" style="display:inline-flex;"><!--[--><!--]--> Inline and Custom Keyboards <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Official</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/conversations.html" class="" aria-label="Conversations (conversations)" style="display:inline-flex;"><!--[--><!--]--> Conversations (conversations) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/menu.html" class="" aria-label="Interactive Menus (menu)" style="display:inline-flex;"><!--[--><!--]--> Interactive Menus (menu) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/stateless-question.html" class="" aria-label="Stateless Question (stateless-question)" style="display:inline-flex;"><!--[--><!--]--> Stateless Question (stateless-question) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/runner.html" class="" aria-label="Concurrency (runner)" style="display:inline-flex;"><!--[--><!--]--> Concurrency (runner) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/hydrate.html" class="" aria-label="Hydration (hydrate)" style="display:inline-flex;"><!--[--><!--]--> Hydration (hydrate) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/auto-retry.html" class="" aria-label="Retry API Requests (auto-retry)" style="display:inline-flex;"><!--[--><!--]--> Retry API Requests (auto-retry) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/transformer-throttler.html" class="" aria-label="Flood Control (transformer-throttler)" style="display:inline-flex;"><!--[--><!--]--> Flood Control (transformer-throttler) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/ratelimiter.html" class="" aria-label="Rate Limit Users (ratelimiter)" style="display:inline-flex;"><!--[--><!--]--> Rate Limit Users (ratelimiter) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/files.html" class="" aria-label="Files (files)" style="display:inline-flex;"><!--[--><!--]--> Files (files) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/i18n.html" class="" aria-label="Internationalization (i18n)" style="display:inline-flex;"><!--[--><!--]--> Internationalization (i18n) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/fluent.html" class="" aria-label="Internationalization (fluent)" style="display:inline-flex;"><!--[--><!--]--> Internationalization (fluent) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/router.html" class="" aria-label="Router (router)" style="display:inline-flex;"><!--[--><!--]--> Router (router) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/emoji.html" class="" aria-label="Emoji (emoji)" style="display:inline-flex;"><!--[--><!--]--> Emoji (emoji) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/parse-mode.html" class="" aria-label="Parse Mode (parse-mode)" style="display:inline-flex;"><!--[--><!--]--> Parse Mode (parse-mode) <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Third-party</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/console-time.html" class="" aria-label="Console Time" style="display:inline-flex;"><!--[--><!--]--> Console Time <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/middlewares.html" class="" aria-label="Useful Middleware" style="display:inline-flex;"><!--[--><!--]--> Useful Middleware <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/autoquote.html" class="" aria-label="Autoquote" style="display:inline-flex;"><!--[--><!--]--> Autoquote <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/#create-your-own-plugins" class="" aria-label="[Submit your PR!]" style="display:inline-flex;"><!--[--><!--]--> [Submit your PR!] <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Examples"><span class="title">Examples</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Examples"><span class="title">Examples</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Examples</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/awesome-grammY" rel="noopener noreferrer" target="_blank" aria-label="Awesome grammY" style="display:inline-flex;"><!--[--><!--]--> Awesome grammY <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/examples" rel="noopener noreferrer" target="_blank" aria-label="Example Bots Repository" style="display:inline-flex;"><!--[--><!--]--> Example Bots Repository <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Resources"><span class="title">Resources</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Resources"><span class="title">Resources</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>grammY</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/resources/about.html" class="" aria-label="About grammY" style="display:inline-flex;"><!--[--><!--]--> About grammY <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs" rel="noopener noreferrer" target="_blank" aria-label="Community Chat (English)" style="display:inline-flex;"><!--[--><!--]--> Community Chat (English) <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_ru" rel="noopener noreferrer" target="_blank" aria-label="Community Chat (Russian)" style="display:inline-flex;"><!--[--><!--]--> Community Chat (Russian) <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_news" rel="noopener noreferrer" target="_blank" aria-label="News" style="display:inline-flex;"><!--[--><!--]--> News <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://twitter.com/grammy_js" rel="noopener noreferrer" target="_blank" aria-label="Twitter" style="display:inline-flex;"><!--[--><!--]--> Twitter <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/resources/faq.html" class="" aria-label="FAQ" style="display:inline-flex;"><!--[--><!--]--> FAQ <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/resources/comparison.html" class="" aria-label="Comparison to Other Frameworks" style="display:inline-flex;"><!--[--><!--]--> Comparison to Other Frameworks <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Telegram</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots" rel="noopener noreferrer" target="_blank" aria-label="Introduction for Developers" style="display:inline-flex;"><!--[--><!--]--> Introduction for Developers <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/faq" rel="noopener noreferrer" target="_blank" aria-label="Bots FAQ" style="display:inline-flex;"><!--[--><!--]--> Bots FAQ <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/api" rel="noopener noreferrer" target="_blank" aria-label="Bot API Reference" style="display:inline-flex;"><!--[--><!--]--> Bot API Reference <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/webhooks#testing-your-bot-with-updates" rel="noopener noreferrer" target="_blank" aria-label="Example Updates" style="display:inline-flex;"><!--[--><!--]--> Example Updates <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Hosting"><span class="title">Hosting</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Hosting"><span class="title">Hosting</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Overview</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/hosting/comparison.html" class="" aria-label="Comparison" style="display:inline-flex;"><!--[--><!--]--> Comparison <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Tutorials</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/hosting/deno-deploy.html" class="" aria-label="Deno Deploy" style="display:inline-flex;"><!--[--><!--]--> Deno Deploy <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/supabase.html" class="" aria-label="Supabase Edge Functions" style="display:inline-flex;"><!--[--><!--]--> Supabase Edge Functions <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/heroku.html" class="" aria-label="Heroku" style="display:inline-flex;"><!--[--><!--]--> Heroku <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/gcf.html" class="" aria-label="Google Cloud Functions" style="display:inline-flex;"><!--[--><!--]--> Google Cloud Functions <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/vps.html" class="" aria-label="Virtual Private Server" style="display:inline-flex;"><!--[--><!--]--> Virtual Private Server <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts" rel="noopener noreferrer" target="_blank" aria-label="API Reference" style=""><!--[--><!--]--> API Reference <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/guide/middleware.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English" style="display:inline-flex;"><!--[--><!--]--> English <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guide/middleware.html" class="" aria-label="Español" style="display:inline-flex;"><!--[--><!--]--> Español <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guide/middleware.html" class="" aria-label="Indonesia" style="display:inline-flex;"><!--[--><!--]--> Indonesia <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/guide/middleware.html" class="" aria-label="简体中文" style="display:inline-flex;"><!--[--><!--]--> 简体中文 <!--v-if--><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/grammyjs/grammY" rel="noopener noreferrer" target="_blank" aria-label="GitHub" style=""><!--[--><!--]--> GitHub <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/guide/" class="router-link-active" aria-label="Guide" style=""><!--[--><!--]--> Guide <!--v-if--><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Learn"><span class="title">Learn</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Learn"><span class="title">Learn</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Guide</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/guide/" class="" aria-label="Overview" style="display:inline-flex;"><!--[--><!--]--> Overview <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/introduction.html" class="" aria-label="Introduction" style="display:inline-flex;"><!--[--><!--]--> Introduction <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/getting-started.html" class="" aria-label="Getting Started" style="display:inline-flex;"><!--[--><!--]--> Getting Started <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/basics.html" class="" aria-label="Sending and Receiving Messages" style="display:inline-flex;"><!--[--><!--]--> Sending and Receiving Messages <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/context.html" class="" aria-label="Context" style="display:inline-flex;"><!--[--><!--]--> Context <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/api.html" class="" aria-label="Bot API" style="display:inline-flex;"><!--[--><!--]--> Bot API <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/filter-queries.html" class="" aria-label="Filter Queries and bot.on()" style="display:inline-flex;"><!--[--><!--]--> Filter Queries and bot.on() <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/commands.html" class="" aria-label="Commands" style="display:inline-flex;"><!--[--><!--]--> Commands <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/guide/middleware.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Middleware" style="display:inline-flex;"><!--[--><!--]--> Middleware <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/errors.html" class="" aria-label="Error Handling" style="display:inline-flex;"><!--[--><!--]--> Error Handling <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/inline-queries.html" class="" aria-label="Inline Queries" style="display:inline-flex;"><!--[--><!--]--> Inline Queries <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/files.html" class="" aria-label="File Handling" style="display:inline-flex;"><!--[--><!--]--> File Handling <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/games.html" class="" aria-label="Games" style="display:inline-flex;"><!--[--><!--]--> Games <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/guide/deployment-types.html" class="" aria-label="Long Polling vs. Webhooks" style="display:inline-flex;"><!--[--><!--]--> Long Polling vs. Webhooks <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Advanced</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/advanced/" class="" aria-label="Overview" style="display:inline-flex;"><!--[--><!--]--> Overview <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/middleware.html" class="" aria-label="Middleware Redux" style="display:inline-flex;"><!--[--><!--]--> Middleware Redux <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/structuring.html" class="" aria-label="Scaling Up I: Large Codebase" style="display:inline-flex;"><!--[--><!--]--> Scaling Up I: Large Codebase <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/scaling.html" class="" aria-label="Scaling Up II: High Load" style="display:inline-flex;"><!--[--><!--]--> Scaling Up II: High Load <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/reliability.html" class="" aria-label="Scaling Up III: Reliability" style="display:inline-flex;"><!--[--><!--]--> Scaling Up III: Reliability <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/flood.html" class="" aria-label="Scaling Up IV: Flood Limits" style="display:inline-flex;"><!--[--><!--]--> Scaling Up IV: Flood Limits <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/transformers.html" class="" aria-label="Bot API Transformers" style="display:inline-flex;"><!--[--><!--]--> Bot API Transformers <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/proxy.html" class="" aria-label="Proxy Support" style="display:inline-flex;"><!--[--><!--]--> Proxy Support <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/advanced/deployment.html" class="" aria-label="Deployment Checklist" style="display:inline-flex;"><!--[--><!--]--> Deployment Checklist <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Plugins"><span class="title">Plugins</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Plugins"><span class="title">Plugins</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Introduction</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/" class="" aria-label="About Plugins" style="display:inline-flex;"><!--[--><!--]--> About Plugins <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/guide.html" class="" aria-label="How to Write a Plugin" style="display:inline-flex;"><!--[--><!--]--> How to Write a Plugin <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Built-in</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/session.html" class="" aria-label="Sessions and Storing Data" style="display:inline-flex;"><!--[--><!--]--> Sessions and Storing Data <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/keyboard.html" class="" aria-label="Inline and Custom Keyboards" style="display:inline-flex;"><!--[--><!--]--> Inline and Custom Keyboards <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Official</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/conversations.html" class="" aria-label="Conversations (conversations)" style="display:inline-flex;"><!--[--><!--]--> Conversations (conversations) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/menu.html" class="" aria-label="Interactive Menus (menu)" style="display:inline-flex;"><!--[--><!--]--> Interactive Menus (menu) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/stateless-question.html" class="" aria-label="Stateless Question (stateless-question)" style="display:inline-flex;"><!--[--><!--]--> Stateless Question (stateless-question) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/runner.html" class="" aria-label="Concurrency (runner)" style="display:inline-flex;"><!--[--><!--]--> Concurrency (runner) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/hydrate.html" class="" aria-label="Hydration (hydrate)" style="display:inline-flex;"><!--[--><!--]--> Hydration (hydrate) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/auto-retry.html" class="" aria-label="Retry API Requests (auto-retry)" style="display:inline-flex;"><!--[--><!--]--> Retry API Requests (auto-retry) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/transformer-throttler.html" class="" aria-label="Flood Control (transformer-throttler)" style="display:inline-flex;"><!--[--><!--]--> Flood Control (transformer-throttler) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/ratelimiter.html" class="" aria-label="Rate Limit Users (ratelimiter)" style="display:inline-flex;"><!--[--><!--]--> Rate Limit Users (ratelimiter) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/files.html" class="" aria-label="Files (files)" style="display:inline-flex;"><!--[--><!--]--> Files (files) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/i18n.html" class="" aria-label="Internationalization (i18n)" style="display:inline-flex;"><!--[--><!--]--> Internationalization (i18n) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/fluent.html" class="" aria-label="Internationalization (fluent)" style="display:inline-flex;"><!--[--><!--]--> Internationalization (fluent) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/router.html" class="" aria-label="Router (router)" style="display:inline-flex;"><!--[--><!--]--> Router (router) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/emoji.html" class="" aria-label="Emoji (emoji)" style="display:inline-flex;"><!--[--><!--]--> Emoji (emoji) <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/parse-mode.html" class="" aria-label="Parse Mode (parse-mode)" style="display:inline-flex;"><!--[--><!--]--> Parse Mode (parse-mode) <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Third-party</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/plugins/console-time.html" class="" aria-label="Console Time" style="display:inline-flex;"><!--[--><!--]--> Console Time <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/middlewares.html" class="" aria-label="Useful Middleware" style="display:inline-flex;"><!--[--><!--]--> Useful Middleware <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/autoquote.html" class="" aria-label="Autoquote" style="display:inline-flex;"><!--[--><!--]--> Autoquote <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/plugins/#create-your-own-plugins" class="" aria-label="[Submit your PR!]" style="display:inline-flex;"><!--[--><!--]--> [Submit your PR!] <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Examples"><span class="title">Examples</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Examples"><span class="title">Examples</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Examples</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/awesome-grammY" rel="noopener noreferrer" target="_blank" aria-label="Awesome grammY" style="display:inline-flex;"><!--[--><!--]--> Awesome grammY <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/examples" rel="noopener noreferrer" target="_blank" aria-label="Example Bots Repository" style="display:inline-flex;"><!--[--><!--]--> Example Bots Repository <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Resources"><span class="title">Resources</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Resources"><span class="title">Resources</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>grammY</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/resources/about.html" class="" aria-label="About grammY" style="display:inline-flex;"><!--[--><!--]--> About grammY <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs" rel="noopener noreferrer" target="_blank" aria-label="Community Chat (English)" style="display:inline-flex;"><!--[--><!--]--> Community Chat (English) <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_ru" rel="noopener noreferrer" target="_blank" aria-label="Community Chat (Russian)" style="display:inline-flex;"><!--[--><!--]--> Community Chat (Russian) <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_news" rel="noopener noreferrer" target="_blank" aria-label="News" style="display:inline-flex;"><!--[--><!--]--> News <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://twitter.com/grammy_js" rel="noopener noreferrer" target="_blank" aria-label="Twitter" style="display:inline-flex;"><!--[--><!--]--> Twitter <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/resources/faq.html" class="" aria-label="FAQ" style="display:inline-flex;"><!--[--><!--]--> FAQ <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/resources/comparison.html" class="" aria-label="Comparison to Other Frameworks" style="display:inline-flex;"><!--[--><!--]--> Comparison to Other Frameworks <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Telegram</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots" rel="noopener noreferrer" target="_blank" aria-label="Introduction for Developers" style="display:inline-flex;"><!--[--><!--]--> Introduction for Developers <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/faq" rel="noopener noreferrer" target="_blank" aria-label="Bots FAQ" style="display:inline-flex;"><!--[--><!--]--> Bots FAQ <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/api" rel="noopener noreferrer" target="_blank" aria-label="Bot API Reference" style="display:inline-flex;"><!--[--><!--]--> Bot API Reference <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/webhooks#testing-your-bot-with-updates" rel="noopener noreferrer" target="_blank" aria-label="Example Updates" style="display:inline-flex;"><!--[--><!--]--> Example Updates <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Hosting"><span class="title">Hosting</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Hosting"><span class="title">Hosting</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Overview</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/hosting/comparison.html" class="" aria-label="Comparison" style="display:inline-flex;"><!--[--><!--]--> Comparison <!--v-if--><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span style="display:inline-flex;"><span>Tutorials</span><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/hosting/deno-deploy.html" class="" aria-label="Deno Deploy" style="display:inline-flex;"><!--[--><!--]--> Deno Deploy <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/supabase.html" class="" aria-label="Supabase Edge Functions" style="display:inline-flex;"><!--[--><!--]--> Supabase Edge Functions <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/heroku.html" class="" aria-label="Heroku" style="display:inline-flex;"><!--[--><!--]--> Heroku <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/gcf.html" class="" aria-label="Google Cloud Functions" style="display:inline-flex;"><!--[--><!--]--> Google Cloud Functions <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/hosting/vps.html" class="" aria-label="Virtual Private Server" style="display:inline-flex;"><!--[--><!--]--> Virtual Private Server <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts" rel="noopener noreferrer" target="_blank" aria-label="API Reference" style=""><!--[--><!--]--> API Reference <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/guide/middleware.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English" style="display:inline-flex;"><!--[--><!--]--> English <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guide/middleware.html" class="" aria-label="Español" style="display:inline-flex;"><!--[--><!--]--> Español <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guide/middleware.html" class="" aria-label="Indonesia" style="display:inline-flex;"><!--[--><!--]--> Indonesia <!--v-if--><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/guide/middleware.html" class="" aria-label="简体中文" style="display:inline-flex;"><!--[--><!--]--> 简体中文 <!--v-if--><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/grammyjs/grammY" rel="noopener noreferrer" target="_blank" aria-label="GitHub" style=""><!--[--><!--]--> GitHub <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Middleware <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/middleware.html#the-middleware-stack" class="router-link-active router-link-exact-active sidebar-item" aria-label="The Middleware Stack" style=""><!--[--><!--]--> The Middleware Stack <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/middleware.html#writing-custom-middleware" class="router-link-active router-link-exact-active sidebar-item" aria-label="Writing Custom Middleware" style=""><!--[--><!--]--> Writing Custom Middleware <!--v-if--><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/middleware.html#properties-of-middleware-in-grammy" class="router-link-active router-link-exact-active sidebar-item" aria-label="Properties of Middleware in grammY" style=""><!--[--><!--]--> Properties of Middleware in grammY <!--v-if--><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="middleware" tabindex="-1"><a class="header-anchor" href="#middleware" aria-hidden="true">#</a> Middleware</h1><p>The listener functions that are being passed to <code>bot<wbr>.on()</code>, <code>bot<wbr>.command()</code>, and their siblings, are called <em>middleware</em>. While it is not wrong to say that they are listening for updates, calling them “listeners” is a simplification.</p><blockquote><p>This section explains what middleware is, and uses grammY as an example to illustrate how it can be used. If you are looking for specific documentation about what makes grammY’s implementation of middleware special, check out <a href="/advanced/middleware.html" class="">Middleware Redux</a> in the advanced section of the docs.</p></blockquote><h2 id="the-middleware-stack" tabindex="-1"><a class="header-anchor" href="#the-middleware-stack" aria-hidden="true">#</a> The Middleware Stack</h2><p>Suppose you write a bot like this:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;token&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Started!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;help&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Help text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;:text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Text!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (*)</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;:photo&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Photo!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When an update with a regular text message arrives, these steps will be performed:</p><ol><li>You send <code>&quot;Hi there!&quot;</code> to the bot.</li><li>The session middleware receives the update, and does its session things</li><li>The update will be checked for a <code>/start</code> command, which is not contained</li><li>The update will be checked for a <code>/help</code> command, which is not contained</li><li>The update will be checked for text in the message (or channel post), which succeeds.</li><li>The middleware at <code>(*)</code> will be invoked, it handles the update by replying with <code>&quot;Text!&quot;</code>.</li></ol><p>The update is <strong>not</strong> checked for a photo content, because the middleware at <code>(*)</code> already handled the update.</p><p>Now, how does this work? Let’s find out.</p><p>We can inspect the <code>Middleware</code> type in grammY’s reference <a href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/Middleware" target="_blank" rel="noopener noreferrer">here<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Omitted some type parameters for brevity.</span>
<span class="token keyword">type</span> <span class="token class-name">Middleware</span> <span class="token operator">=</span> MiddlewareFn <span class="token operator">|</span> MiddlewareObj<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Aha! Middleware can be a function or an object. We only used functions (<code>(ctx) <wbr>=<wbr>&gt; { <wbr>..<wbr>. }</code>) so far, so let’s ignore middleware objects for now, and dig deeper into the <code>Middleware<wbr>Fn</code> type (<a href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/MiddlewareFn" target="_blank" rel="noopener noreferrer">reference<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>):</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Omitted type parameters again.</span>
<span class="token keyword">type</span> <span class="token class-name">MiddlewareFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>ctx<span class="token operator">:</span> Context<span class="token punctuation">,</span> next<span class="token operator">:</span> NextFunction<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> MaybePromise<span class="token operator">&lt;</span><span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">// with</span>
<span class="token keyword">type</span> <span class="token class-name">NextFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>So, middleware takes two parameters! We only used one so far, the context object <code>ctx</code>. We <a href="/guide/context.html" class="">already know</a> what <code>ctx</code> is, but we also see a function with the name <code>next</code>. In order to understand what <code>next</code> is, we have to look at all middleware that you install on your bot object as a whole.</p><p>You can view all installed middleware functions as a number of layers that are stacked on top of each other. The first middleware (<code>session</code> in our example) is the uppermost layer, hence receiving each update first. It can then decide if it wants to handle the update, or pass it down to the next layer (the <code>/start</code> command handler). The function <code>next</code> can be used to invoke the subsequent middleware, often called <em>downstream middleware</em>. This also means that if you don’t call <code>next</code> in your middleware, the underlying layers of middleware will not be invoked.</p><p>This stack of functions is the <em>middleware stack</em>.</p><div class="language-asciiart ext-asciiart"><pre class="language-asciiart"><code>(ctx, next) =&gt; ...    |
(ctx, next) =&gt; ...    |—————upstream middleware of X
(ctx, next) =&gt; ...    |
(ctx, next) =&gt; ...       &lt;— middleware X. Call `next` to pass down updates
(ctx, next) =&gt; ...    |
(ctx, next) =&gt; ...    |—————downstream middleware of X
(ctx, next) =&gt; ...    |
</code></pre></div><p>Looking back at our earlier example, we now know why <code>bot<wbr>.on(&quot;:<wbr>photo&quot;)</code> was never even checked: the middleware in <code>bot<wbr>.on(&quot;:<wbr>text&quot;<wbr>, (ctx) <wbr>=<wbr>&gt; { <wbr>..<wbr>. })</code> already handled the update, and it did not call <code>next</code>. In fact, it did not even specify <code>next</code> as a parameter. It simply ignored <code>next</code>, hence not passing on the update.</p><p>Let’s try out something else with our new knowledge!</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;token&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;:text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Text!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Command!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you run the above bot, and send <code>/start</code>, you will never get to see a response saying <code>Command!</code>. Let’s inspect what happens:</p><ol><li>You send <code>&quot;<wbr>/start&quot;</code> to the bot.</li><li>The <code>&quot;:<wbr>text&quot;</code> middleware receives the update and checks for text, which succeeds because commands are text messages. The update is handled immediately by the first middleware and your bot replies with “Text!”.</li></ol><p>The message is never even checked for if it contains the <code>/start</code> command! The order in which you register your middleware matters, because it determines the order of the layers in the middleware stack. You can fix the issue by flipping the order of lines 3 and 4. If you called <code>next</code> on line 3, two responses would be sent.</p><p><strong>The <code>bot<wbr>.use()</code> function simply registers middleware that receives all updates.</strong> This is why <code>session()</code> is installed via <code>bot<wbr>.use()</code>—we want the plugin to operate on all updates, no matter what data is contained.</p><p>Having a middleware stack is an extremely powerful property of any web framework, and this pattern is widely popular (not just for Telegram bots).</p><p>Let’s write our own little piece of middleware to better illustrate how it works.</p><h2 id="writing-custom-middleware" tabindex="-1"><a class="header-anchor" href="#writing-custom-middleware" aria-hidden="true">#</a> Writing Custom Middleware</h2><p>We will illustrate the concept of middleware by writing a simple middleware function that can measure the response time of your bot, i.e. how long it takes your bot to handle a message.</p><p>Here is the function signature for our middleware. You can compare it to the middleware type from above, and convince yourself that we actually have middleware here.</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TypeScript</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">JavaScript</button></li></ul></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token doc-comment comment">/** Measures the response time of the bot, and logs it to `console` */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">responseTime</span><span class="token punctuation">(</span>
  ctx<span class="token operator">:</span> Context<span class="token punctuation">,</span>
  next<span class="token operator">:</span> NextFunction<span class="token punctuation">,</span> <span class="token comment">// is an alias for: () =&gt; Promise&lt;void&gt;</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO: implement</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/** Measures the response time of the bot, and logs it to `console` */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">responseTime</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO: implement</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>We can install it into our <code>bot</code> instance with <code>bot<wbr>.use()</code>:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>responseTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Let’s begin implementing it. Here is what we want to do:</p><ol><li>Once an update arrives, we store <code>Date<wbr>.now()</code> in a variable.</li><li>We invoke the downstream middleware, hence let all message handling happen. This includes command matching, replying, and everything else your bot does.</li><li>We take <code>Date<wbr>.now()</code> again, compare it to the old value, and <code>console<wbr>.log</code> the time difference.</li></ol><p>It is important to install our <code>response<wbr>Time</code> middleware <em>first</em> on the bot (at the top of the middleware stack) to make sure that all operations are included in the measurement.</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TypeScript</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">JavaScript</button></li></ul></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token doc-comment comment">/** Measures the response time of the bot, and logs it to `console` */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">responseTime</span><span class="token punctuation">(</span>
  ctx<span class="token operator">:</span> Context<span class="token punctuation">,</span>
  next<span class="token operator">:</span> NextFunction<span class="token punctuation">,</span> <span class="token comment">// is an alias for: () =&gt; Promise&lt;void&gt;</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// take time before</span>
  <span class="token keyword">const</span> before <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// milliseconds</span>
  <span class="token comment">// invoke downstream middleware</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// make sure to `await`!</span>
  <span class="token comment">// take time after</span>
  <span class="token keyword">const</span> after <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// milliseconds</span>
  <span class="token comment">// log difference</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Response time: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>after <span class="token operator">-</span> before<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ms</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>responseTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/** Measures the response time of the bot, and logs it to `console` */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">responseTime</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// take time before</span>
  <span class="token keyword">const</span> before <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// milliseconds</span>
  <span class="token comment">// invoke downstream middleware</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// make sure to `await`!</span>
  <span class="token comment">// take time after</span>
  <span class="token keyword">const</span> after <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// milliseconds</span>
  <span class="token comment">// log difference</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Response time: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>after <span class="token operator">-</span> before<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ms</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>responseTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>Complete, and works! ✔️</p><p>Feel free to use this middleware on your bot object, register more listeners, and play around with the example. Doing so will help you to fully understand what middleware is.</p><div class="custom-container danger"><p class="custom-container-title">DANGER: Always Make Sure to await next!</p><p>If you ever call <code>next()</code> without the <code>await</code> keyword, several things will break:</p><ul><li>❌ Your middleware stack will be executed in the wrong order.</li><li>❌ You may experience data loss.</li><li>❌ Some messages may not be sent.</li><li>❌ Your bot may randomly crash in ways that are hard to reproduce.</li><li>❌ If an error happens, your error handler will not be called for it. Instead, you will see that an <code>Unhandled<wbr>Promise<wbr>Rejection<wbr>Warning</code> will occur, which may crash your bot process.</li><li>❌ The backpressure mechanism of <a href="/plugins/runner.html" class="">grammY runner</a> breaks, which protects your server from overly-high load, such as during load spikes.</li><li>💀 Sometimes, it also kills all of your innocent kittens. 😿</li></ul></div><p>The rule that you should use <code>await</code> is especially important for <code>next()</code>, but it actually applies to any expression in general that returns a <code>Promise</code>. This includes <code>bot<wbr>.api<wbr>.send<wbr>Message</code>, <code>ctx<wbr>.reply</code>, and all other network calls. If your project is important to you, then you use linting tools that warn you if you ever forget to use <code>await</code> on a <code>Promise</code>.</p><div class="custom-container tip"><p class="custom-container-title">Enable no-floating-promises</p><p>Consider using <a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">ESLint<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> and configure it to use the <a href="https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/eslint-plugin/docs/rules/no-floating-promises.md" target="_blank" rel="noopener noreferrer">no<wbr>-floating<wbr>-promises<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> rule. This will make sure that you never forget to use <code>await</code> (by yelling at you).</p></div><h2 id="properties-of-middleware-in-grammy" tabindex="-1"><a class="header-anchor" href="#properties-of-middleware-in-grammy" aria-hidden="true">#</a> Properties of Middleware in grammY</h2><p>In grammY, middleware may return a <code>Promise</code> (which will be <code>await</code>ed), but it can also be synchronous.</p><p>In contrast to other middleware systems (such as the one from <code>express</code>), you cannot pass error values to <code>next</code>. <code>next</code> does not take any arguments. If you want to error, you can simply <code>throw</code> the error. Another difference is that it does not matter how many arguments your middleware takes: <code>() <wbr>=<wbr>&gt; {}</code> will be handled exactly as <code>(ctx) <wbr>=<wbr>&gt; {}</code>, or as <code>(ctx<wbr>, next) <wbr>=<wbr>&gt; {}</code>.</p><p>There are two types of middleware: functions and objects. Middleware objects are simply a wrapper for middleware functions. They are mostly used internally, but can sometimes also help third-party libraries, or be used in advanced use cases, such as with <a href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/Composer" target="_blank" rel="noopener noreferrer">Composer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;token&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> composer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Composer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
composer<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
composer<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
composer<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>composer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// composer is a middleware object!</span>

bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you want to dig deeper into how grammY implements middleware, check out <a href="/advanced/middleware.html" class="">Middleware Redux</a> in the advanced section of the docs.</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/grammyjs/website/edit/main/site/docs/guide/middleware.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" style=""><!--[--><!--]--> Edit this page on GitHub <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: shtrog@gmail.com">KnorpelSenf</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: ez@roj.im">Roj</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: roj@rojser.best">Roj Serbest</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 55633371+CalsiBotDev@users.noreply.github.com">Calsi</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: roj@rojser.best">Roj</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: rojserbest@gmail.com">Roj</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/guide/commands.html" class="" aria-label="Commands" style=""><!--[--><!--]--> Commands <!--v-if--><!--[--><!--]--></a></span><span class="next"><a href="/guide/errors.html" class="" aria-label="Error Handling" style=""><!--[--><!--]--> Error Handling <!--v-if--><!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.c0ce12a9.js" defer></script>
  </body>
</html>
