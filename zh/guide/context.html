<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>上下文 | grammY</title><meta name="description" content="Telegram Bot 框架">
    <link rel="modulepreload" href="/assets/app.81c9d145.js"><link rel="modulepreload" href="/assets/context.html.53f8d3a6.js"><link rel="modulepreload" href="/assets/context.html.f1f04579.js"><link rel="prefetch" href="/assets/index.html.0429b483.js"><link rel="prefetch" href="/assets/index.html.fb39b504.js"><link rel="prefetch" href="/assets/examples.html.4b7b6125.js"><link rel="prefetch" href="/assets/index.html.2401d292.js"><link rel="prefetch" href="/assets/deployment.html.820945fa.js"><link rel="prefetch" href="/assets/flood.html.064205fe.js"><link rel="prefetch" href="/assets/middleware.html.992dcb0e.js"><link rel="prefetch" href="/assets/proxy.html.c404e72a.js"><link rel="prefetch" href="/assets/reliability.html.5a572dfa.js"><link rel="prefetch" href="/assets/scaling.html.fe634161.js"><link rel="prefetch" href="/assets/structuring.html.1e8ebd48.js"><link rel="prefetch" href="/assets/transformers.html.3e1cae77.js"><link rel="prefetch" href="/assets/index.html.e45b3ea7.js"><link rel="prefetch" href="/assets/index.html.172886ab.js"><link rel="prefetch" href="/assets/api.html.d34afc0f.js"><link rel="prefetch" href="/assets/basics.html.65923044.js"><link rel="prefetch" href="/assets/commands.html.c2610c77.js"><link rel="prefetch" href="/assets/context.html.d7289dc7.js"><link rel="prefetch" href="/assets/deployment-types.html.346b4d4f.js"><link rel="prefetch" href="/assets/errors.html.d567f2e9.js"><link rel="prefetch" href="/assets/files.html.5df1fdf3.js"><link rel="prefetch" href="/assets/filter-queries.html.ff3c15e1.js"><link rel="prefetch" href="/assets/games.html.ebb92d65.js"><link rel="prefetch" href="/assets/getting-started.html.3aad9f5a.js"><link rel="prefetch" href="/assets/inline-queries.html.9fa5435e.js"><link rel="prefetch" href="/assets/introduction.html.d062e0ed.js"><link rel="prefetch" href="/assets/middleware.html.c32c1afb.js"><link rel="prefetch" href="/assets/comparison.html.864b515f.js"><link rel="prefetch" href="/assets/deno-deploy.html.33fda6ac.js"><link rel="prefetch" href="/assets/gcf.html.94978e12.js"><link rel="prefetch" href="/assets/heroku.html.f4861855.js"><link rel="prefetch" href="/assets/supabase.html.f931ecc3.js"><link rel="prefetch" href="/assets/vps.html.f8b61457.js"><link rel="prefetch" href="/assets/index.html.564f39e8.js"><link rel="prefetch" href="/assets/index.html.cc711d93.js"><link rel="prefetch" href="/assets/auto-retry.html.76b5ce1b.js"><link rel="prefetch" href="/assets/autoquote.html.f8611f7b.js"><link rel="prefetch" href="/assets/command-filter.html.12deb6e8.js"><link rel="prefetch" href="/assets/console-time.html.bbb18311.js"><link rel="prefetch" href="/assets/conversations.html.542d4ede.js"><link rel="prefetch" href="/assets/emoji.html.96b685bd.js"><link rel="prefetch" href="/assets/files.html.59f0953c.js"><link rel="prefetch" href="/assets/fluent.html.93e75a53.js"><link rel="prefetch" href="/assets/guide.html.4a675f4a.js"><link rel="prefetch" href="/assets/hydrate.html.4d6c9f6e.js"><link rel="prefetch" href="/assets/i18n.html.b886c9b6.js"><link rel="prefetch" href="/assets/keyboard.html.5d3ef392.js"><link rel="prefetch" href="/assets/menu.html.97fd78f5.js"><link rel="prefetch" href="/assets/middlewares.html.4527fc91.js"><link rel="prefetch" href="/assets/parse-mode.html.5fea1fba.js"><link rel="prefetch" href="/assets/ratelimiter.html.09dbf6ad.js"><link rel="prefetch" href="/assets/router.html.02606ebd.js"><link rel="prefetch" href="/assets/runner.html.fb3b00e6.js"><link rel="prefetch" href="/assets/session.html.a3ebd553.js"><link rel="prefetch" href="/assets/stateless-question.html.acdd39e3.js"><link rel="prefetch" href="/assets/transformer-throttler.html.009b0e9c.js"><link rel="prefetch" href="/assets/about.html.e9ce3575.js"><link rel="prefetch" href="/assets/comparison.html.5589e0a7.js"><link rel="prefetch" href="/assets/faq.html.4a46d2bc.js"><link rel="prefetch" href="/assets/index.html.8d516f91.js"><link rel="prefetch" href="/assets/index.html.0ea21131.js"><link rel="prefetch" href="/assets/deployment.html.947cfd03.js"><link rel="prefetch" href="/assets/flood.html.adb704f3.js"><link rel="prefetch" href="/assets/middleware.html.62700685.js"><link rel="prefetch" href="/assets/proxy.html.d9e32858.js"><link rel="prefetch" href="/assets/reliability.html.214116d2.js"><link rel="prefetch" href="/assets/scaling.html.17ebd1a5.js"><link rel="prefetch" href="/assets/structuring.html.b2cc831f.js"><link rel="prefetch" href="/assets/transformers.html.0d715264.js"><link rel="prefetch" href="/assets/index.html.655275db.js"><link rel="prefetch" href="/assets/examples.html.4da510e2.js"><link rel="prefetch" href="/assets/index.html.b68e7c4e.js"><link rel="prefetch" href="/assets/api.html.864221a5.js"><link rel="prefetch" href="/assets/basics.html.d83b67aa.js"><link rel="prefetch" href="/assets/commands.html.0c654628.js"><link rel="prefetch" href="/assets/context.html.684cfc10.js"><link rel="prefetch" href="/assets/deployment-types.html.66bb2eb6.js"><link rel="prefetch" href="/assets/errors.html.3bd197a1.js"><link rel="prefetch" href="/assets/files.html.b3f5719d.js"><link rel="prefetch" href="/assets/filter-queries.html.2fc848b9.js"><link rel="prefetch" href="/assets/games.html.ed2eeb11.js"><link rel="prefetch" href="/assets/getting-started.html.bee7700c.js"><link rel="prefetch" href="/assets/inline-queries.html.3dd234a2.js"><link rel="prefetch" href="/assets/introduction.html.2c38a111.js"><link rel="prefetch" href="/assets/middleware.html.956472a4.js"><link rel="prefetch" href="/assets/comparison.html.62a530ba.js"><link rel="prefetch" href="/assets/deno-deploy.html.9ad88492.js"><link rel="prefetch" href="/assets/gcf.html.dbb08649.js"><link rel="prefetch" href="/assets/heroku.html.1a7f1f38.js"><link rel="prefetch" href="/assets/supabase.html.4ce4dd3e.js"><link rel="prefetch" href="/assets/vps.html.7964c3ff.js"><link rel="prefetch" href="/assets/index.html.d277051d.js"><link rel="prefetch" href="/assets/auto-retry.html.627c099e.js"><link rel="prefetch" href="/assets/autoquote.html.931147c8.js"><link rel="prefetch" href="/assets/command-filter.html.24250ac2.js"><link rel="prefetch" href="/assets/console-time.html.c602475c.js"><link rel="prefetch" href="/assets/conversations.html.34bdf713.js"><link rel="prefetch" href="/assets/emoji.html.4340fe04.js"><link rel="prefetch" href="/assets/files.html.0ce1beed.js"><link rel="prefetch" href="/assets/fluent.html.2312cffa.js"><link rel="prefetch" href="/assets/guide.html.cdc01534.js"><link rel="prefetch" href="/assets/hydrate.html.e78bac27.js"><link rel="prefetch" href="/assets/i18n.html.7a67a704.js"><link rel="prefetch" href="/assets/keyboard.html.6c1187da.js"><link rel="prefetch" href="/assets/menu.html.2390f9b0.js"><link rel="prefetch" href="/assets/middlewares.html.8fb2b4c6.js"><link rel="prefetch" href="/assets/parse-mode.html.6084b065.js"><link rel="prefetch" href="/assets/ratelimiter.html.e9ab9086.js"><link rel="prefetch" href="/assets/router.html.49ad6cc8.js"><link rel="prefetch" href="/assets/runner.html.2e392816.js"><link rel="prefetch" href="/assets/session.html.bc00753b.js"><link rel="prefetch" href="/assets/stateless-question.html.840ef874.js"><link rel="prefetch" href="/assets/transformer-throttler.html.a0519c22.js"><link rel="prefetch" href="/assets/about.html.6acc59e5.js"><link rel="prefetch" href="/assets/comparison.html.19d2b82f.js"><link rel="prefetch" href="/assets/faq.html.525026ef.js"><link rel="prefetch" href="/assets/index.html.c671af3a.js"><link rel="prefetch" href="/assets/deployment.html.890ba700.js"><link rel="prefetch" href="/assets/flood.html.99fc87f0.js"><link rel="prefetch" href="/assets/middleware.html.93e739dc.js"><link rel="prefetch" href="/assets/proxy.html.a206407d.js"><link rel="prefetch" href="/assets/reliability.html.77f11b74.js"><link rel="prefetch" href="/assets/scaling.html.b0186def.js"><link rel="prefetch" href="/assets/structuring.html.431bf13f.js"><link rel="prefetch" href="/assets/transformers.html.76eb6336.js"><link rel="prefetch" href="/assets/index.html.629ca643.js"><link rel="prefetch" href="/assets/examples.html.cea54aec.js"><link rel="prefetch" href="/assets/index.html.374cf0b5.js"><link rel="prefetch" href="/assets/api.html.a789ac69.js"><link rel="prefetch" href="/assets/basics.html.a5f54cb2.js"><link rel="prefetch" href="/assets/commands.html.f5bc337a.js"><link rel="prefetch" href="/assets/context.html.e94c9f2e.js"><link rel="prefetch" href="/assets/deployment-types.html.d3d220f8.js"><link rel="prefetch" href="/assets/errors.html.cb531b7a.js"><link rel="prefetch" href="/assets/files.html.1cbd9c21.js"><link rel="prefetch" href="/assets/filter-queries.html.18865e77.js"><link rel="prefetch" href="/assets/games.html.019dc6f4.js"><link rel="prefetch" href="/assets/getting-started.html.cdb13cc0.js"><link rel="prefetch" href="/assets/inline-queries.html.02267dd2.js"><link rel="prefetch" href="/assets/introduction.html.e8487eb7.js"><link rel="prefetch" href="/assets/middleware.html.beeb4db0.js"><link rel="prefetch" href="/assets/comparison.html.ece5207a.js"><link rel="prefetch" href="/assets/deno-deploy.html.8cd18a25.js"><link rel="prefetch" href="/assets/gcf.html.bf1ad988.js"><link rel="prefetch" href="/assets/heroku.html.200ca6ee.js"><link rel="prefetch" href="/assets/supabase.html.aca1ac1d.js"><link rel="prefetch" href="/assets/vps.html.40de5172.js"><link rel="prefetch" href="/assets/index.html.567ecd8c.js"><link rel="prefetch" href="/assets/auto-retry.html.be745936.js"><link rel="prefetch" href="/assets/autoquote.html.5c46e2d3.js"><link rel="prefetch" href="/assets/command-filter.html.fa1f4413.js"><link rel="prefetch" href="/assets/console-time.html.0d2bc762.js"><link rel="prefetch" href="/assets/conversations.html.778561d7.js"><link rel="prefetch" href="/assets/emoji.html.601be2b6.js"><link rel="prefetch" href="/assets/files.html.13f0053f.js"><link rel="prefetch" href="/assets/fluent.html.47d160d5.js"><link rel="prefetch" href="/assets/guide.html.381a5a51.js"><link rel="prefetch" href="/assets/hydrate.html.426ed716.js"><link rel="prefetch" href="/assets/i18n.html.afb30866.js"><link rel="prefetch" href="/assets/keyboard.html.19037e93.js"><link rel="prefetch" href="/assets/menu.html.e70d11ec.js"><link rel="prefetch" href="/assets/middlewares.html.5bc684e5.js"><link rel="prefetch" href="/assets/parse-mode.html.0e2027aa.js"><link rel="prefetch" href="/assets/ratelimiter.html.f1aaea8c.js"><link rel="prefetch" href="/assets/router.html.1476dda9.js"><link rel="prefetch" href="/assets/runner.html.ce50a49c.js"><link rel="prefetch" href="/assets/session.html.fe8e3213.js"><link rel="prefetch" href="/assets/stateless-question.html.b8a43883.js"><link rel="prefetch" href="/assets/transformer-throttler.html.45a66fc5.js"><link rel="prefetch" href="/assets/about.html.4abcfa07.js"><link rel="prefetch" href="/assets/comparison.html.8ed17bd9.js"><link rel="prefetch" href="/assets/faq.html.0dd6c2c4.js"><link rel="prefetch" href="/assets/index.html.45898178.js"><link rel="prefetch" href="/assets/deployment.html.75afc00d.js"><link rel="prefetch" href="/assets/flood.html.71e88b3b.js"><link rel="prefetch" href="/assets/middleware.html.afa5db3b.js"><link rel="prefetch" href="/assets/proxy.html.b70254e4.js"><link rel="prefetch" href="/assets/reliability.html.2858f460.js"><link rel="prefetch" href="/assets/scaling.html.ae951df2.js"><link rel="prefetch" href="/assets/structuring.html.d2ff17dd.js"><link rel="prefetch" href="/assets/transformers.html.6f5b57b6.js"><link rel="prefetch" href="/assets/index.html.74522b16.js"><link rel="prefetch" href="/assets/examples.html.24e682eb.js"><link rel="prefetch" href="/assets/index.html.9de295a7.js"><link rel="prefetch" href="/assets/api.html.8ed7866f.js"><link rel="prefetch" href="/assets/basics.html.7afbeb28.js"><link rel="prefetch" href="/assets/commands.html.131d044b.js"><link rel="prefetch" href="/assets/deployment-types.html.6efb3c25.js"><link rel="prefetch" href="/assets/errors.html.0c95dbb6.js"><link rel="prefetch" href="/assets/files.html.c53a8155.js"><link rel="prefetch" href="/assets/filter-queries.html.dab2ea34.js"><link rel="prefetch" href="/assets/games.html.60a32e8c.js"><link rel="prefetch" href="/assets/getting-started.html.7d3308dc.js"><link rel="prefetch" href="/assets/inline-queries.html.c644e6f2.js"><link rel="prefetch" href="/assets/introduction.html.2b2e7021.js"><link rel="prefetch" href="/assets/middleware.html.8e8a095a.js"><link rel="prefetch" href="/assets/comparison.html.65d3d0d9.js"><link rel="prefetch" href="/assets/deno-deploy.html.b3d0c42c.js"><link rel="prefetch" href="/assets/gcf.html.8a35f9f5.js"><link rel="prefetch" href="/assets/heroku.html.8ba42f90.js"><link rel="prefetch" href="/assets/supabase.html.ee2b455f.js"><link rel="prefetch" href="/assets/vps.html.6fe75bcb.js"><link rel="prefetch" href="/assets/index.html.f9a366b7.js"><link rel="prefetch" href="/assets/auto-retry.html.e870a1fc.js"><link rel="prefetch" href="/assets/autoquote.html.afc82797.js"><link rel="prefetch" href="/assets/command-filter.html.d5692cab.js"><link rel="prefetch" href="/assets/console-time.html.a509e6b6.js"><link rel="prefetch" href="/assets/conversations.html.c2a1214f.js"><link rel="prefetch" href="/assets/emoji.html.346d49b0.js"><link rel="prefetch" href="/assets/files.html.97985794.js"><link rel="prefetch" href="/assets/fluent.html.497a7165.js"><link rel="prefetch" href="/assets/guide.html.6086fd79.js"><link rel="prefetch" href="/assets/hydrate.html.f3bc28bb.js"><link rel="prefetch" href="/assets/i18n.html.42762cf9.js"><link rel="prefetch" href="/assets/keyboard.html.9ccac385.js"><link rel="prefetch" href="/assets/menu.html.05b22f9d.js"><link rel="prefetch" href="/assets/middlewares.html.b0d76949.js"><link rel="prefetch" href="/assets/parse-mode.html.377b539d.js"><link rel="prefetch" href="/assets/ratelimiter.html.f7e73ee7.js"><link rel="prefetch" href="/assets/router.html.401950f2.js"><link rel="prefetch" href="/assets/runner.html.da15a490.js"><link rel="prefetch" href="/assets/session.html.79028198.js"><link rel="prefetch" href="/assets/stateless-question.html.e542bb65.js"><link rel="prefetch" href="/assets/transformer-throttler.html.7d448db6.js"><link rel="prefetch" href="/assets/about.html.41287b90.js"><link rel="prefetch" href="/assets/comparison.html.162bdf02.js"><link rel="prefetch" href="/assets/faq.html.abba6af1.js"><link rel="prefetch" href="/assets/404.html.d2dc3323.js"><link rel="prefetch" href="/assets/index.html.506bd518.js"><link rel="prefetch" href="/assets/index.html.f73e7137.js"><link rel="prefetch" href="/assets/examples.html.94e2f736.js"><link rel="prefetch" href="/assets/index.html.96755d31.js"><link rel="prefetch" href="/assets/deployment.html.e985174c.js"><link rel="prefetch" href="/assets/flood.html.a1265c0a.js"><link rel="prefetch" href="/assets/middleware.html.83138b05.js"><link rel="prefetch" href="/assets/proxy.html.fd74d1ff.js"><link rel="prefetch" href="/assets/reliability.html.45366f2f.js"><link rel="prefetch" href="/assets/scaling.html.a68def9b.js"><link rel="prefetch" href="/assets/structuring.html.7af2fb7d.js"><link rel="prefetch" href="/assets/transformers.html.6fff2dd8.js"><link rel="prefetch" href="/assets/index.html.b496a7ad.js"><link rel="prefetch" href="/assets/index.html.d98f168f.js"><link rel="prefetch" href="/assets/api.html.a64e079e.js"><link rel="prefetch" href="/assets/basics.html.c61949bb.js"><link rel="prefetch" href="/assets/commands.html.88a25c28.js"><link rel="prefetch" href="/assets/context.html.62f529b5.js"><link rel="prefetch" href="/assets/deployment-types.html.66d56fb0.js"><link rel="prefetch" href="/assets/errors.html.ea45d9da.js"><link rel="prefetch" href="/assets/files.html.739b5465.js"><link rel="prefetch" href="/assets/filter-queries.html.94454c9b.js"><link rel="prefetch" href="/assets/games.html.021b514f.js"><link rel="prefetch" href="/assets/getting-started.html.d26fedef.js"><link rel="prefetch" href="/assets/inline-queries.html.9589f2c2.js"><link rel="prefetch" href="/assets/introduction.html.000bbac6.js"><link rel="prefetch" href="/assets/middleware.html.d339e00e.js"><link rel="prefetch" href="/assets/comparison.html.4e9bc257.js"><link rel="prefetch" href="/assets/deno-deploy.html.31e80a4b.js"><link rel="prefetch" href="/assets/gcf.html.50e1f2e2.js"><link rel="prefetch" href="/assets/heroku.html.11a50c3d.js"><link rel="prefetch" href="/assets/supabase.html.596e6499.js"><link rel="prefetch" href="/assets/vps.html.b7685121.js"><link rel="prefetch" href="/assets/index.html.750fa638.js"><link rel="prefetch" href="/assets/index.html.e11cf300.js"><link rel="prefetch" href="/assets/auto-retry.html.a115d028.js"><link rel="prefetch" href="/assets/autoquote.html.17c58163.js"><link rel="prefetch" href="/assets/command-filter.html.234d8353.js"><link rel="prefetch" href="/assets/console-time.html.b1fbedc9.js"><link rel="prefetch" href="/assets/conversations.html.ae4dabdd.js"><link rel="prefetch" href="/assets/emoji.html.8b513841.js"><link rel="prefetch" href="/assets/files.html.393e646e.js"><link rel="prefetch" href="/assets/fluent.html.cd245fde.js"><link rel="prefetch" href="/assets/guide.html.3c1f3f1d.js"><link rel="prefetch" href="/assets/hydrate.html.bb1272a6.js"><link rel="prefetch" href="/assets/i18n.html.5e582da1.js"><link rel="prefetch" href="/assets/keyboard.html.d449b0bc.js"><link rel="prefetch" href="/assets/menu.html.52271b65.js"><link rel="prefetch" href="/assets/middlewares.html.5a3da8fb.js"><link rel="prefetch" href="/assets/parse-mode.html.f0196fcf.js"><link rel="prefetch" href="/assets/ratelimiter.html.36ae8f68.js"><link rel="prefetch" href="/assets/router.html.9dac34b0.js"><link rel="prefetch" href="/assets/runner.html.a5ded8ac.js"><link rel="prefetch" href="/assets/session.html.9e37c174.js"><link rel="prefetch" href="/assets/stateless-question.html.20211588.js"><link rel="prefetch" href="/assets/transformer-throttler.html.4d82eb0f.js"><link rel="prefetch" href="/assets/about.html.13d58ed7.js"><link rel="prefetch" href="/assets/comparison.html.fce96edf.js"><link rel="prefetch" href="/assets/faq.html.ecd9df48.js"><link rel="prefetch" href="/assets/index.html.06962d44.js"><link rel="prefetch" href="/assets/index.html.ff01e651.js"><link rel="prefetch" href="/assets/deployment.html.0dbb5973.js"><link rel="prefetch" href="/assets/flood.html.548597e6.js"><link rel="prefetch" href="/assets/middleware.html.bff41f1d.js"><link rel="prefetch" href="/assets/proxy.html.9e2da649.js"><link rel="prefetch" href="/assets/reliability.html.29d5fce2.js"><link rel="prefetch" href="/assets/scaling.html.c202e4e0.js"><link rel="prefetch" href="/assets/structuring.html.3b0ea25b.js"><link rel="prefetch" href="/assets/transformers.html.e9394f28.js"><link rel="prefetch" href="/assets/index.html.164004f5.js"><link rel="prefetch" href="/assets/examples.html.c0335aa0.js"><link rel="prefetch" href="/assets/index.html.16b1273c.js"><link rel="prefetch" href="/assets/api.html.fff4d393.js"><link rel="prefetch" href="/assets/basics.html.4ae43ef7.js"><link rel="prefetch" href="/assets/commands.html.1df83ee6.js"><link rel="prefetch" href="/assets/context.html.b31db3a4.js"><link rel="prefetch" href="/assets/deployment-types.html.85530744.js"><link rel="prefetch" href="/assets/errors.html.2917374b.js"><link rel="prefetch" href="/assets/files.html.b6e890d8.js"><link rel="prefetch" href="/assets/filter-queries.html.2449601c.js"><link rel="prefetch" href="/assets/games.html.f03a0ae7.js"><link rel="prefetch" href="/assets/getting-started.html.5f6ffc21.js"><link rel="prefetch" href="/assets/inline-queries.html.336ff8d1.js"><link rel="prefetch" href="/assets/introduction.html.8a96310f.js"><link rel="prefetch" href="/assets/middleware.html.f7b2716e.js"><link rel="prefetch" href="/assets/comparison.html.c2d31601.js"><link rel="prefetch" href="/assets/deno-deploy.html.68ce180d.js"><link rel="prefetch" href="/assets/gcf.html.65d52c29.js"><link rel="prefetch" href="/assets/heroku.html.372d6c6f.js"><link rel="prefetch" href="/assets/supabase.html.69cb6e23.js"><link rel="prefetch" href="/assets/vps.html.3ca27174.js"><link rel="prefetch" href="/assets/index.html.d1ab1b17.js"><link rel="prefetch" href="/assets/auto-retry.html.43688119.js"><link rel="prefetch" href="/assets/autoquote.html.eab30649.js"><link rel="prefetch" href="/assets/command-filter.html.f91e0fb3.js"><link rel="prefetch" href="/assets/console-time.html.95a60e7a.js"><link rel="prefetch" href="/assets/conversations.html.ac5a9ff2.js"><link rel="prefetch" href="/assets/emoji.html.0ef3b386.js"><link rel="prefetch" href="/assets/files.html.35af7866.js"><link rel="prefetch" href="/assets/fluent.html.576af7e0.js"><link rel="prefetch" href="/assets/guide.html.b55e3396.js"><link rel="prefetch" href="/assets/hydrate.html.9eecaa46.js"><link rel="prefetch" href="/assets/i18n.html.2208938c.js"><link rel="prefetch" href="/assets/keyboard.html.3ce1498a.js"><link rel="prefetch" href="/assets/menu.html.6737f7cd.js"><link rel="prefetch" href="/assets/middlewares.html.e546065e.js"><link rel="prefetch" href="/assets/parse-mode.html.7a0956c8.js"><link rel="prefetch" href="/assets/ratelimiter.html.f506174d.js"><link rel="prefetch" href="/assets/router.html.02dd36cd.js"><link rel="prefetch" href="/assets/runner.html.9ba6959a.js"><link rel="prefetch" href="/assets/session.html.8b2d793e.js"><link rel="prefetch" href="/assets/stateless-question.html.db6ba7fa.js"><link rel="prefetch" href="/assets/transformer-throttler.html.f87ac27e.js"><link rel="prefetch" href="/assets/about.html.e2c928cd.js"><link rel="prefetch" href="/assets/comparison.html.8cd091bd.js"><link rel="prefetch" href="/assets/faq.html.ce4f887d.js"><link rel="prefetch" href="/assets/index.html.76be013c.js"><link rel="prefetch" href="/assets/deployment.html.14717062.js"><link rel="prefetch" href="/assets/flood.html.abac6875.js"><link rel="prefetch" href="/assets/middleware.html.0d5b4708.js"><link rel="prefetch" href="/assets/proxy.html.1899a2cc.js"><link rel="prefetch" href="/assets/reliability.html.cf5f3503.js"><link rel="prefetch" href="/assets/scaling.html.8ec58516.js"><link rel="prefetch" href="/assets/structuring.html.1f9e161c.js"><link rel="prefetch" href="/assets/transformers.html.b1099986.js"><link rel="prefetch" href="/assets/index.html.f669eb78.js"><link rel="prefetch" href="/assets/examples.html.95809395.js"><link rel="prefetch" href="/assets/index.html.d0a555cc.js"><link rel="prefetch" href="/assets/api.html.07ccbe73.js"><link rel="prefetch" href="/assets/basics.html.7a777984.js"><link rel="prefetch" href="/assets/commands.html.4ed48b93.js"><link rel="prefetch" href="/assets/context.html.bc67c69b.js"><link rel="prefetch" href="/assets/deployment-types.html.4caa42a8.js"><link rel="prefetch" href="/assets/errors.html.9b0e8f5d.js"><link rel="prefetch" href="/assets/files.html.7086c0c6.js"><link rel="prefetch" href="/assets/filter-queries.html.6d4c30cf.js"><link rel="prefetch" href="/assets/games.html.1676e5ab.js"><link rel="prefetch" href="/assets/getting-started.html.3fd51b83.js"><link rel="prefetch" href="/assets/inline-queries.html.bf0c3a59.js"><link rel="prefetch" href="/assets/introduction.html.3c83b16f.js"><link rel="prefetch" href="/assets/middleware.html.8012fa3e.js"><link rel="prefetch" href="/assets/comparison.html.dce765eb.js"><link rel="prefetch" href="/assets/deno-deploy.html.a670eb2d.js"><link rel="prefetch" href="/assets/gcf.html.9d10a12e.js"><link rel="prefetch" href="/assets/heroku.html.f6640b6a.js"><link rel="prefetch" href="/assets/supabase.html.f3d63327.js"><link rel="prefetch" href="/assets/vps.html.c24935ca.js"><link rel="prefetch" href="/assets/index.html.ce3e5648.js"><link rel="prefetch" href="/assets/auto-retry.html.3920fc5b.js"><link rel="prefetch" href="/assets/autoquote.html.2d544c6d.js"><link rel="prefetch" href="/assets/command-filter.html.583ef6bb.js"><link rel="prefetch" href="/assets/console-time.html.18f0105c.js"><link rel="prefetch" href="/assets/conversations.html.2018ed45.js"><link rel="prefetch" href="/assets/emoji.html.29403d7e.js"><link rel="prefetch" href="/assets/files.html.6e205a00.js"><link rel="prefetch" href="/assets/fluent.html.14253c82.js"><link rel="prefetch" href="/assets/guide.html.74eef78a.js"><link rel="prefetch" href="/assets/hydrate.html.9410a402.js"><link rel="prefetch" href="/assets/i18n.html.25a0b66a.js"><link rel="prefetch" href="/assets/keyboard.html.4d810fe2.js"><link rel="prefetch" href="/assets/menu.html.cfb1c276.js"><link rel="prefetch" href="/assets/middlewares.html.867fa3c3.js"><link rel="prefetch" href="/assets/parse-mode.html.05c67127.js"><link rel="prefetch" href="/assets/ratelimiter.html.fac2803b.js"><link rel="prefetch" href="/assets/router.html.7bb13568.js"><link rel="prefetch" href="/assets/runner.html.3aceb2cb.js"><link rel="prefetch" href="/assets/session.html.607e1f78.js"><link rel="prefetch" href="/assets/stateless-question.html.ba289af4.js"><link rel="prefetch" href="/assets/transformer-throttler.html.2bc10895.js"><link rel="prefetch" href="/assets/about.html.dd8dd1bd.js"><link rel="prefetch" href="/assets/comparison.html.08a9df49.js"><link rel="prefetch" href="/assets/faq.html.f191f0dd.js"><link rel="prefetch" href="/assets/index.html.e3f1da9f.js"><link rel="prefetch" href="/assets/deployment.html.fd840b2c.js"><link rel="prefetch" href="/assets/flood.html.527bddc9.js"><link rel="prefetch" href="/assets/middleware.html.601f2461.js"><link rel="prefetch" href="/assets/proxy.html.b3f4fd17.js"><link rel="prefetch" href="/assets/reliability.html.de662784.js"><link rel="prefetch" href="/assets/scaling.html.50f1aee4.js"><link rel="prefetch" href="/assets/structuring.html.504ad325.js"><link rel="prefetch" href="/assets/transformers.html.b01cd3a5.js"><link rel="prefetch" href="/assets/index.html.77f24b3c.js"><link rel="prefetch" href="/assets/examples.html.45e1d7a6.js"><link rel="prefetch" href="/assets/index.html.638ef323.js"><link rel="prefetch" href="/assets/api.html.e5cf0e01.js"><link rel="prefetch" href="/assets/basics.html.bf414460.js"><link rel="prefetch" href="/assets/commands.html.6297b0fa.js"><link rel="prefetch" href="/assets/deployment-types.html.ca12af08.js"><link rel="prefetch" href="/assets/errors.html.211a03c8.js"><link rel="prefetch" href="/assets/files.html.5006be4b.js"><link rel="prefetch" href="/assets/filter-queries.html.8f06af7d.js"><link rel="prefetch" href="/assets/games.html.ee8db9b6.js"><link rel="prefetch" href="/assets/getting-started.html.ae61e581.js"><link rel="prefetch" href="/assets/inline-queries.html.56b1e257.js"><link rel="prefetch" href="/assets/introduction.html.bc652fe4.js"><link rel="prefetch" href="/assets/middleware.html.6da491ad.js"><link rel="prefetch" href="/assets/comparison.html.b5915a0a.js"><link rel="prefetch" href="/assets/deno-deploy.html.6f0e3402.js"><link rel="prefetch" href="/assets/gcf.html.278ead85.js"><link rel="prefetch" href="/assets/heroku.html.9708b190.js"><link rel="prefetch" href="/assets/supabase.html.0c245912.js"><link rel="prefetch" href="/assets/vps.html.74227816.js"><link rel="prefetch" href="/assets/index.html.e997bf2c.js"><link rel="prefetch" href="/assets/auto-retry.html.daf50f40.js"><link rel="prefetch" href="/assets/autoquote.html.b16395ae.js"><link rel="prefetch" href="/assets/command-filter.html.f7623237.js"><link rel="prefetch" href="/assets/console-time.html.8ef1305b.js"><link rel="prefetch" href="/assets/conversations.html.eab8c546.js"><link rel="prefetch" href="/assets/emoji.html.4a9bc117.js"><link rel="prefetch" href="/assets/files.html.015d6d74.js"><link rel="prefetch" href="/assets/fluent.html.cbfac932.js"><link rel="prefetch" href="/assets/guide.html.66ddf4cd.js"><link rel="prefetch" href="/assets/hydrate.html.13016f6a.js"><link rel="prefetch" href="/assets/i18n.html.df56fd54.js"><link rel="prefetch" href="/assets/keyboard.html.5c7ecedb.js"><link rel="prefetch" href="/assets/menu.html.6d144122.js"><link rel="prefetch" href="/assets/middlewares.html.8b855ec0.js"><link rel="prefetch" href="/assets/parse-mode.html.93810899.js"><link rel="prefetch" href="/assets/ratelimiter.html.8d10a31f.js"><link rel="prefetch" href="/assets/router.html.37d260a5.js"><link rel="prefetch" href="/assets/runner.html.836a3241.js"><link rel="prefetch" href="/assets/session.html.e6dfe9a3.js"><link rel="prefetch" href="/assets/stateless-question.html.3d5cdbaa.js"><link rel="prefetch" href="/assets/transformer-throttler.html.34ce9ca4.js"><link rel="prefetch" href="/assets/about.html.6e436155.js"><link rel="prefetch" href="/assets/comparison.html.daaaf6fa.js"><link rel="prefetch" href="/assets/faq.html.e1d35ea3.js"><link rel="prefetch" href="/assets/404.html.e1c3fb30.js">
    <link rel="stylesheet" href="/assets/style.e2836941.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/zh/" class=""><img class="logo" src="/Y.png" alt="grammY"><span class="site-name can-hide">grammY</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/zh/guide/" class="router-link-active" aria-label="基础"><!--[--><!--]--><span>基础 <!--v-if--></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="了解"><span class="title">了解</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="了解"><span class="title">了解</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/guide/" class="" aria-label="概述"><!--[--><!--]--><span>概述 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/introduction.html" class="" aria-label="简介"><!--[--><!--]--><span>简介 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/getting-started.html" class="" aria-label="入门"><!--[--><!--]--><span>入门 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/basics.html" class="" aria-label="发送和接收消息"><!--[--><!--]--><span>发送和接收消息 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/zh/guide/context.html" class="router-link-active router-link-exact-active router-link-active" aria-label="上下文"><!--[--><!--]--><span>上下文 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/api.html" class="" aria-label="Bot API"><!--[--><!--]--><span>Bot API <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/filter-queries.html" class="" aria-label="Filter 查询与 bot.on()"><!--[--><!--]--><span>Filter 查询与 bot.on() <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/commands.html" class="" aria-label="Commands"><!--[--><!--]--><span>Commands <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/middleware.html" class="" aria-label="中间件"><!--[--><!--]--><span>中间件 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/errors.html" class="" aria-label="错误处理"><!--[--><!--]--><span>错误处理 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/inline-queries.html" class="" aria-label="Inline Queries"><!--[--><!--]--><span>Inline Queries <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/files.html" class="" aria-label="文件管理"><!--[--><!--]--><span>文件管理 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/games.html" class="" aria-label="游戏"><!--[--><!--]--><span>游戏 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/deployment-types.html" class="" aria-label="长轮询 vs. Webhooks"><!--[--><!--]--><span>长轮询 vs. Webhooks <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>进阶 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/advanced/" class="" aria-label="概述"><!--[--><!--]--><span>概述 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/middleware.html" class="" aria-label="重构中间件"><!--[--><!--]--><span>重构中间件 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/structuring.html" class="" aria-label="I: 代码组织"><!--[--><!--]--><span>I: 代码组织 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/scaling.html" class="" aria-label="II: 高负载"><!--[--><!--]--><span>II: 高负载 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/reliability.html" class="" aria-label="III: 可靠性"><!--[--><!--]--><span>III: 可靠性 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/flood.html" class="" aria-label="IV: 流量限制"><!--[--><!--]--><span>IV: 流量限制 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/transformers.html" class="" aria-label="Bot API Transformers"><!--[--><!--]--><span>Bot API Transformers <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/proxy.html" class="" aria-label="代理支持"><!--[--><!--]--><span>代理支持 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/deployment.html" class="" aria-label="部署"><!--[--><!--]--><span>部署 <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="插件"><span class="title">插件</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="插件"><span class="title">插件</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>简介 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/plugins/" class="" aria-label="关于插件"><!--[--><!--]--><span>关于插件 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/guide.html" class="" aria-label="如何编写一个插件"><!--[--><!--]--><span>如何编写一个插件 <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>内置插件 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/plugins/session.html" class="" aria-label="会话与数据储存"><!--[--><!--]--><span>会话与数据储存 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/keyboard.html" class="" aria-label="Inline 与自定义 Keyboards"><!--[--><!--]--><span>Inline 与自定义 Keyboards <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>官方维护 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/plugins/conversations.html" class="" aria-label="对话 (conversations)"><!--[--><!--]--><span>对话 (conversations) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/menu.html" class="" aria-label="互动菜单 (menu)"><!--[--><!--]--><span>互动菜单 (menu) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/stateless-question.html" class="" aria-label="无状态问题 (stateless-question)"><!--[--><!--]--><span>无状态问题 (stateless-question) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/runner.html" class="" aria-label="并发 (runner)"><!--[--><!--]--><span>并发 (runner) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/hydrate.html" class="" aria-label="Hydration (hydrate)"><!--[--><!--]--><span>Hydration (hydrate) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/auto-retry.html" class="" aria-label="重试 API 请求 (auto-retry)"><!--[--><!--]--><span>重试 API 请求 (auto-retry) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/transformer-throttler.html" class="" aria-label="流量控制 (transformer-throttler)"><!--[--><!--]--><span>流量控制 (transformer-throttler) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/ratelimiter.html" class="" aria-label="限制用户速率 (ratelimiter)"><!--[--><!--]--><span>限制用户速率 (ratelimiter) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/files.html" class="" aria-label="文件助手 (files)"><!--[--><!--]--><span>文件助手 (files) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/i18n.html" class="" aria-label="国际化 (i18n)"><!--[--><!--]--><span>国际化 (i18n) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/fluent.html" class="" aria-label="国际化 (fluent)"><!--[--><!--]--><span>国际化 (fluent) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/router.html" class="" aria-label="路由器 (router)"><!--[--><!--]--><span>路由器 (router) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/emoji.html" class="" aria-label="Emoji (emoji)"><!--[--><!--]--><span>Emoji (emoji) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/parse-mode.html" class="" aria-label="解析模式 (parse-mode)"><!--[--><!--]--><span>解析模式 (parse-mode) <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>第三方 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/plugins/console-time.html" class="" aria-label="调试时输出日志"><!--[--><!--]--><span>调试时输出日志 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/middlewares.html" class="" aria-label="有用的中间件"><!--[--><!--]--><span>有用的中间件 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/autoquote.html" class="" aria-label="自动引用"><!--[--><!--]--><span>自动引用 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/#创建你自己的插件" class="" aria-label="[等待你的 PR!]"><!--[--><!--]--><span>[等待你的 PR!] <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="示例"><span class="title">示例</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="示例"><span class="title">示例</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>示例 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/awesome-grammY" rel="noopener noreferrer" target="_blank" aria-label="Awesome grammY"><!--[--><!--]--><span>Awesome grammY <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/examples" rel="noopener noreferrer" target="_blank" aria-label="示例 Bots 仓库"><!--[--><!--]--><span>示例 Bots 仓库 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="资源"><span class="title">资源</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="资源"><span class="title">资源</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>grammY <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/resources/about.html" class="" aria-label="关于 grammY"><!--[--><!--]--><span>关于 grammY <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs" rel="noopener noreferrer" target="_blank" aria-label="社区聊天（英语）"><!--[--><!--]--><span>社区聊天（英语） <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_ru" rel="noopener noreferrer" target="_blank" aria-label="社区聊天（俄语）"><!--[--><!--]--><span>社区聊天（俄语） <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_news" rel="noopener noreferrer" target="_blank" aria-label="咨询"><!--[--><!--]--><span>咨询 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://twitter.com/grammy_js" rel="noopener noreferrer" target="_blank" aria-label="Twitter"><!--[--><!--]--><span>Twitter <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/resources/faq.html" class="" aria-label="FAQ"><!--[--><!--]--><span>FAQ <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/resources/comparison.html" class="" aria-label="与其他框架的比较"><!--[--><!--]--><span>与其他框架的比较 <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Telegram <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots" rel="noopener noreferrer" target="_blank" aria-label="面向开发者的介绍"><!--[--><!--]--><span>面向开发者的介绍 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/faq" rel="noopener noreferrer" target="_blank" aria-label="Bots FAQ"><!--[--><!--]--><span>Bots FAQ <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/api" rel="noopener noreferrer" target="_blank" aria-label="Bot API 概览"><!--[--><!--]--><span>Bot API 概览 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/webhooks#testing-your-bot-with-updates" rel="noopener noreferrer" target="_blank" aria-label="Updates 示例"><!--[--><!--]--><span>Updates 示例 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="托管服务"><span class="title">托管服务</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="托管服务"><span class="title">托管服务</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>总览 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/hosting/comparison.html" class="" aria-label="对比"><!--[--><!--]--><span>对比 <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>教程 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/hosting/deno-deploy.html" class="" aria-label="Deno Deploy"><!--[--><!--]--><span>Deno Deploy <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/hosting/supabase.html" class="" aria-label="Supabase Edge Functions"><!--[--><!--]--><span>Supabase Edge Functions <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/hosting/heroku.html" class="" aria-label="Heroku"><!--[--><!--]--><span>Heroku <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/hosting/gcf.html" class="" aria-label="Google Cloud Functions"><!--[--><!--]--><span>Google Cloud Functions <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/hosting/vps.html" class="" aria-label="Virtual Private Server"><!--[--><!--]--><span>Virtual Private Server <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts" rel="noopener noreferrer" target="_blank" aria-label="API 参考"><!--[--><!--]--><span>API 参考 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">语言</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">语言</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><a href="/guide/context.html" class="" aria-label="English"><!--[--><!--]--><span>English <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guide/context.html" class="" aria-label="Español"><!--[--><!--]--><span>Español <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guide/context.html" class="" aria-label="Indonesia"><!--[--><!--]--><span>Indonesia <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/guide/context.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--><span>简体中文 <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/grammyjs/grammY" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--><span>GitHub <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/zh/guide/" class="router-link-active" aria-label="基础"><!--[--><!--]--><span>基础 <!--v-if--></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="了解"><span class="title">了解</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="了解"><span class="title">了解</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/guide/" class="" aria-label="概述"><!--[--><!--]--><span>概述 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/introduction.html" class="" aria-label="简介"><!--[--><!--]--><span>简介 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/getting-started.html" class="" aria-label="入门"><!--[--><!--]--><span>入门 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/basics.html" class="" aria-label="发送和接收消息"><!--[--><!--]--><span>发送和接收消息 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/zh/guide/context.html" class="router-link-active router-link-exact-active router-link-active" aria-label="上下文"><!--[--><!--]--><span>上下文 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/api.html" class="" aria-label="Bot API"><!--[--><!--]--><span>Bot API <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/filter-queries.html" class="" aria-label="Filter 查询与 bot.on()"><!--[--><!--]--><span>Filter 查询与 bot.on() <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/commands.html" class="" aria-label="Commands"><!--[--><!--]--><span>Commands <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/middleware.html" class="" aria-label="中间件"><!--[--><!--]--><span>中间件 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/errors.html" class="" aria-label="错误处理"><!--[--><!--]--><span>错误处理 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/inline-queries.html" class="" aria-label="Inline Queries"><!--[--><!--]--><span>Inline Queries <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/files.html" class="" aria-label="文件管理"><!--[--><!--]--><span>文件管理 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/games.html" class="" aria-label="游戏"><!--[--><!--]--><span>游戏 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/guide/deployment-types.html" class="" aria-label="长轮询 vs. Webhooks"><!--[--><!--]--><span>长轮询 vs. Webhooks <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>进阶 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/advanced/" class="" aria-label="概述"><!--[--><!--]--><span>概述 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/middleware.html" class="" aria-label="重构中间件"><!--[--><!--]--><span>重构中间件 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/structuring.html" class="" aria-label="I: 代码组织"><!--[--><!--]--><span>I: 代码组织 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/scaling.html" class="" aria-label="II: 高负载"><!--[--><!--]--><span>II: 高负载 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/reliability.html" class="" aria-label="III: 可靠性"><!--[--><!--]--><span>III: 可靠性 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/flood.html" class="" aria-label="IV: 流量限制"><!--[--><!--]--><span>IV: 流量限制 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/transformers.html" class="" aria-label="Bot API Transformers"><!--[--><!--]--><span>Bot API Transformers <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/proxy.html" class="" aria-label="代理支持"><!--[--><!--]--><span>代理支持 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/advanced/deployment.html" class="" aria-label="部署"><!--[--><!--]--><span>部署 <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="插件"><span class="title">插件</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="插件"><span class="title">插件</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>简介 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/plugins/" class="" aria-label="关于插件"><!--[--><!--]--><span>关于插件 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/guide.html" class="" aria-label="如何编写一个插件"><!--[--><!--]--><span>如何编写一个插件 <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>内置插件 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/plugins/session.html" class="" aria-label="会话与数据储存"><!--[--><!--]--><span>会话与数据储存 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/keyboard.html" class="" aria-label="Inline 与自定义 Keyboards"><!--[--><!--]--><span>Inline 与自定义 Keyboards <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>官方维护 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/plugins/conversations.html" class="" aria-label="对话 (conversations)"><!--[--><!--]--><span>对话 (conversations) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/menu.html" class="" aria-label="互动菜单 (menu)"><!--[--><!--]--><span>互动菜单 (menu) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/stateless-question.html" class="" aria-label="无状态问题 (stateless-question)"><!--[--><!--]--><span>无状态问题 (stateless-question) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/runner.html" class="" aria-label="并发 (runner)"><!--[--><!--]--><span>并发 (runner) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/hydrate.html" class="" aria-label="Hydration (hydrate)"><!--[--><!--]--><span>Hydration (hydrate) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/auto-retry.html" class="" aria-label="重试 API 请求 (auto-retry)"><!--[--><!--]--><span>重试 API 请求 (auto-retry) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/transformer-throttler.html" class="" aria-label="流量控制 (transformer-throttler)"><!--[--><!--]--><span>流量控制 (transformer-throttler) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/ratelimiter.html" class="" aria-label="限制用户速率 (ratelimiter)"><!--[--><!--]--><span>限制用户速率 (ratelimiter) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/files.html" class="" aria-label="文件助手 (files)"><!--[--><!--]--><span>文件助手 (files) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/i18n.html" class="" aria-label="国际化 (i18n)"><!--[--><!--]--><span>国际化 (i18n) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/fluent.html" class="" aria-label="国际化 (fluent)"><!--[--><!--]--><span>国际化 (fluent) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/router.html" class="" aria-label="路由器 (router)"><!--[--><!--]--><span>路由器 (router) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/emoji.html" class="" aria-label="Emoji (emoji)"><!--[--><!--]--><span>Emoji (emoji) <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/parse-mode.html" class="" aria-label="解析模式 (parse-mode)"><!--[--><!--]--><span>解析模式 (parse-mode) <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>第三方 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/plugins/console-time.html" class="" aria-label="调试时输出日志"><!--[--><!--]--><span>调试时输出日志 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/middlewares.html" class="" aria-label="有用的中间件"><!--[--><!--]--><span>有用的中间件 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/autoquote.html" class="" aria-label="自动引用"><!--[--><!--]--><span>自动引用 <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/plugins/#创建你自己的插件" class="" aria-label="[等待你的 PR!]"><!--[--><!--]--><span>[等待你的 PR!] <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="示例"><span class="title">示例</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="示例"><span class="title">示例</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>示例 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/awesome-grammY" rel="noopener noreferrer" target="_blank" aria-label="Awesome grammY"><!--[--><!--]--><span>Awesome grammY <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/examples" rel="noopener noreferrer" target="_blank" aria-label="示例 Bots 仓库"><!--[--><!--]--><span>示例 Bots 仓库 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="资源"><span class="title">资源</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="资源"><span class="title">资源</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>grammY <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/resources/about.html" class="" aria-label="关于 grammY"><!--[--><!--]--><span>关于 grammY <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs" rel="noopener noreferrer" target="_blank" aria-label="社区聊天（英语）"><!--[--><!--]--><span>社区聊天（英语） <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_ru" rel="noopener noreferrer" target="_blank" aria-label="社区聊天（俄语）"><!--[--><!--]--><span>社区聊天（俄语） <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_news" rel="noopener noreferrer" target="_blank" aria-label="咨询"><!--[--><!--]--><span>咨询 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://twitter.com/grammy_js" rel="noopener noreferrer" target="_blank" aria-label="Twitter"><!--[--><!--]--><span>Twitter <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/resources/faq.html" class="" aria-label="FAQ"><!--[--><!--]--><span>FAQ <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/resources/comparison.html" class="" aria-label="与其他框架的比较"><!--[--><!--]--><span>与其他框架的比较 <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Telegram <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots" rel="noopener noreferrer" target="_blank" aria-label="面向开发者的介绍"><!--[--><!--]--><span>面向开发者的介绍 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/faq" rel="noopener noreferrer" target="_blank" aria-label="Bots FAQ"><!--[--><!--]--><span>Bots FAQ <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/api" rel="noopener noreferrer" target="_blank" aria-label="Bot API 概览"><!--[--><!--]--><span>Bot API 概览 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/webhooks#testing-your-bot-with-updates" rel="noopener noreferrer" target="_blank" aria-label="Updates 示例"><!--[--><!--]--><span>Updates 示例 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="托管服务"><span class="title">托管服务</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="托管服务"><span class="title">托管服务</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>总览 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/hosting/comparison.html" class="" aria-label="对比"><!--[--><!--]--><span>对比 <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>教程 <!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zh/hosting/deno-deploy.html" class="" aria-label="Deno Deploy"><!--[--><!--]--><span>Deno Deploy <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/hosting/supabase.html" class="" aria-label="Supabase Edge Functions"><!--[--><!--]--><span>Supabase Edge Functions <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/hosting/heroku.html" class="" aria-label="Heroku"><!--[--><!--]--><span>Heroku <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/hosting/gcf.html" class="" aria-label="Google Cloud Functions"><!--[--><!--]--><span>Google Cloud Functions <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zh/hosting/vps.html" class="" aria-label="Virtual Private Server"><!--[--><!--]--><span>Virtual Private Server <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts" rel="noopener noreferrer" target="_blank" aria-label="API 参考"><!--[--><!--]--><span>API 参考 <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">语言</span><!----><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">语言</span><!----><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- suppress type check error by implementing `as any` --><!--[--><li class="navbar-dropdown-item"><a href="/guide/context.html" class="" aria-label="English"><!--[--><!--]--><span>English <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guide/context.html" class="" aria-label="Español"><!--[--><!--]--><span>Español <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guide/context.html" class="" aria-label="Indonesia"><!--[--><!--]--><span>Indonesia <!--v-if--></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/guide/context.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--><span>简体中文 <!--v-if--></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/grammyjs/grammY" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--><span>GitHub <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">上下文 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/guide/context.html#可用信息" class="router-link-active router-link-exact-active sidebar-item" aria-label="可用信息"><!--[--><!--]--><span>可用信息 <!--v-if--></span><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/guide/context.html#快捷方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="快捷方式"><!--[--><!--]--><span>快捷方式 <!--v-if--></span><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/guide/context.html#可用操作" class="router-link-active router-link-exact-active sidebar-item" aria-label="可用操作"><!--[--><!--]--><span>可用操作 <!--v-if--></span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/guide/context.html#上下文对象是如何被创造的" class="router-link-active router-link-exact-active sidebar-item" aria-label="上下文对象是如何被创造的？"><!--[--><!--]--><span>上下文对象是如何被创造的？ <!--v-if--></span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/guide/context.html#定制你的上下文对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="定制你的上下文对象"><!--[--><!--]--><span>定制你的上下文对象 <!--v-if--></span><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/guide/context.html#通过中间件-推荐" class="router-link-active router-link-exact-active sidebar-item" aria-label="通过中间件（推荐）"><!--[--><!--]--><span>通过中间件（推荐） <!--v-if--></span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/guide/context.html#通过继承" class="router-link-active router-link-exact-active sidebar-item" aria-label="通过继承"><!--[--><!--]--><span>通过继承 <!--v-if--></span><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/guide/context.html#上下文调味剂" class="router-link-active router-link-exact-active sidebar-item" aria-label="上下文调味剂"><!--[--><!--]--><span>上下文调味剂 <!--v-if--></span><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/guide/context.html#添加式上下文调味剂" class="router-link-active router-link-exact-active sidebar-item" aria-label="添加式上下文调味剂"><!--[--><!--]--><span>添加式上下文调味剂 <!--v-if--></span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/guide/context.html#转换式上下文调味剂" class="router-link-active router-link-exact-active sidebar-item" aria-label="转换式上下文调味剂"><!--[--><!--]--><span>转换式上下文调味剂 <!--v-if--></span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/guide/context.html#结合不同类型的上下文调味剂" class="router-link-active router-link-exact-active sidebar-item" aria-label="结合不同类型的上下文调味剂"><!--[--><!--]--><span>结合不同类型的上下文调味剂 <!--v-if--></span><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="上下文" tabindex="-1"><a class="header-anchor" href="#上下文" aria-hidden="true">#</a> 上下文</h1><p><code>Context</code> 对象（<a href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/Context" target="_blank" rel="noopener noreferrer">grammY API 参考<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>）是 grammY 的一个重要部分。</p><p>每当你在你的 bot 对象上注册一个监听器时，这个监听器将收到一个上下文对象。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// `ctx` 是一个 `Context` 对象。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你可以使用上下文对象去做这些事情：</p><ul><li><a href="#%E5%8F%AF%E7%94%A8%E4%BF%A1%E6%81%AF">访问有关聊天信息的内容</a></li><li><a href="#%E5%8F%AF%E7%94%A8%E6%93%8D%E4%BD%9C">对信息进行响应的行动</a>.</li></ul><p>注意，上下文对象通常被称为 <code>ctx</code>。</p><h2 id="可用信息" tabindex="-1"><a class="header-anchor" href="#可用信息" aria-hidden="true">#</a> 可用信息</h2><p>当用户向你的 bot 发送消息时，你可以通过 <code>ctx<wbr>.message</code> 访问它。 举个例子，要获得消息的文本，你可以这样做：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// `txt` 在处理文本信息时将是一个 `string`。</span>
  <span class="token comment">// 如果收到的信息没有任何信息文本，它将是 `undefined`。</span>
  <span class="token comment">// 例如，照片、贴纸和其他信息。</span>
  <span class="token keyword">const</span> txt <span class="token operator">=</span> ctx<span class="token punctuation">.</span>message<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同样，你也可以访问消息对象的其他属性，例如 <code>ctx<wbr>.message<wbr>.chat</code> ，以了解消息发送地的聊天信息。 请查看 <a href="https://core.telegram.org/bots/api#message" target="_blank" rel="noopener noreferrer">Telegram Bot API 参考 中关于 <code>Message</code> 的部分<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，看看哪些数据是可用的。 另外，你可以简单地在你的代码编辑器中使用自动完成功能来查看可能的选项。</p><p>如果你为其他类型的监听器注册监听，<code>ctx</code> 也会给你关于这些的信息。 示例：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;edited_message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获得新的、经过编辑的信息文本。</span>
  <span class="token keyword">const</span> editedText <span class="token operator">=</span> ctx<span class="token punctuation">.</span>editedMessage<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此外，你可以访问 Telegram 发送给你的 bot 的原始 <code>Update</code> 对象（<a href="https://core.telegram.org/bots/api#update" target="_blank" rel="noopener noreferrer">Telegram Bot API 参考<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>）。 这个更新对象（<code>ctx<wbr>.update</code>）包含了 <code>ctx<wbr>.message</code> 之类的所有数据来源。</p><p>上下文对象包含关于你的机器人的信息，可以通过 <code>ctx<wbr>.me</code> 访问。</p><h3 id="快捷方式" tabindex="-1"><a class="header-anchor" href="#快捷方式" aria-hidden="true">#</a> 快捷方式</h3><p>在上下文对象上安装了一些快捷方式。</p><table><thead><tr><th>快捷方式</th><th>描述</th></tr></thead><tbody><tr><td><code>ctx<wbr>.msg</code></td><td>获取 <code>message</code> 对象，包括已编辑的信息对象</td></tr><tr><td><code>ctx<wbr>.chat</code></td><td>获取 <code>chat</code> 对象</td></tr><tr><td><code>ctx<wbr>.sender<wbr>Chat</code></td><td>从 <code>ctx<wbr>.msg</code> 中获取发送者聊天对象（用于匿名通道/群组消息）。</td></tr><tr><td><code>ctx<wbr>.from</code></td><td>获取消息的作者，回调查询，或其他东西的作者</td></tr><tr><td><code>ctx<wbr>.inline<wbr>Message<wbr>Id</code></td><td>获取回调查询的内联信息标识符或选择的内联结果</td></tr></tbody></table><p>换句话说，你也可以这样做：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取接收到的信息的文本。</span>
  <span class="token keyword">const</span> text <span class="token operator">=</span> ctx<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;edited_message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获得新的、经过编辑的信息文本。</span>
  <span class="token keyword">const</span> editedText <span class="token operator">=</span> ctx<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因此，如果你愿意，你可以忘记 <code>ctx<wbr>.message</code> 和 <code>ctx<wbr>.channel<wbr>Post</code> 以及 <code>ctx<wbr>.edited<wbr>Message</code> 等等，而只是一直使用 <code>ctx<wbr>.msg</code> 来代替。</p><h2 id="可用操作" tabindex="-1"><a class="header-anchor" href="#可用操作" aria-hidden="true">#</a> 可用操作</h2><p>如果你想回应一个用户的信息，你可以这样：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取聊天 id。</span>
  <span class="token keyword">const</span> chatId <span class="token operator">=</span> ctx<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>chat<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
  <span class="token comment">// 要回复的文本。</span>
  <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token string">&quot;I got your message!&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 发送回复。</span>
  <span class="token keyword">await</span> bot<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>chatId<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你可以注意到，这有两点不是最佳的选择：</p><ol><li>我们必须能够访问 <code>bot</code> 对象。 这意味着我们必须在我们的代码库中传递 <code>bot</code> 对象，以便做出反应，当你有多个源文件，并且在其他地方定义了你的监听器时，这就很烦人。</li><li>我们必须取出上下文的聊天标识符，并再次明确将其传递给 <code>send<wbr>Message</code>。 这也很烦人，因为你很可能总是想回复发出信息的同一个用户。 想象一下！你会有多频繁地一遍又一遍，一遍又一遍打出同样的东西</li></ol><p>关于第 1 点，上下文对象只是为你提供了访问 <code>bot<wbr>.api</code> 上的相同的API对象，它被称为 <code>ctx<wbr>.api</code>。 你现在可以写 <code>ctx<wbr>.api<wbr>.send<wbr>Message</code> 来代替，你不再需要传递你的 <code>bot</code> 对象。 很简单。</p><p>然而，真正需要花大力气解决的是第二点。 <code>ctx</code> 对象可以让你简单地发送一个像这样的回复：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;I got your message!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 甚至可以再简单一点：</span>
bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Gotcha!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>很整洁! 🎉</p><p>在后台，上下文 <em>已经知道</em> 它的聊天标识符（即 <code>ctx<wbr>.msg<wbr>.chat<wbr>.id</code>），所以它给你 <code>reply</code> 方法，让你向同一个聊天记录发送消息。 在内部，<code>reply</code> 再次调用 <code>send<wbr>Message</code>，并为您预先填写了聊天标识符。</p><p>因此，正如 <a href="/zh/guide/basics.html#%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF" class="">前面</a> 所解释的，上下文对象的所有方法都可以接受 <code>Other</code> 类型的选项对象，以传递给每个 API 调用。 这可以用于向每个 API 调用传递进一步的配置。</p><div class="custom-container tip"><p class="custom-container-title">Telegram 的回复功能</p><p>尽管该方法在 grammY （和许多其他框架）中被称为 <code>ctx<wbr>.reply</code>，但它并没有使用 <a href="https://telegram.org/blog/replies-mentions-hashtags#replies" target="_blank" rel="noopener noreferrer">Telegram 的回复功能<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，因为在 Telegram 中，前一条信息是被链接的。</p><p>如果你在 <a href="https://core.telegram.org/bots/api#sendmessage" target="_blank" rel="noopener noreferrer">Telegram Bot API 参考<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 中查看 <code>send<wbr>Message</code> 能做什么，你会看到一些选项，比如<code>parse<wbr>_mode</code>，<code>disable<wbr>_web<wbr>_page<wbr>_preview</code> 和 <code>reply<wbr>_to<wbr>_message<wbr>_id</code>。 最后的那个选项可以使一条消息成为回复：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;^ This is a message!&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  reply_to_message_id<span class="token operator">:</span> ctx<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>message_id<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同样的选项对象可以传递给 <code>bot<wbr>.api<wbr>.send<wbr>Message</code> 和 <code>ctx<wbr>.api<wbr>.send<wbr>Message</code>。 在你的代码编辑器中使用自动完成来查看可用的选项。</p></div><p>当然，<code>ctx<wbr>.api</code> 上的每一个其他方法都有一个快捷方式，并且有正确的预填值，比如 <code>ctx<wbr>.reply<wbr>With<wbr>Photo</code> 用来回复照片，或者 <code>ctx<wbr>.export<wbr>Chat<wbr>Invite<wbr>Link</code> 用来获取相应聊天的邀请链接。如果你想了解存在哪些快捷方式，那么自动完成是你的伙伴，还有 <a href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/Context" target="_blank" rel="noopener noreferrer">grammY API 参考<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><p>请注意，你可能不希望总是在同一个聊天中做出回复。 在这种情况下，你可以退回到使用 <code>ctx<wbr>.api</code> 方法，并在调用它们时指定所有选项。 例如，如果你收到来自 Alice 的消息，并想通过向 Bob 发送消息来做出反应，那么你不能使用 <code>ctx<wbr>.reply</code> ，因为它总是会向 Alice 的聊天室发送消息。 那么你就可以调用 <code>ctx<wbr>.api<wbr>.send<wbr>Message</code> 并指定 Bob 的聊天标识符。</p><h2 id="上下文对象是如何被创造的" tabindex="-1"><a class="header-anchor" href="#上下文对象是如何被创造的" aria-hidden="true">#</a> 上下文对象是如何被创造的？</h2><p>每当你的机器人从 Telegram 收到一条新消息时，它就会被包裹在一个 update 对象中。 事实上，update 对象不仅可以包含新的消息，还可以包含所有其他种类的东西，例如对消息的编辑、投票的回答，以及 <a href="https://core.telegram.org/bots/api#update" target="_blank" rel="noopener noreferrer">更多<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><p>对于每一个传入的 update，都会精确地创建一个新的 <code>Context</code> 对象。 不同 update 的上下文是完全不相关的对象，它们只是通过 <code>ctx<wbr>.me</code> 引用相同的 bot 信息。</p><p>一个 update 的相同上下文对象将被 bot 上所有安装的中间件（<a href="/zh/guide/middleware.html" class="">docs</a>）共享。</p><h2 id="定制你的上下文对象" tabindex="-1"><a class="header-anchor" href="#定制你的上下文对象" aria-hidden="true">#</a> 定制你的上下文对象</h2><blockquote><p>如果你是初次使用 <code>Context</code>，那么请暂时忽略这一部分。</p></blockquote><p>如果你愿意，你可以在 <code>Context</code> 对象上安装你自己的需要的。</p><h3 id="通过中间件-推荐" tabindex="-1"><a class="header-anchor" href="#通过中间件-推荐" aria-hidden="true">#</a> 通过中间件（推荐）</h3><p>在 <a href="/zh/guide/middleware.html" class="">中间件</a> 中，可以轻松完成定制。</p><div class="custom-container tip"><p class="custom-container-title">什么是中间件？</p><p>本节需要对中间件有所了解，所以如果你还没有跳过到 <a href="/zh/guide/middleware.html" class="">这一部分</a>，那么这里有一个非常简短的总结。</p><p>你需要知道，多个处理程序可以处理相同的上下文对象。 有一些特殊处理程序可以在任何其他处理程序之前修改 <code>ctx</code>，并且第一个处理程序的修改对所有后续处理程序都是可见的。</p></div><p>这个思想是在注册其他监听器之前安装中间件。 然后你可以在这些处理程序中设置你想要的属性。</p><p>为了便于说明，我们假设你想要在上下文对象上设置一个属性 <code>ctx<wbr>.config</code>。 在这个例子中，我们将使用它来存储一些项目相关的配置，以便所有处理程序都能访问它。 这个配置将让我们更容易检测机器人是被它的开发者还是普通用户使用。</p><p>在创建你的机器人之后，请这样做：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token constant">BOT_DEVELOPER</span> <span class="token operator">=</span> <span class="token number">123456</span><span class="token punctuation">;</span> <span class="token comment">// bot 开发者的聊天标识符</span>

bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 通过设置配置，在这里修改上下文对象。</span>
  ctx<span class="token punctuation">.</span>config <span class="token operator">=</span> <span class="token punctuation">{</span>
    botDeveloper<span class="token operator">:</span> <span class="token constant">BOT_DEVELOPER</span><span class="token punctuation">,</span>
    isDeveloper<span class="token operator">:</span> ctx<span class="token punctuation">.</span>from<span class="token operator">?.</span>id <span class="token operator">===</span> <span class="token constant">BOT_DEVELOPER</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 运行其余处理程序。</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后，你可以在其余处理程序中使用 <code>ctx<wbr>.config</code>。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在这里使用修改过的上下文！</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>config<span class="token punctuation">.</span>isDeveloper<span class="token punctuation">)</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Hi mom!! &lt;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Welcome, human!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然而，你会发现 TypeScript 不知道 <code>ctx<wbr>.config</code> 是可用的，即使我们正确地赋值了属性。 因此，尽管这段代码在运行时可以正常工作，但是它不能编译。 为了解决这个问题，我们需要调整上下文的类型，并且添加属性。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">BotConfig</span> <span class="token punctuation">{</span>
  botDeveloper<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  isDeveloper<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">MyContext</span> <span class="token operator">=</span> Context <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
  config<span class="token operator">:</span> BotConfig<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>新类型 <code>My<wbr>Context</code> 现在更加准确地描述了我们机器人正在处理的上下文对象。</p><blockquote><p>你需要确保你的类型和你初始化的属性保持同步。</p></blockquote><p>我们可以通过将新类型传递给 <code>Bot</code> 构造函数来使用它。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot<span class="token operator">&lt;</span>MyContext<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>综上所述，设置将像这样：</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TypeScript</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">JavaScript</button></li></ul></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token constant">BOT_DEVELOPER</span> <span class="token operator">=</span> <span class="token number">123456</span><span class="token punctuation">;</span> <span class="token comment">// bot 开发者的聊天标识符</span>

<span class="token comment">// 定义自定义上下文类型。</span>
<span class="token keyword">interface</span> <span class="token class-name">BotConfig</span> <span class="token punctuation">{</span>
  botDeveloper<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  isDeveloper<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">MyContext</span> <span class="token operator">=</span> Context <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
  config<span class="token operator">:</span> BotConfig<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot<span class="token operator">&lt;</span>MyContext<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在上下文对象上设置自定义属性。</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span>config <span class="token operator">=</span> <span class="token punctuation">{</span>
    botDeveloper<span class="token operator">:</span> <span class="token constant">BOT_DEVELOPER</span><span class="token punctuation">,</span>
    isDeveloper<span class="token operator">:</span> ctx<span class="token punctuation">.</span>from<span class="token operator">?.</span>id <span class="token operator">===</span> <span class="token constant">BOT_DEVELOPER</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 为自定义上下文对象定义处理程序。</span>
bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>config<span class="token punctuation">.</span>isDeveloper<span class="token punctuation">)</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Hi mom!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Welcome&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">BOT_DEVELOPER</span> <span class="token operator">=</span> <span class="token number">123456</span><span class="token punctuation">;</span> <span class="token comment">// bot 开发者的聊天标识符</span>

<span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在上下文对象上设置自定义属性。</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span>config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">botDeveloper</span><span class="token operator">:</span> <span class="token constant">BOT_DEVELOPER</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isDeveloper</span><span class="token operator">:</span> ctx<span class="token punctuation">.</span>from<span class="token operator">?.</span>id <span class="token operator">===</span> <span class="token constant">BOT_DEVELOPER</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 为自定义上下文对象定义处理程序。</span>
bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>config<span class="token punctuation">.</span>isDeveloper<span class="token punctuation">)</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Hi mom!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Welcome&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>当然，自定义上下文类型也可以传递给其他处理中间件的东西，比如 <a href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/Composer" target="_blank" rel="noopener noreferrer">组合器<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> composer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Composer<span class="token operator">&lt;</span>MyContext<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>一些插件也需要你传递自定义上下文类型，比如 <a href="/zh/plugins/router.html" class="">路由器</a> 或 <a href="/zh/plugins/menu.html" class="">互动菜单</a> 插件。 请查看它们的文档，以了解它们如何使用自定义上下文类型。 这些类型被称为上下文调味剂，如 <a href="#%E4%B8%8A%E4%B8%8B%E6%96%87%E8%B0%83%E5%91%B3%E5%89%82">下面</a> 所述。</p><h3 id="通过继承" tabindex="-1"><a class="header-anchor" href="#通过继承" aria-hidden="true">#</a> 通过继承</h3><p>除了在上下文对象中设置自定义属性外，你还可以继承 <code>Context</code> 类。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MyContext</span> <span class="token keyword">extends</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
  <span class="token comment">// etc</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然而，我们建议你 <a href="#%E9%80%9A%E8%BF%87%E4%B8%AD%E9%97%B4%E4%BB%B6">通过中间件</a> 来自定义上下文对象，因为它更加灵活，并且在你想要安装插件的情况下工作得更好。</p><p>我们现在将看看如何为上下文对象使用自定义类。</p><p>当你构建你的 bot 时，你可以传递一个自定义上下文构造函数，这个函数将用于实例化上下文对象。 请注意，你的类必须继承 <code>Context</code>。</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TypeScript</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">JavaScript</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Deno</button></li></ul></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Bot<span class="token punctuation">,</span> Context <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;grammy&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Update<span class="token punctuation">,</span> UserFromGetMe <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@grammyjs/types&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 自定义一个上下文类。</span>
<span class="token keyword">class</span> <span class="token class-name">MyContext</span> <span class="token keyword">extends</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
  <span class="token comment">// 自定义一些属性</span>
  <span class="token keyword">public</span> <span class="token keyword">readonly</span> customProp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>update<span class="token operator">:</span> Update<span class="token punctuation">,</span> api<span class="token operator">:</span> Api<span class="token punctuation">,</span> me<span class="token operator">:</span> UserFromGetMe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>update<span class="token punctuation">,</span> api<span class="token punctuation">,</span> me<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>customProp <span class="token operator">=</span> me<span class="token punctuation">.</span>username<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">42</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 作为一个选项，传入自定义上下文类的构造函数。</span>
<span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;token&gt;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  ContextConstructor<span class="token operator">:</span> MyContext<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// `ctx` 现在成为了 `MyContext` 类型。</span>
  <span class="token keyword">const</span> prop <span class="token operator">=</span> ctx<span class="token punctuation">.</span>customProp<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Bot<span class="token punctuation">,</span> Context <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;grammy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 自定义一个上下文类。</span>
<span class="token keyword">class</span> <span class="token class-name">MyContext</span> <span class="token keyword">extends</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
  <span class="token comment">// 自定义一些属性</span>
  <span class="token keyword">public</span> <span class="token keyword">readonly</span> customProp<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>update<span class="token punctuation">,</span> api<span class="token punctuation">,</span> me<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>update<span class="token punctuation">,</span> api<span class="token punctuation">,</span> me<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>customProp <span class="token operator">=</span> me<span class="token punctuation">.</span>username<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">42</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 作为一个选项，传入自定义 上下文类的构造函数。</span>
<span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;token&gt;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  ContextConstructor<span class="token operator">:</span> MyContext<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// `ctx` 现在成为了 `MyContext` 类型。</span>
  <span class="token keyword">const</span> prop <span class="token operator">=</span> ctx<span class="token punctuation">.</span>customProp<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Bot<span class="token punctuation">,</span> Context <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://deno.land/x/grammy@v1.11.1/mod.ts&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Update<span class="token punctuation">,</span> UserFromGetMe <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://esm.sh/@grammyjs/types&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 自定义一个上下文类</span>
<span class="token keyword">class</span> <span class="token class-name">MyContext</span> <span class="token keyword">extends</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
  <span class="token comment">// 自定义一些属性。</span>
  <span class="token keyword">public</span> <span class="token keyword">readonly</span> customProp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>update<span class="token operator">:</span> Update<span class="token punctuation">,</span> api<span class="token operator">:</span> Api<span class="token punctuation">,</span> me<span class="token operator">:</span> UserFromGetMe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>update<span class="token punctuation">,</span> api<span class="token punctuation">,</span> me<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>customProp <span class="token operator">=</span> me<span class="token punctuation">.</span>username<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">42</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 作为一个选项，传递自定义上下文类的构造函数。</span>
<span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;token&gt;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  ContextConstructor<span class="token operator">:</span> MyContext<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// `ctx` 现在成为了 `MyContext` 类型。</span>
  <span class="token keyword">const</span> prop <span class="token operator">=</span> ctx<span class="token punctuation">.</span>customProp<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>请注意，当你使用自定义上下文类的子类时，类型会被自动推断。 你不再需要写 <code>Bot&lt;My<wbr>Context&gt;</code> 因为你已经在 <code>new Bot()</code> 的选项对象中指定了你的子类构造函数。</p><p>然而，这使得安装插件非常困难，因为它们通常需要你安装上下文调味剂。</p><h2 id="上下文调味剂" tabindex="-1"><a class="header-anchor" href="#上下文调味剂" aria-hidden="true">#</a> 上下文调味剂</h2><p>上下文调味剂是一种告诉 TypeScript 关于你的上下文对象的新属性的方式。 这些新属性可以在插件或其他模块中发布，然后安装在你的 bot 上。</p><p>上下文调味剂还能够使用由插件定义的自动程序来转换现有属性的类型。</p><h3 id="添加式上下文调味剂" tabindex="-1"><a class="header-anchor" href="#添加式上下文调味剂" aria-hidden="true">#</a> 添加式上下文调味剂</h3><p>正如上文所提到的，我们有两种不同类型的上下文调味剂。 最基本的被称为 <em>添加式上下文调味剂</em>，而且每当我们谈论 <em>给上下文烹饪调味</em> 时，我们一般指这种基本形式。 让我们来看看它是如何工作的：</p><p>举个例子，当你有 <a href="/zh/plugins/session.html" class="">会话数据</a> 时，你必须在上下文类型上注册 <code>ctx<wbr>.session</code>。 否则：</p><ol><li>你不能安装内置的 session 插件</li><li>你在听众中没有访问 <code>ctx<wbr>.session</code> 的权限</li></ol><blockquote><p>尽管我们在这里将使用会话作为一个例子，但类似的事情适用于许多其他事情。 事实上，大多数插件会给你一个你需要使用的上下文调味剂。</p></blockquote><p>上下文调味剂只是一个小的新类型，它定义了应该被添加到上下文类型中的属性。 让我们来看看一个调味的例子。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">SessionFlavor<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  session<span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Session<wbr>Flavor</code> 类型（<a href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/SessionFlavor" target="_blank" rel="noopener noreferrer">API 参考<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>）是清晰的：它只定义了属性 <code>session</code>。 它需要一个类型参数，用来定义会话数据的实际结构。</p><p>这有什么用呢？ 这里是一个例子：如果使用 <code>session</code> 数据来给上下文增鲜亮色。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Context<span class="token punctuation">,</span> SessionFlavor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;grammy&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 声明 `ctx.session` 为 `string` 类型。</span>
<span class="token keyword">type</span> <span class="token class-name">MyContext</span> <span class="token operator">=</span> Context <span class="token operator">&amp;</span> SessionFlavor<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在你可以使用 session 插件了，你可以访问<code>ctx<wbr>.session</code>。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 现在 `str` 是 `string` 类型的。</span>
  <span class="token keyword">const</span> str <span class="token operator">=</span> ctx<span class="token punctuation">.</span>session<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="转换式上下文调味剂" tabindex="-1"><a class="header-anchor" href="#转换式上下文调味剂" aria-hidden="true">#</a> 转换式上下文调味剂</h3><p>另一种上下文调味剂更强大。 它们不是用<code>&amp;</code>操作符来配置，而是需要像这样配置：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Context <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;grammy&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SomeFlavorA <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;my-plugin&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">MyContext</span> <span class="token operator">=</span> SomeFlavorA<span class="token operator">&lt;</span>Context<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其他一切都以添加式调味剂同样的方式运作。</p><p>每个（官方）插件都在其文档中说明了它是否必须通过添加式或转换式上下文风味来使用。</p><h3 id="结合不同类型的上下文调味剂" tabindex="-1"><a class="header-anchor" href="#结合不同类型的上下文调味剂" aria-hidden="true">#</a> 结合不同类型的上下文调味剂</h3><p>如果你有不同的 <a href="#%E6%B7%BB%E5%8A%A0%E5%BC%8F%E4%B8%8A%E4%B8%8B%E6%96%87%E8%B0%83%E5%91%B3%E5%89%82">添加式调味剂</a>，你可以像这样配置它们：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">MyContext</span> <span class="token operator">=</span> Context <span class="token operator">&amp;</span> FlavorA <span class="token operator">&amp;</span> FlavorB <span class="token operator">&amp;</span> FlavorC<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>调味的顺序并不重要，你可以以任何你喜欢的顺序组合它们。</p><p>多个 <a href="#%E8%BD%AC%E6%8D%A2%E5%BC%8F%E4%B8%8A%E4%B8%8B%E6%96%87%E8%B0%83%E5%91%B3%E5%89%82">转换式调味剂</a> 也可以结合起来：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">MyContext</span> <span class="token operator">=</span> FlavorX<span class="token operator">&lt;</span>FlavorY<span class="token operator">&lt;</span>FlavorZ<span class="token operator">&lt;</span>Context<span class="token operator">&gt;&gt;&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在这里，顺序可能很重要，因为 <code>Context</code> 先转换为 <code>FlavorZ</code>， 然后再转换为 <code>FlavorY</code>，最后转换为 <code>FlavorX</code>。 （在实践中，你不需要担心这个顺序，因为插件之间通常不会发生冲突。）</p><p>你甚至可以混合添加式和转化式的，以&quot;烹饪&quot;出更佳的上下文。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">MyContext</span> <span class="token operator">=</span> FlavorX<span class="token operator">&lt;</span>
  FlavorY<span class="token operator">&lt;</span>
    FlavorZ<span class="token operator">&lt;</span>
      Context <span class="token operator">&amp;</span> FlavorA <span class="token operator">&amp;</span> FlavorB <span class="token operator">&amp;</span> FlavorC
    <span class="token operator">&gt;</span>
  <span class="token operator">&gt;</span>
<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/grammyjs/website/edit/main/site/docs/zh/guide/context.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页！"><!--[--><!--]--><span>在 GitHub 上编辑此页！ <!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">最近更新时间: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: shtrog@gmail.com">KnorpelSenf</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: ez@roj.im">Roj</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 643089849@qq.com">WingLim</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: winglim@qq.com">WingLim</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: rojserbest@gmail.com">Roj</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: roj@rojser.best">Roj Serbest</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: winglims@gmail.com">WingLim</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 56839018+linbuxiao@users.noreply.github.com">linbuxiao</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/zh/guide/basics.html" class="" aria-label="发送和接收信息"><!--[--><!--]--><span>发送和接收信息 <!--v-if--></span><!--[--><!--]--></a></span><span class="next"><a href="/zh/guide/api.html" class="" aria-label="Bot API"><!--[--><!--]--><span>Bot API <!--v-if--></span><!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.81c9d145.js" defer></script>
  </body>
</html>
